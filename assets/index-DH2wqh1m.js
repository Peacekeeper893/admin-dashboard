function _v(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Iv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Yp={exports:{}},Ia={},qp={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),Pv=Symbol.for("react.portal"),Dv=Symbol.for("react.fragment"),Ov=Symbol.for("react.strict_mode"),Nv=Symbol.for("react.profiler"),Fv=Symbol.for("react.provider"),Mv=Symbol.for("react.context"),Uv=Symbol.for("react.forward_ref"),Bv=Symbol.for("react.suspense"),$v=Symbol.for("react.memo"),jv=Symbol.for("react.lazy"),ad=Symbol.iterator;function zv(t){return t===null||typeof t!="object"?null:(t=ad&&t[ad]||t["@@iterator"],typeof t=="function"?t:null)}var Xp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qp=Object.assign,Jp={};function wi(t,e,n){this.props=t,this.context=e,this.refs=Jp,this.updater=n||Xp}wi.prototype.isReactComponent={};wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zp(){}Zp.prototype=wi.prototype;function Nc(t,e,n){this.props=t,this.context=e,this.refs=Jp,this.updater=n||Xp}var Fc=Nc.prototype=new Zp;Fc.constructor=Nc;Qp(Fc,wi.prototype);Fc.isPureReactComponent=!0;var ld=Array.isArray,em=Object.prototype.hasOwnProperty,Mc={current:null},tm={key:!0,ref:!0,__self:!0,__source:!0};function nm(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)em.call(e,r)&&!tm.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ds,type:t,key:s,ref:o,props:i,_owner:Mc.current}}function Gv(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function Hv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ud=/\/+/g;function ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Hv(""+t.key):e.toString(36)}function So(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ds:case Pv:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ll(o,0):r,ld(i)?(n="",t!=null&&(n=t.replace(ud,"$&/")+"/"),So(i,e,n,"",function(u){return u})):i!=null&&(Uc(i)&&(i=Gv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ud,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ld(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ll(s,a);o+=So(s,e,n,l,i)}else if(l=zv(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ll(s,a++),o+=So(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gs(t,e,n){if(t==null)return t;var r=[],i=0;return So(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Vv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},Eo={transition:null},Wv={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Eo,ReactCurrentOwner:Mc};ce.Children={map:Gs,forEach:function(t,e,n){Gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gs(t,function(){e++}),e},toArray:function(t){return Gs(t,function(e){return e})||[]},only:function(t){if(!Uc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=wi;ce.Fragment=Dv;ce.Profiler=Nv;ce.PureComponent=Nc;ce.StrictMode=Ov;ce.Suspense=Bv;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wv;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qp({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Mc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)em.call(e,l)&&!tm.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ds,type:t.type,key:i,ref:s,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:Mv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fv,_context:t},t.Consumer=t};ce.createElement=nm;ce.createFactory=function(t){var e=nm.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:Uv,render:t}};ce.isValidElement=Uc;ce.lazy=function(t){return{$$typeof:jv,_payload:{_status:-1,_result:t},_init:Vv}};ce.memo=function(t,e){return{$$typeof:$v,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Eo.transition;Eo.transition={};try{t()}finally{Eo.transition=e}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(t,e){return it.current.useCallback(t,e)};ce.useContext=function(t){return it.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return it.current.useDeferredValue(t)};ce.useEffect=function(t,e){return it.current.useEffect(t,e)};ce.useId=function(){return it.current.useId()};ce.useImperativeHandle=function(t,e,n){return it.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return it.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return it.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return it.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return it.current.useReducer(t,e,n)};ce.useRef=function(t){return it.current.useRef(t)};ce.useState=function(t){return it.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return it.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return it.current.useTransition()};ce.version="18.2.0";qp.exports=ce;var $=qp.exports;const Y=Oc($),Kv=_v({__proto__:null,default:Y},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv=$,qv=Symbol.for("react.element"),Xv=Symbol.for("react.fragment"),Qv=Object.prototype.hasOwnProperty,Jv=Yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zv={key:!0,ref:!0,__self:!0,__source:!0};function rm(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Qv.call(e,r)&&!Zv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qv,type:t,key:s,ref:o,props:i,_owner:Jv.current}}Ia.Fragment=Xv;Ia.jsx=rm;Ia.jsxs=rm;Yp.exports=Ia;var M=Yp.exports,du={},im={exports:{}},Tt={},sm={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,R){var C=b.length;b.push(R);e:for(;0<C;){var j=C-1>>>1,N=b[j];if(0<i(N,R))b[j]=R,b[C]=N,C=j;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var R=b[0],C=b.pop();if(C!==R){b[0]=C;e:for(var j=0,N=b.length,K=N>>>1;j<K;){var X=2*(j+1)-1,te=b[X],re=X+1,me=b[re];if(0>i(te,C))re<N&&0>i(me,te)?(b[j]=me,b[re]=C,j=re):(b[j]=te,b[X]=C,j=X);else if(re<N&&0>i(me,C))b[j]=me,b[re]=C,j=re;else break e}}return R}function i(b,R){var C=b.sortIndex-R.sortIndex;return C!==0?C:b.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(b){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=b)r(u),R.sortIndex=R.expirationTime,e(l,R);else break;R=n(u)}}function T(b){if(m=!1,x(b),!p)if(n(l)!==null)p=!0,W(E);else{var R=n(u);R!==null&&L(T,R.startTime-b)}}function E(b,R){p=!1,m&&(m=!1,g(A),A=-1),h=!0;var C=d;try{for(x(R),f=n(l);f!==null&&(!(f.expirationTime>R)||b&&!H());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var N=j(f.expirationTime<=R);R=t.unstable_now(),typeof N=="function"?f.callback=N:f===n(l)&&r(l),x(R)}else r(l);f=n(l)}if(f!==null)var K=!0;else{var X=n(u);X!==null&&L(T,X.startTime-R),K=!1}return K}finally{f=null,d=C,h=!1}}var k=!1,w=null,A=-1,F=5,I=-1;function H(){return!(t.unstable_now()-I<F)}function U(){if(w!==null){var b=t.unstable_now();I=b;var R=!0;try{R=w(!0,b)}finally{R?z():(k=!1,w=null)}}else k=!1}var z;if(typeof v=="function")z=function(){v(U)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,D=O.port2;O.port1.onmessage=U,z=function(){D.postMessage(null)}}else z=function(){y(U,0)};function W(b){w=b,k||(k=!0,z())}function L(b,R){A=y(function(){b(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,W(E))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(b){switch(d){case 1:case 2:case 3:var R=3;break;default:R=d}var C=d;d=R;try{return b()}finally{d=C}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,R){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var C=d;d=b;try{return R()}finally{d=C}},t.unstable_scheduleCallback=function(b,R,C){var j=t.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?j+C:j):C=j,b){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=C+N,b={id:c++,callback:R,priorityLevel:b,startTime:C,expirationTime:N,sortIndex:-1},C>j?(b.sortIndex=C,e(u,b),n(l)===null&&b===n(u)&&(m?(g(A),A=-1):m=!0,L(T,C-j))):(b.sortIndex=N,e(l,b),p||h||(p=!0,W(E))),b},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(b){var R=d;return function(){var C=d;d=R;try{return b.apply(this,arguments)}finally{d=C}}}})(om);sm.exports=om;var ex=sm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am=$,St=ex;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lm=new Set,as={};function _r(t,e){ci(t,e),ci(t+"Capture",e)}function ci(t,e){for(as[t]=e,t=0;t<e.length;t++)lm.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=Object.prototype.hasOwnProperty,tx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cd={},fd={};function nx(t){return hu.call(fd,t)?!0:hu.call(cd,t)?!1:tx.test(t)?fd[t]=!0:(cd[t]=!0,!1)}function rx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ix(t,e,n,r){if(e===null||typeof e>"u"||rx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function st(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new st(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new st(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new st(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new st(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new st(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new st(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new st(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new st(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new st(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bc=/[\-:]([a-z])/g;function $c(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bc,$c);Ve[e]=new st(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bc,$c);Ve[e]=new st(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bc,$c);Ve[e]=new st(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new st(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new st(t,1,!1,t.toLowerCase(),null,!0,!0)});function jc(t,e,n,r){var i=Ve.hasOwnProperty(e)?Ve[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ix(e,n,i,r)&&(n=null),r||i===null?nx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _n=am.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hs=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),Hr=Symbol.for("react.fragment"),zc=Symbol.for("react.strict_mode"),pu=Symbol.for("react.profiler"),um=Symbol.for("react.provider"),cm=Symbol.for("react.context"),Gc=Symbol.for("react.forward_ref"),mu=Symbol.for("react.suspense"),gu=Symbol.for("react.suspense_list"),Hc=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),fm=Symbol.for("react.offscreen"),dd=Symbol.iterator;function Ii(t){return t===null||typeof t!="object"?null:(t=dd&&t[dd]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,ul;function zi(t){if(ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ul=e&&e[1]||""}return`
`+ul+t}var cl=!1;function fl(t,e){if(!t||cl)return"";cl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function sx(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=fl(t.type,!1),t;case 11:return t=fl(t.type.render,!1),t;case 1:return t=fl(t.type,!0),t;default:return""}}function yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hr:return"Fragment";case Gr:return"Portal";case pu:return"Profiler";case zc:return"StrictMode";case mu:return"Suspense";case gu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cm:return(t.displayName||"Context")+".Consumer";case um:return(t._context.displayName||"Context")+".Provider";case Gc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hc:return e=t.displayName||null,e!==null?e:yu(t.type)||"Memo";case Nn:e=t._payload,t=t._init;try{return yu(t(e))}catch{}}return null}function ox(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yu(e);case 8:return e===zc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ax(t){var e=dm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vs(t){t._valueTracker||(t._valueTracker=ax(t))}function hm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vu(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pm(t,e){e=e.checked,e!=null&&jc(t,"checked",e,!1)}function xu(t,e){pm(t,e);var n=er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Su(t,e.type,n):e.hasOwnProperty("defaultValue")&&Su(t,e.type,er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Su(t,e,n){(e!=="number"||Vo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function ni(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+er(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Eu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function md(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(Gi(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:er(n)}}function mm(t,e){var n=er(e.value),r=er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ws,ym=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ws=Ws||document.createElement("div"),Ws.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ws.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lx=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){lx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ki[e]=Ki[t]})});function vm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+e).trim():e+"px"}function xm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ux=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wu(t,e){if(e){if(ux[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function Cu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=null;function Vc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Au=null,ri=null,ii=null;function yd(t){if(t=Fs(t)){if(typeof Au!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Fa(e),Au(t.stateNode,t.type,e))}}function Sm(t){ri?ii?ii.push(t):ii=[t]:ri=t}function Em(){if(ri){var t=ri,e=ii;if(ii=ri=null,yd(t),e)for(t=0;t<e.length;t++)yd(e[t])}}function Tm(t,e){return t(e)}function wm(){}var dl=!1;function Cm(t,e,n){if(dl)return t(e,n);dl=!0;try{return Tm(t,e,n)}finally{dl=!1,(ri!==null||ii!==null)&&(wm(),Em())}}function us(t,e){var n=t.stateNode;if(n===null)return null;var r=Fa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var ku=!1;if(Rn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){ku=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{ku=!1}function cx(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Yi=!1,Wo=null,Ko=!1,Lu=null,fx={onError:function(t){Yi=!0,Wo=t}};function dx(t,e,n,r,i,s,o,a,l){Yi=!1,Wo=null,cx.apply(fx,arguments)}function hx(t,e,n,r,i,s,o,a,l){if(dx.apply(this,arguments),Yi){if(Yi){var u=Wo;Yi=!1,Wo=null}else throw Error(V(198));Ko||(Ko=!0,Lu=u)}}function Ir(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vd(t){if(Ir(t)!==t)throw Error(V(188))}function px(t){var e=t.alternate;if(!e){if(e=Ir(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vd(i),t;if(s===r)return vd(i),e;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function Am(t){return t=px(t),t!==null?km(t):null}function km(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=km(t);if(e!==null)return e;t=t.sibling}return null}var Lm=St.unstable_scheduleCallback,xd=St.unstable_cancelCallback,mx=St.unstable_shouldYield,gx=St.unstable_requestPaint,_e=St.unstable_now,yx=St.unstable_getCurrentPriorityLevel,Wc=St.unstable_ImmediatePriority,bm=St.unstable_UserBlockingPriority,Yo=St.unstable_NormalPriority,vx=St.unstable_LowPriority,_m=St.unstable_IdlePriority,Pa=null,un=null;function xx(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Pa,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Tx,Sx=Math.log,Ex=Math.LN2;function Tx(t){return t>>>=0,t===0?32:31-(Sx(t)/Ex|0)|0}var Ks=64,Ys=4194304;function Hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hi(a):(s&=o,s!==0&&(r=Hi(s)))}else o=n&~i,o!==0?r=Hi(o):s!==0&&(r=Hi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kt(e),i=1<<n,r|=t[n],e&=~i;return r}function wx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kt(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=wx(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function bu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Im(){var t=Ks;return Ks<<=1,!(Ks&4194240)&&(Ks=64),t}function hl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Os(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=n}function Rx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Kc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function Pm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dm,Yc,Om,Nm,Fm,_u=!1,qs=[],Wn=null,Kn=null,Yn=null,cs=new Map,fs=new Map,Bn=[],Ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sd(t,e){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(e.pointerId)}}function Di(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fs(e),e!==null&&Yc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kx(t,e,n,r,i){switch(e){case"focusin":return Wn=Di(Wn,t,e,n,r,i),!0;case"dragenter":return Kn=Di(Kn,t,e,n,r,i),!0;case"mouseover":return Yn=Di(Yn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return cs.set(s,Di(cs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,fs.set(s,Di(fs.get(s)||null,t,e,n,r,i)),!0}return!1}function Mm(t){var e=pr(t.target);if(e!==null){var n=Ir(e);if(n!==null){if(e=n.tag,e===13){if(e=Rm(n),e!==null){t.blockedOn=e,Fm(t.priority,function(){Om(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function To(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Iu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ru=r,n.target.dispatchEvent(r),Ru=null}else return e=Fs(n),e!==null&&Yc(e),t.blockedOn=n,!1;e.shift()}return!0}function Ed(t,e,n){To(t)&&n.delete(e)}function Lx(){_u=!1,Wn!==null&&To(Wn)&&(Wn=null),Kn!==null&&To(Kn)&&(Kn=null),Yn!==null&&To(Yn)&&(Yn=null),cs.forEach(Ed),fs.forEach(Ed)}function Oi(t,e){t.blockedOn===e&&(t.blockedOn=null,_u||(_u=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Lx)))}function ds(t){function e(i){return Oi(i,t)}if(0<qs.length){Oi(qs[0],t);for(var n=1;n<qs.length;n++){var r=qs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wn!==null&&Oi(Wn,t),Kn!==null&&Oi(Kn,t),Yn!==null&&Oi(Yn,t),cs.forEach(e),fs.forEach(e),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)Mm(n),n.blockedOn===null&&Bn.shift()}var si=_n.ReactCurrentBatchConfig,Xo=!0;function bx(t,e,n,r){var i=ye,s=si.transition;si.transition=null;try{ye=1,qc(t,e,n,r)}finally{ye=i,si.transition=s}}function _x(t,e,n,r){var i=ye,s=si.transition;si.transition=null;try{ye=4,qc(t,e,n,r)}finally{ye=i,si.transition=s}}function qc(t,e,n,r){if(Xo){var i=Iu(t,e,n,r);if(i===null)wl(t,e,r,Qo,n),Sd(t,r);else if(kx(i,t,e,n,r))r.stopPropagation();else if(Sd(t,r),e&4&&-1<Ax.indexOf(t)){for(;i!==null;){var s=Fs(i);if(s!==null&&Dm(s),s=Iu(t,e,n,r),s===null&&wl(t,e,r,Qo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wl(t,e,r,null,n)}}var Qo=null;function Iu(t,e,n,r){if(Qo=null,t=Vc(r),t=pr(t),t!==null)if(e=Ir(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qo=t,null}function Um(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yx()){case Wc:return 1;case bm:return 4;case Yo:case vx:return 16;case _m:return 536870912;default:return 16}default:return 16}}var jn=null,Xc=null,wo=null;function Bm(){if(wo)return wo;var t,e=Xc,n=e.length,r,i="value"in jn?jn.value:jn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wo=i.slice(t,1<r?1-r:void 0)}function Co(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xs(){return!0}function Td(){return!1}function wt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xs:Td,this.isPropagationStopped=Td,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qc=wt(Ci),Ns=Le({},Ci,{view:0,detail:0}),Ix=wt(Ns),pl,ml,Ni,Da=Le({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ni&&(Ni&&t.type==="mousemove"?(pl=t.screenX-Ni.screenX,ml=t.screenY-Ni.screenY):ml=pl=0,Ni=t),pl)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),wd=wt(Da),Px=Le({},Da,{dataTransfer:0}),Dx=wt(Px),Ox=Le({},Ns,{relatedTarget:0}),gl=wt(Ox),Nx=Le({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Fx=wt(Nx),Mx=Le({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ux=wt(Mx),Bx=Le({},Ci,{data:0}),Cd=wt(Bx),$x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zx[t])?!!e[t]:!1}function Jc(){return Gx}var Hx=Le({},Ns,{key:function(t){if(t.key){var e=$x[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Co(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(t){return t.type==="keypress"?Co(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Co(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vx=wt(Hx),Wx=Le({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=wt(Wx),Kx=Le({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),Yx=wt(Kx),qx=Le({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xx=wt(qx),Qx=Le({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jx=wt(Qx),Zx=[9,13,27,32],Zc=Rn&&"CompositionEvent"in window,qi=null;Rn&&"documentMode"in document&&(qi=document.documentMode);var eS=Rn&&"TextEvent"in window&&!qi,$m=Rn&&(!Zc||qi&&8<qi&&11>=qi),Ad=" ",kd=!1;function jm(t,e){switch(t){case"keyup":return Zx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vr=!1;function tS(t,e){switch(t){case"compositionend":return zm(e);case"keypress":return e.which!==32?null:(kd=!0,Ad);case"textInput":return t=e.data,t===Ad&&kd?null:t;default:return null}}function nS(t,e){if(Vr)return t==="compositionend"||!Zc&&jm(t,e)?(t=Bm(),wo=Xc=jn=null,Vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $m&&e.locale!=="ko"?null:e.data;default:return null}}var rS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rS[t.type]:e==="textarea"}function Gm(t,e,n,r){Sm(r),e=Jo(e,"onChange"),0<e.length&&(n=new Qc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xi=null,hs=null;function iS(t){e0(t,0)}function Oa(t){var e=Yr(t);if(hm(e))return t}function sS(t,e){if(t==="change")return e}var Hm=!1;if(Rn){var yl;if(Rn){var vl="oninput"in document;if(!vl){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),vl=typeof bd.oninput=="function"}yl=vl}else yl=!1;Hm=yl&&(!document.documentMode||9<document.documentMode)}function _d(){Xi&&(Xi.detachEvent("onpropertychange",Vm),hs=Xi=null)}function Vm(t){if(t.propertyName==="value"&&Oa(hs)){var e=[];Gm(e,hs,t,Vc(t)),Cm(iS,e)}}function oS(t,e,n){t==="focusin"?(_d(),Xi=e,hs=n,Xi.attachEvent("onpropertychange",Vm)):t==="focusout"&&_d()}function aS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oa(hs)}function lS(t,e){if(t==="click")return Oa(e)}function uS(t,e){if(t==="input"||t==="change")return Oa(e)}function cS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:cS;function ps(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hu.call(e,i)||!Xt(t[i],e[i]))return!1}return!0}function Id(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pd(t,e){var n=Id(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Id(n)}}function Wm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Km(){for(var t=window,e=Vo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vo(t.document)}return e}function ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fS(t){var e=Km(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wm(n.ownerDocument.documentElement,n)){if(r!==null&&ef(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Pd(n,s);var o=Pd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dS=Rn&&"documentMode"in document&&11>=document.documentMode,Wr=null,Pu=null,Qi=null,Du=!1;function Dd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Du||Wr==null||Wr!==Vo(r)||(r=Wr,"selectionStart"in r&&ef(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qi&&ps(Qi,r)||(Qi=r,r=Jo(Pu,"onSelect"),0<r.length&&(e=new Qc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wr)))}function Qs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Kr={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionend:Qs("Transition","TransitionEnd")},xl={},Ym={};Rn&&(Ym=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function Na(t){if(xl[t])return xl[t];if(!Kr[t])return t;var e=Kr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ym)return xl[t]=e[n];return t}var qm=Na("animationend"),Xm=Na("animationiteration"),Qm=Na("animationstart"),Jm=Na("transitionend"),Zm=new Map,Od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){Zm.set(t,e),_r(e,[t])}for(var Sl=0;Sl<Od.length;Sl++){var El=Od[Sl],hS=El.toLowerCase(),pS=El[0].toUpperCase()+El.slice(1);rr(hS,"on"+pS)}rr(qm,"onAnimationEnd");rr(Xm,"onAnimationIteration");rr(Qm,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(Jm,"onTransitionEnd");ci("onMouseEnter",["mouseout","mouseover"]);ci("onMouseLeave",["mouseout","mouseover"]);ci("onPointerEnter",["pointerout","pointerover"]);ci("onPointerLeave",["pointerout","pointerover"]);_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_r("onBeforeInput",["compositionend","keypress","textInput","paste"]);_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function Nd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hx(r,e,void 0,t),t.currentTarget=null}function e0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Nd(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Nd(i,a,u),s=l}}}if(Ko)throw t=Lu,Ko=!1,Lu=null,t}function Se(t,e){var n=e[Uu];n===void 0&&(n=e[Uu]=new Set);var r=t+"__bubble";n.has(r)||(t0(e,t,2,!1),n.add(r))}function Tl(t,e,n){var r=0;e&&(r|=4),t0(n,t,r,e)}var Js="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[Js]){t[Js]=!0,lm.forEach(function(n){n!=="selectionchange"&&(mS.has(n)||Tl(n,!1,t),Tl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Js]||(e[Js]=!0,Tl("selectionchange",!1,e))}}function t0(t,e,n,r){switch(Um(e)){case 1:var i=bx;break;case 4:i=_x;break;default:i=qc}n=i.bind(null,e,n,t),i=void 0,!ku||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=pr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Cm(function(){var u=s,c=Vc(n),f=[];e:{var d=Zm.get(t);if(d!==void 0){var h=Qc,p=t;switch(t){case"keypress":if(Co(n)===0)break e;case"keydown":case"keyup":h=Vx;break;case"focusin":p="focus",h=gl;break;case"focusout":p="blur",h=gl;break;case"beforeblur":case"afterblur":h=gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Dx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Yx;break;case qm:case Xm:case Qm:h=Fx;break;case Jm:h=Xx;break;case"scroll":h=Ix;break;case"wheel":h=Jx;break;case"copy":case"cut":case"paste":h=Ux;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Rd}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var v=u,x;v!==null;){x=v;var T=x.stateNode;if(x.tag===5&&T!==null&&(x=T,g!==null&&(T=us(v,g),T!=null&&m.push(gs(v,T,x)))),y)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==Ru&&(p=n.relatedTarget||n.fromElement)&&(pr(p)||p[An]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?pr(p):null,p!==null&&(y=Ir(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=wd,T="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=Rd,T="onPointerLeave",g="onPointerEnter",v="pointer"),y=h==null?d:Yr(h),x=p==null?d:Yr(p),d=new m(T,v+"leave",h,n,c),d.target=y,d.relatedTarget=x,T=null,pr(c)===u&&(m=new m(g,v+"enter",p,n,c),m.target=x,m.relatedTarget=y,T=m),y=T,h&&p)t:{for(m=h,g=p,v=0,x=m;x;x=Dr(x))v++;for(x=0,T=g;T;T=Dr(T))x++;for(;0<v-x;)m=Dr(m),v--;for(;0<x-v;)g=Dr(g),x--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=Dr(m),g=Dr(g)}m=null}else m=null;h!==null&&Fd(f,d,h,m,!1),p!==null&&y!==null&&Fd(f,y,p,m,!0)}}e:{if(d=u?Yr(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=sS;else if(Ld(d))if(Hm)E=uS;else{E=aS;var k=oS}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=lS);if(E&&(E=E(t,u))){Gm(f,E,n,c);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Su(d,"number",d.value)}switch(k=u?Yr(u):window,t){case"focusin":(Ld(k)||k.contentEditable==="true")&&(Wr=k,Pu=u,Qi=null);break;case"focusout":Qi=Pu=Wr=null;break;case"mousedown":Du=!0;break;case"contextmenu":case"mouseup":case"dragend":Du=!1,Dd(f,n,c);break;case"selectionchange":if(dS)break;case"keydown":case"keyup":Dd(f,n,c)}var w;if(Zc)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Vr?jm(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&($m&&n.locale!=="ko"&&(Vr||A!=="onCompositionStart"?A==="onCompositionEnd"&&Vr&&(w=Bm()):(jn=c,Xc="value"in jn?jn.value:jn.textContent,Vr=!0)),k=Jo(u,A),0<k.length&&(A=new Cd(A,t,null,n,c),f.push({event:A,listeners:k}),w?A.data=w:(w=zm(n),w!==null&&(A.data=w)))),(w=eS?tS(t,n):nS(t,n))&&(u=Jo(u,"onBeforeInput"),0<u.length&&(c=new Cd("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=w))}e0(f,e)})}function gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=us(t,n),s!=null&&r.unshift(gs(t,s,i)),s=us(t,e),s!=null&&r.push(gs(t,s,i))),t=t.return}return r}function Dr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=us(n,s),l!=null&&o.unshift(gs(n,l,a))):i||(l=us(n,s),l!=null&&o.push(gs(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function Md(t){return(typeof t=="string"?t:""+t).replace(gS,`
`).replace(yS,"")}function Zs(t,e,n){if(e=Md(e),Md(t)!==e&&n)throw Error(V(425))}function Zo(){}var Ou=null,Nu=null;function Fu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,vS=typeof clearTimeout=="function"?clearTimeout:void 0,Ud=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ud<"u"?function(t){return Ud.resolve(null).then(t).catch(SS)}:Mu;function SS(t){setTimeout(function(){throw t})}function Cl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ds(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ds(e)}function qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ri=Math.random().toString(36).slice(2),sn="__reactFiber$"+Ri,ys="__reactProps$"+Ri,An="__reactContainer$"+Ri,Uu="__reactEvents$"+Ri,ES="__reactListeners$"+Ri,TS="__reactHandles$"+Ri;function pr(t){var e=t[sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Bd(t);t!==null;){if(n=t[sn])return n;t=Bd(t)}return e}t=n,n=t.parentNode}return null}function Fs(t){return t=t[sn]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Fa(t){return t[ys]||null}var Bu=[],qr=-1;function ir(t){return{current:t}}function Ee(t){0>qr||(t.current=Bu[qr],Bu[qr]=null,qr--)}function ve(t,e){qr++,Bu[qr]=t.current,t.current=e}var tr={},Je=ir(tr),dt=ir(!1),Cr=tr;function fi(t,e){var n=t.type.contextTypes;if(!n)return tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ht(t){return t=t.childContextTypes,t!=null}function ea(){Ee(dt),Ee(Je)}function $d(t,e,n){if(Je.current!==tr)throw Error(V(168));ve(Je,e),ve(dt,n)}function n0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(V(108,ox(t)||"Unknown",i));return Le({},n,r)}function ta(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,Cr=Je.current,ve(Je,t),ve(dt,dt.current),!0}function jd(t,e,n){var r=t.stateNode;if(!r)throw Error(V(169));n?(t=n0(t,e,Cr),r.__reactInternalMemoizedMergedChildContext=t,Ee(dt),Ee(Je),ve(Je,t)):Ee(dt),ve(dt,n)}var xn=null,Ma=!1,Rl=!1;function r0(t){xn===null?xn=[t]:xn.push(t)}function wS(t){Ma=!0,r0(t)}function sr(){if(!Rl&&xn!==null){Rl=!0;var t=0,e=ye;try{var n=xn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xn=null,Ma=!1}catch(i){throw xn!==null&&(xn=xn.slice(t+1)),Lm(Wc,sr),i}finally{ye=e,Rl=!1}}return null}var Xr=[],Qr=0,na=null,ra=0,kt=[],Lt=0,Rr=null,Sn=1,En="";function cr(t,e){Xr[Qr++]=ra,Xr[Qr++]=na,na=t,ra=e}function i0(t,e,n){kt[Lt++]=Sn,kt[Lt++]=En,kt[Lt++]=Rr,Rr=t;var r=Sn;t=En;var i=32-Kt(r)-1;r&=~(1<<i),n+=1;var s=32-Kt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sn=1<<32-Kt(e)+i|n<<i|r,En=s+t}else Sn=1<<s|n<<i|r,En=t}function tf(t){t.return!==null&&(cr(t,1),i0(t,1,0))}function nf(t){for(;t===na;)na=Xr[--Qr],Xr[Qr]=null,ra=Xr[--Qr],Xr[Qr]=null;for(;t===Rr;)Rr=kt[--Lt],kt[Lt]=null,En=kt[--Lt],kt[Lt]=null,Sn=kt[--Lt],kt[Lt]=null}var xt=null,vt=null,Te=!1,Vt=null;function s0(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xt=t,vt=qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xt=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rr!==null?{id:Sn,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xt=t,vt=null,!0):!1;default:return!1}}function $u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ju(t){if(Te){var e=vt;if(e){var n=e;if(!zd(t,e)){if($u(t))throw Error(V(418));e=qn(n.nextSibling);var r=xt;e&&zd(t,e)?s0(r,n):(t.flags=t.flags&-4097|2,Te=!1,xt=t)}}else{if($u(t))throw Error(V(418));t.flags=t.flags&-4097|2,Te=!1,xt=t}}}function Gd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xt=t}function eo(t){if(t!==xt)return!1;if(!Te)return Gd(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fu(t.type,t.memoizedProps)),e&&(e=vt)){if($u(t))throw o0(),Error(V(418));for(;e;)s0(t,e),e=qn(e.nextSibling)}if(Gd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=xt?qn(t.stateNode.nextSibling):null;return!0}function o0(){for(var t=vt;t;)t=qn(t.nextSibling)}function di(){vt=xt=null,Te=!1}function rf(t){Vt===null?Vt=[t]:Vt.push(t)}var CS=_n.ReactCurrentBatchConfig;function jt(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ia=ir(null),sa=null,Jr=null,sf=null;function of(){sf=Jr=sa=null}function af(t){var e=ia.current;Ee(ia),t._currentValue=e}function zu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oi(t,e){sa=t,sf=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(sf!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(sa===null)throw Error(V(308));Jr=t,sa.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var mr=null;function lf(t){mr===null?mr=[t]:mr.push(t)}function a0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,lf(e)):(n.next=i.next,i.next=n),e.interleaved=n,kn(t,r)}function kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kn(t,n)}return i=r.interleaved,i===null?(e.next=e,lf(r)):(e.next=i.next,i.next=e),r.interleaved=e,kn(t,n)}function Ro(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kc(t,n)}}function Hd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oa(t,e,n,r){var i=t.updateQueue;Fn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(d=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Le({},f,d);break e;case 2:Fn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);kr|=o,t.lanes=o,t.memoizedState=f}}function Vd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var u0=new am.Component().refs;function Gu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ua={isMounted:function(t){return(t=t._reactInternals)?Ir(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Jn(t),s=wn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Xn(t,s,i),e!==null&&(Yt(e,t,i,r),Ro(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Jn(t),s=wn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Xn(t,s,i),e!==null&&(Yt(e,t,i,r),Ro(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),r=Jn(t),i=wn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Xn(t,i,r),e!==null&&(Yt(e,t,r,n),Ro(e,t,r))}};function Wd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ps(n,r)||!ps(i,s):!0}function c0(t,e,n){var r=!1,i=tr,s=e.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(i=ht(e)?Cr:Je.current,r=e.contextTypes,s=(r=r!=null)?fi(t,i):tr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ua,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Kd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ua.enqueueReplaceState(e,e.state,null)}function Hu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=u0,uf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pt(s):(s=ht(e)?Cr:Je.current,i.context=fi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ua.enqueueReplaceState(i,i.state,null),oa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===u0&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function to(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yd(t){var e=t._init;return e(t._payload)}function f0(t){function e(g,v){if(t){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=Zn(g,v),g.index=0,g.sibling=null,g}function s(g,v,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,x,T){return v===null||v.tag!==6?(v=Pl(x,g.mode,T),v.return=g,v):(v=i(v,x),v.return=g,v)}function l(g,v,x,T){var E=x.type;return E===Hr?c(g,v,x.props.children,T,x.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nn&&Yd(E)===v.type)?(T=i(v,x.props),T.ref=Fi(g,v,x),T.return=g,T):(T=Io(x.type,x.key,x.props,null,g.mode,T),T.ref=Fi(g,v,x),T.return=g,T)}function u(g,v,x,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Dl(x,g.mode,T),v.return=g,v):(v=i(v,x.children||[]),v.return=g,v)}function c(g,v,x,T,E){return v===null||v.tag!==7?(v=xr(x,g.mode,T,E),v.return=g,v):(v=i(v,x),v.return=g,v)}function f(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Pl(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Hs:return x=Io(v.type,v.key,v.props,null,g.mode,x),x.ref=Fi(g,null,v),x.return=g,x;case Gr:return v=Dl(v,g.mode,x),v.return=g,v;case Nn:var T=v._init;return f(g,T(v._payload),x)}if(Gi(v)||Ii(v))return v=xr(v,g.mode,x,null),v.return=g,v;to(g,v)}return null}function d(g,v,x,T){var E=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:a(g,v,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hs:return x.key===E?l(g,v,x,T):null;case Gr:return x.key===E?u(g,v,x,T):null;case Nn:return E=x._init,d(g,v,E(x._payload),T)}if(Gi(x)||Ii(x))return E!==null?null:c(g,v,x,T,null);to(g,x)}return null}function h(g,v,x,T,E){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(x)||null,a(v,g,""+T,E);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Hs:return g=g.get(T.key===null?x:T.key)||null,l(v,g,T,E);case Gr:return g=g.get(T.key===null?x:T.key)||null,u(v,g,T,E);case Nn:var k=T._init;return h(g,v,x,k(T._payload),E)}if(Gi(T)||Ii(T))return g=g.get(x)||null,c(v,g,T,E,null);to(v,T)}return null}function p(g,v,x,T){for(var E=null,k=null,w=v,A=v=0,F=null;w!==null&&A<x.length;A++){w.index>A?(F=w,w=null):F=w.sibling;var I=d(g,w,x[A],T);if(I===null){w===null&&(w=F);break}t&&w&&I.alternate===null&&e(g,w),v=s(I,v,A),k===null?E=I:k.sibling=I,k=I,w=F}if(A===x.length)return n(g,w),Te&&cr(g,A),E;if(w===null){for(;A<x.length;A++)w=f(g,x[A],T),w!==null&&(v=s(w,v,A),k===null?E=w:k.sibling=w,k=w);return Te&&cr(g,A),E}for(w=r(g,w);A<x.length;A++)F=h(w,g,A,x[A],T),F!==null&&(t&&F.alternate!==null&&w.delete(F.key===null?A:F.key),v=s(F,v,A),k===null?E=F:k.sibling=F,k=F);return t&&w.forEach(function(H){return e(g,H)}),Te&&cr(g,A),E}function m(g,v,x,T){var E=Ii(x);if(typeof E!="function")throw Error(V(150));if(x=E.call(x),x==null)throw Error(V(151));for(var k=E=null,w=v,A=v=0,F=null,I=x.next();w!==null&&!I.done;A++,I=x.next()){w.index>A?(F=w,w=null):F=w.sibling;var H=d(g,w,I.value,T);if(H===null){w===null&&(w=F);break}t&&w&&H.alternate===null&&e(g,w),v=s(H,v,A),k===null?E=H:k.sibling=H,k=H,w=F}if(I.done)return n(g,w),Te&&cr(g,A),E;if(w===null){for(;!I.done;A++,I=x.next())I=f(g,I.value,T),I!==null&&(v=s(I,v,A),k===null?E=I:k.sibling=I,k=I);return Te&&cr(g,A),E}for(w=r(g,w);!I.done;A++,I=x.next())I=h(w,g,A,I.value,T),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?A:I.key),v=s(I,v,A),k===null?E=I:k.sibling=I,k=I);return t&&w.forEach(function(U){return e(g,U)}),Te&&cr(g,A),E}function y(g,v,x,T){if(typeof x=="object"&&x!==null&&x.type===Hr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Hs:e:{for(var E=x.key,k=v;k!==null;){if(k.key===E){if(E=x.type,E===Hr){if(k.tag===7){n(g,k.sibling),v=i(k,x.props.children),v.return=g,g=v;break e}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nn&&Yd(E)===k.type){n(g,k.sibling),v=i(k,x.props),v.ref=Fi(g,k,x),v.return=g,g=v;break e}n(g,k);break}else e(g,k);k=k.sibling}x.type===Hr?(v=xr(x.props.children,g.mode,T,x.key),v.return=g,g=v):(T=Io(x.type,x.key,x.props,null,g.mode,T),T.ref=Fi(g,v,x),T.return=g,g=T)}return o(g);case Gr:e:{for(k=x.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=i(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=Dl(x,g.mode,T),v.return=g,g=v}return o(g);case Nn:return k=x._init,y(g,v,k(x._payload),T)}if(Gi(x))return p(g,v,x,T);if(Ii(x))return m(g,v,x,T);to(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,x),v.return=g,g=v):(n(g,v),v=Pl(x,g.mode,T),v.return=g,g=v),o(g)):n(g,v)}return y}var hi=f0(!0),d0=f0(!1),Ms={},cn=ir(Ms),vs=ir(Ms),xs=ir(Ms);function gr(t){if(t===Ms)throw Error(V(174));return t}function cf(t,e){switch(ve(xs,e),ve(vs,t),ve(cn,Ms),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tu(e,t)}Ee(cn),ve(cn,e)}function pi(){Ee(cn),Ee(vs),Ee(xs)}function h0(t){gr(xs.current);var e=gr(cn.current),n=Tu(e,t.type);e!==n&&(ve(vs,t),ve(cn,n))}function ff(t){vs.current===t&&(Ee(cn),Ee(vs))}var Ae=ir(0);function aa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Al=[];function df(){for(var t=0;t<Al.length;t++)Al[t]._workInProgressVersionPrimary=null;Al.length=0}var Ao=_n.ReactCurrentDispatcher,kl=_n.ReactCurrentBatchConfig,Ar=0,ke=null,Ne=null,Be=null,la=!1,Ji=!1,Ss=0,RS=0;function We(){throw Error(V(321))}function hf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function pf(t,e,n,r,i,s){if(Ar=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ao.current=t===null||t.memoizedState===null?bS:_S,t=n(r,i),Ji){s=0;do{if(Ji=!1,Ss=0,25<=s)throw Error(V(301));s+=1,Be=Ne=null,e.updateQueue=null,Ao.current=IS,t=n(r,i)}while(Ji)}if(Ao.current=ua,e=Ne!==null&&Ne.next!==null,Ar=0,Be=Ne=ke=null,la=!1,e)throw Error(V(300));return t}function mf(){var t=Ss!==0;return Ss=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?ke.memoizedState=Be=t:Be=Be.next=t,Be}function Dt(){if(Ne===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=Be===null?ke.memoizedState:Be.next;if(e!==null)Be=e,Ne=t;else{if(t===null)throw Error(V(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Be===null?ke.memoizedState=Be=t:Be=Be.next=t}return Be}function Es(t,e){return typeof e=="function"?e(t):e}function Ll(t){var e=Dt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=Ne,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ar&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ke.lanes|=c,kr|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Xt(r,e.memoizedState)||(ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ke.lanes|=s,kr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bl(t){var e=Dt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Xt(s,e.memoizedState)||(ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function p0(){}function m0(t,e){var n=ke,r=Dt(),i=e(),s=!Xt(r.memoizedState,i);if(s&&(r.memoizedState=i,ft=!0),r=r.queue,gf(v0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Ts(9,y0.bind(null,n,r,i,e),void 0,null),je===null)throw Error(V(349));Ar&30||g0(n,e,i)}return i}function g0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function y0(t,e,n,r){e.value=n,e.getSnapshot=r,x0(e)&&S0(t)}function v0(t,e,n){return n(function(){x0(e)&&S0(t)})}function x0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function S0(t){var e=kn(t,1);e!==null&&Yt(e,t,1,-1)}function qd(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:t},e.queue=t,t=t.dispatch=LS.bind(null,ke,t),[e.memoizedState,t]}function Ts(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function E0(){return Dt().memoizedState}function ko(t,e,n,r){var i=tn();ke.flags|=t,i.memoizedState=Ts(1|e,n,void 0,r===void 0?null:r)}function Ba(t,e,n,r){var i=Dt();r=r===void 0?null:r;var s=void 0;if(Ne!==null){var o=Ne.memoizedState;if(s=o.destroy,r!==null&&hf(r,o.deps)){i.memoizedState=Ts(e,n,s,r);return}}ke.flags|=t,i.memoizedState=Ts(1|e,n,s,r)}function Xd(t,e){return ko(8390656,8,t,e)}function gf(t,e){return Ba(2048,8,t,e)}function T0(t,e){return Ba(4,2,t,e)}function w0(t,e){return Ba(4,4,t,e)}function C0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function R0(t,e,n){return n=n!=null?n.concat([t]):null,Ba(4,4,C0.bind(null,e,t),n)}function yf(){}function A0(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function k0(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L0(t,e,n){return Ar&21?(Xt(n,e)||(n=Im(),ke.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function AS(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=kl.transition;kl.transition={};try{t(!1),e()}finally{ye=n,kl.transition=r}}function b0(){return Dt().memoizedState}function kS(t,e,n){var r=Jn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_0(t))I0(e,n);else if(n=a0(t,e,n,r),n!==null){var i=rt();Yt(n,t,r,i),P0(n,e,r)}}function LS(t,e,n){var r=Jn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_0(t))I0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xt(a,o)){var l=e.interleaved;l===null?(i.next=i,lf(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=a0(t,e,i,r),n!==null&&(i=rt(),Yt(n,t,r,i),P0(n,e,r))}}function _0(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function I0(t,e){Ji=la=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kc(t,n)}}var ua={readContext:Pt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},bS={readContext:Pt,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:Xd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ko(4194308,4,C0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return ko(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kS.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:qd,useDebugValue:yf,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=qd(!1),e=t[0];return t=AS.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,i=tn();if(Te){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),je===null)throw Error(V(349));Ar&30||g0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Xd(v0.bind(null,r,s,t),[t]),r.flags|=2048,Ts(9,y0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=tn(),e=je.identifierPrefix;if(Te){var n=En,r=Sn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ss++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_S={readContext:Pt,useCallback:A0,useContext:Pt,useEffect:gf,useImperativeHandle:R0,useInsertionEffect:T0,useLayoutEffect:w0,useMemo:k0,useReducer:Ll,useRef:E0,useState:function(){return Ll(Es)},useDebugValue:yf,useDeferredValue:function(t){var e=Dt();return L0(e,Ne.memoizedState,t)},useTransition:function(){var t=Ll(Es)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:p0,useSyncExternalStore:m0,useId:b0,unstable_isNewReconciler:!1},IS={readContext:Pt,useCallback:A0,useContext:Pt,useEffect:gf,useImperativeHandle:R0,useInsertionEffect:T0,useLayoutEffect:w0,useMemo:k0,useReducer:bl,useRef:E0,useState:function(){return bl(Es)},useDebugValue:yf,useDeferredValue:function(t){var e=Dt();return Ne===null?e.memoizedState=t:L0(e,Ne.memoizedState,t)},useTransition:function(){var t=bl(Es)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:p0,useSyncExternalStore:m0,useId:b0,unstable_isNewReconciler:!1};function mi(t,e){try{var n="",r=e;do n+=sx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _l(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PS=typeof WeakMap=="function"?WeakMap:Map;function D0(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fa||(fa=!0,tc=r),Vu(t,e)},n}function O0(t,e,n){n=wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Vu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Vu(t,e),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=WS.bind(null,t,e,n),e.then(t,t))}function Jd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,Xn(n,e,1))),n.lanes|=1),t)}var DS=_n.ReactCurrentOwner,ft=!1;function tt(t,e,n,r){e.child=t===null?d0(e,null,n,r):hi(e,t.child,n,r)}function eh(t,e,n,r,i){n=n.render;var s=e.ref;return oi(e,i),r=pf(t,e,n,r,s,i),n=mf(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Te&&n&&tf(e),e.flags|=1,tt(t,e,r,i),e.child)}function th(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Rf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,N0(t,e,s,r,i)):(t=Io(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ps,n(o,r)&&t.ref===e.ref)return Ln(t,e,i)}return e.flags|=1,t=Zn(s,r),t.ref=e.ref,t.return=e,e.child=t}function N0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ps(s,r)&&t.ref===e.ref)if(ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,Ln(t,e,i)}return Wu(t,e,n,r,i)}function F0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(ei,yt),yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(ei,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ve(ei,yt),yt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ve(ei,yt),yt|=r;return tt(t,e,i,n),e.child}function M0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wu(t,e,n,r,i){var s=ht(n)?Cr:Je.current;return s=fi(e,s),oi(e,i),n=pf(t,e,n,r,s,i),r=mf(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Te&&r&&tf(e),e.flags|=1,tt(t,e,n,i),e.child)}function nh(t,e,n,r,i){if(ht(n)){var s=!0;ta(e)}else s=!1;if(oi(e,i),e.stateNode===null)Lo(t,e),c0(e,n,r),Hu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pt(u):(u=ht(n)?Cr:Je.current,u=fi(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Kd(e,o,r,u),Fn=!1;var d=e.memoizedState;o.state=d,oa(e,r,o,i),l=e.memoizedState,a!==r||d!==l||dt.current||Fn?(typeof c=="function"&&(Gu(e,n,c,r),l=e.memoizedState),(a=Fn||Wd(e,n,a,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l0(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:jt(e.type,a),o.props=u,f=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pt(l):(l=ht(n)?Cr:Je.current,l=fi(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&Kd(e,o,r,l),Fn=!1,d=e.memoizedState,o.state=d,oa(e,r,o,i);var p=e.memoizedState;a!==f||d!==p||dt.current||Fn?(typeof h=="function"&&(Gu(e,n,h,r),p=e.memoizedState),(u=Fn||Wd(e,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ku(t,e,n,r,s,i)}function Ku(t,e,n,r,i,s){M0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&jd(e,n,!1),Ln(t,e,s);r=e.stateNode,DS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hi(e,t.child,null,s),e.child=hi(e,null,a,s)):tt(t,e,a,s),e.memoizedState=r.state,i&&jd(e,n,!0),e.child}function U0(t){var e=t.stateNode;e.pendingContext?$d(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$d(t,e.context,!1),cf(t,e.containerInfo)}function rh(t,e,n,r,i){return di(),rf(i),e.flags|=256,tt(t,e,n,r),e.child}var Yu={dehydrated:null,treeContext:null,retryLane:0};function qu(t){return{baseLanes:t,cachePool:null,transitions:null}}function B0(t,e,n){var r=e.pendingProps,i=Ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(Ae,i&1),t===null)return ju(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=za(o,r,0,null),t=xr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qu(n),e.memoizedState=Yu,t):vf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return OS(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Zn(a,s):(s=xr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Yu,r}return s=t.child,t=s.sibling,r=Zn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vf(t,e){return e=za({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function no(t,e,n,r){return r!==null&&rf(r),hi(e,t.child,null,n),t=vf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=_l(Error(V(422))),no(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=za({mode:"visible",children:r.children},i,0,null),s=xr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hi(e,t.child,null,o),e.child.memoizedState=qu(o),e.memoizedState=Yu,s);if(!(e.mode&1))return no(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(V(419)),r=_l(s,r,void 0),no(t,e,o,r)}if(a=(o&t.childLanes)!==0,ft||a){if(r=je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kn(t,i),Yt(r,t,i,-1))}return Cf(),r=_l(Error(V(421))),no(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=KS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vt=qn(i.nextSibling),xt=e,Te=!0,Vt=null,t!==null&&(kt[Lt++]=Sn,kt[Lt++]=En,kt[Lt++]=Rr,Sn=t.id,En=t.overflow,Rr=e),e=vf(e,r.children),e.flags|=4096,e)}function ih(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zu(t.return,e,n)}function Il(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ih(t,n,e);else if(t.tag===19)ih(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&aa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Il(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&aa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Il(e,!0,n,null,s);break;case"together":Il(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=Zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NS(t,e,n){switch(e.tag){case 3:U0(e),di();break;case 5:h0(e);break;case 1:ht(e.type)&&ta(e);break;case 4:cf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(ia,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?B0(t,e,n):(ve(Ae,Ae.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);ve(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,F0(t,e,n)}return Ln(t,e,n)}var j0,Xu,z0,G0;j0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xu=function(){};z0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gr(cn.current);var s=null;switch(n){case"input":i=vu(t,i),r=vu(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=Eu(t,i),r=Eu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zo)}wu(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(as.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(as.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};G0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mi(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FS(t,e,n){var r=e.pendingProps;switch(nf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ht(e.type)&&ea(),Ke(e),null;case 3:return r=e.stateNode,pi(),Ee(dt),Ee(Je),df(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(eo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vt!==null&&(ic(Vt),Vt=null))),Xu(t,e),Ke(e),null;case 5:ff(e);var i=gr(xs.current);if(n=e.type,t!==null&&e.stateNode!=null)z0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(V(166));return Ke(e),null}if(t=gr(cn.current),eo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sn]=e,r[ys]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<Vi.length;i++)Se(Vi[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":hd(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":md(r,s),Se("invalid",r)}wu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zs(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zs(r.textContent,a,t),i=["children",""+a]):as.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Vs(r),pd(r,s,!0);break;case"textarea":Vs(r),gd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sn]=e,t[ys]=r,j0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cu(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<Vi.length;i++)Se(Vi[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":hd(t,r),i=vu(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Se("invalid",t);break;case"textarea":md(t,r),i=Eu(t,r),Se("invalid",t);break;default:i=r}wu(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?xm(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ym(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ls(t,l):typeof l=="number"&&ls(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(as.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",t):l!=null&&jc(t,s,l,o))}switch(n){case"input":Vs(t),pd(t,r,!1);break;case"textarea":Vs(t),gd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+er(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ni(t,!!r.multiple,s,!1):r.defaultValue!=null&&ni(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)G0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(V(166));if(n=gr(xs.current),gr(cn.current),eo(e)){if(r=e.stateNode,n=e.memoizedProps,r[sn]=e,(s=r.nodeValue!==n)&&(t=xt,t!==null))switch(t.tag){case 3:Zs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sn]=e,e.stateNode=r}return Ke(e),null;case 13:if(Ee(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&vt!==null&&e.mode&1&&!(e.flags&128))o0(),di(),e.flags|=98560,s=!1;else if(s=eo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[sn]=e}else di(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),s=!1}else Vt!==null&&(ic(Vt),Vt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Fe===0&&(Fe=3):Cf())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return pi(),Xu(t,e),t===null&&ms(e.stateNode.containerInfo),Ke(e),null;case 10:return af(e.type._context),Ke(e),null;case 17:return ht(e.type)&&ea(),Ke(e),null;case 19:if(Ee(Ae),s=e.memoizedState,s===null)return Ke(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mi(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=aa(t),o!==null){for(e.flags|=128,Mi(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ae,Ae.current&1|2),e.child}t=t.sibling}s.tail!==null&&_e()>gi&&(e.flags|=128,r=!0,Mi(s,!1),e.lanes=4194304)}else{if(!r)if(t=aa(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return Ke(e),null}else 2*_e()-s.renderingStartTime>gi&&n!==1073741824&&(e.flags|=128,r=!0,Mi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_e(),e.sibling=null,n=Ae.current,ve(Ae,r?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return wf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function MS(t,e){switch(nf(e),e.tag){case 1:return ht(e.type)&&ea(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(),Ee(dt),Ee(Je),df(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ff(e),null;case 13:if(Ee(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));di()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ae),null;case 4:return pi(),null;case 10:return af(e.type._context),null;case 22:case 23:return wf(),null;case 24:return null;default:return null}}var ro=!1,Xe=!1,US=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Zr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Qu(t,e,n){try{n()}catch(r){be(t,e,r)}}var sh=!1;function BS(t,e){if(Ou=Xo,t=Km(),ef(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nu={focusedElem:t,selectionRange:n},Xo=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:jt(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(T){be(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=sh,sh=!1,p}function Zi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qu(e,n,s)}i=i.next}while(i!==r)}}function $a(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ju(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H0(t){var e=t.alternate;e!==null&&(t.alternate=null,H0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sn],delete e[ys],delete e[Uu],delete e[ES],delete e[TS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V0(t){return t.tag===5||t.tag===3||t.tag===4}function oh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zo));else if(r!==4&&(t=t.child,t!==null))for(Zu(t,e,n),t=t.sibling;t!==null;)Zu(t,e,n),t=t.sibling}function ec(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ec(t,e,n),t=t.sibling;t!==null;)ec(t,e,n),t=t.sibling}var ze=null,Gt=!1;function In(t,e,n){for(n=n.child;n!==null;)W0(t,e,n),n=n.sibling}function W0(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Pa,n)}catch{}switch(n.tag){case 5:Xe||Zr(n,e);case 6:var r=ze,i=Gt;ze=null,In(t,e,n),ze=r,Gt=i,ze!==null&&(Gt?(t=ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(Gt?(t=ze,n=n.stateNode,t.nodeType===8?Cl(t.parentNode,n):t.nodeType===1&&Cl(t,n),ds(t)):Cl(ze,n.stateNode));break;case 4:r=ze,i=Gt,ze=n.stateNode.containerInfo,Gt=!0,In(t,e,n),ze=r,Gt=i;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qu(n,e,o),i=i.next}while(i!==r)}In(t,e,n);break;case 1:if(!Xe&&(Zr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){be(n,e,a)}In(t,e,n);break;case 21:In(t,e,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,In(t,e,n),Xe=r):In(t,e,n);break;default:In(t,e,n)}}function ah(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new US),e.forEach(function(r){var i=YS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ze=a.stateNode,Gt=!1;break e;case 3:ze=a.stateNode.containerInfo,Gt=!0;break e;case 4:ze=a.stateNode.containerInfo,Gt=!0;break e}a=a.return}if(ze===null)throw Error(V(160));W0(s,o,i),ze=null,Gt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){be(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K0(e,t),e=e.sibling}function K0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),Zt(t),r&4){try{Zi(3,t,t.return),$a(3,t)}catch(m){be(t,t.return,m)}try{Zi(5,t,t.return)}catch(m){be(t,t.return,m)}}break;case 1:Ut(e,t),Zt(t),r&512&&n!==null&&Zr(n,n.return);break;case 5:if(Ut(e,t),Zt(t),r&512&&n!==null&&Zr(n,n.return),t.flags&32){var i=t.stateNode;try{ls(i,"")}catch(m){be(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&pm(i,s),Cu(a,o);var u=Cu(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?xm(i,f):c==="dangerouslySetInnerHTML"?ym(i,f):c==="children"?ls(i,f):jc(i,c,f,u)}switch(a){case"input":xu(i,s);break;case"textarea":mm(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ni(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?ni(i,!!s.multiple,s.defaultValue,!0):ni(i,!!s.multiple,s.multiple?[]:"",!1))}i[ys]=s}catch(m){be(t,t.return,m)}}break;case 6:if(Ut(e,t),Zt(t),r&4){if(t.stateNode===null)throw Error(V(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){be(t,t.return,m)}}break;case 3:if(Ut(e,t),Zt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ds(e.containerInfo)}catch(m){be(t,t.return,m)}break;case 4:Ut(e,t),Zt(t);break;case 13:Ut(e,t),Zt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ef=_e())),r&4&&ah(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Xe=(u=Xe)||c,Ut(e,t),Xe=u):Ut(e,t),Zt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(f=Q=c;Q!==null;){switch(d=Q,h=d.child,d.tag){case 0:case 11:case 14:case 15:Zi(4,d,d.return);break;case 1:Zr(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){be(r,n,m)}}break;case 5:Zr(d,d.return);break;case 22:if(d.memoizedState!==null){uh(f);continue}}h!==null?(h.return=d,Q=h):uh(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vm("display",o))}catch(m){be(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){be(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ut(e,t),Zt(t),r&4&&ah(t);break;case 21:break;default:Ut(e,t),Zt(t)}}function Zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(V0(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ls(i,""),r.flags&=-33);var s=oh(t);ec(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=oh(t);Zu(t,a,o);break;default:throw Error(V(161))}}catch(l){be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $S(t,e,n){Q=t,Y0(t)}function Y0(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ro;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Xe;a=ro;var u=Xe;if(ro=o,(Xe=l)&&!u)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?ch(i):l!==null?(l.return=o,Q=l):ch(i);for(;s!==null;)Q=s,Y0(s),s=s.sibling;Q=i,ro=a,Xe=u}lh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):lh(t)}}function lh(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xe||$a(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Vd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vd(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ds(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Xe||e.flags&512&&Ju(e)}catch(d){be(e,e.return,d)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function uh(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function ch(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$a(4,e)}catch(l){be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){be(e,i,l)}}var s=e.return;try{Ju(e)}catch(l){be(e,s,l)}break;case 5:var o=e.return;try{Ju(e)}catch(l){be(e,o,l)}}}catch(l){be(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var jS=Math.ceil,ca=_n.ReactCurrentDispatcher,xf=_n.ReactCurrentOwner,_t=_n.ReactCurrentBatchConfig,ge=0,je=null,De=null,He=0,yt=0,ei=ir(0),Fe=0,ws=null,kr=0,ja=0,Sf=0,es=null,ut=null,Ef=0,gi=1/0,yn=null,fa=!1,tc=null,Qn=null,io=!1,zn=null,da=0,ts=0,nc=null,bo=-1,_o=0;function rt(){return ge&6?_e():bo!==-1?bo:bo=_e()}function Jn(t){return t.mode&1?ge&2&&He!==0?He&-He:CS.transition!==null?(_o===0&&(_o=Im()),_o):(t=ye,t!==0||(t=window.event,t=t===void 0?16:Um(t.type)),t):1}function Yt(t,e,n,r){if(50<ts)throw ts=0,nc=null,Error(V(185));Os(t,n,r),(!(ge&2)||t!==je)&&(t===je&&(!(ge&2)&&(ja|=n),Fe===4&&$n(t,He)),pt(t,r),n===1&&ge===0&&!(e.mode&1)&&(gi=_e()+500,Ma&&sr()))}function pt(t,e){var n=t.callbackNode;Cx(t,e);var r=qo(t,t===je?He:0);if(r===0)n!==null&&xd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xd(n),e===1)t.tag===0?wS(fh.bind(null,t)):r0(fh.bind(null,t)),xS(function(){!(ge&6)&&sr()}),n=null;else{switch(Pm(r)){case 1:n=Wc;break;case 4:n=bm;break;case 16:n=Yo;break;case 536870912:n=_m;break;default:n=Yo}n=ng(n,q0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function q0(t,e){if(bo=-1,_o=0,ge&6)throw Error(V(327));var n=t.callbackNode;if(ai()&&t.callbackNode!==n)return null;var r=qo(t,t===je?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ha(t,r);else{e=r;var i=ge;ge|=2;var s=Q0();(je!==t||He!==e)&&(yn=null,gi=_e()+500,vr(t,e));do try{HS();break}catch(a){X0(t,a)}while(!0);of(),ca.current=s,ge=i,De!==null?e=0:(je=null,He=0,e=Fe)}if(e!==0){if(e===2&&(i=bu(t),i!==0&&(r=i,e=rc(t,i))),e===1)throw n=ws,vr(t,0),$n(t,r),pt(t,_e()),n;if(e===6)$n(t,r);else{if(i=t.current.alternate,!(r&30)&&!zS(i)&&(e=ha(t,r),e===2&&(s=bu(t),s!==0&&(r=s,e=rc(t,s))),e===1))throw n=ws,vr(t,0),$n(t,r),pt(t,_e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(V(345));case 2:fr(t,ut,yn);break;case 3:if($n(t,r),(r&130023424)===r&&(e=Ef+500-_e(),10<e)){if(qo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Mu(fr.bind(null,t,ut,yn),e);break}fr(t,ut,yn);break;case 4:if($n(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=_e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jS(r/1960))-r,10<r){t.timeoutHandle=Mu(fr.bind(null,t,ut,yn),r);break}fr(t,ut,yn);break;case 5:fr(t,ut,yn);break;default:throw Error(V(329))}}}return pt(t,_e()),t.callbackNode===n?q0.bind(null,t):null}function rc(t,e){var n=es;return t.current.memoizedState.isDehydrated&&(vr(t,e).flags|=256),t=ha(t,e),t!==2&&(e=ut,ut=n,e!==null&&ic(e)),t}function ic(t){ut===null?ut=t:ut.push.apply(ut,t)}function zS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~Sf,e&=~ja,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kt(e),r=1<<n;t[n]=-1,e&=~r}}function fh(t){if(ge&6)throw Error(V(327));ai();var e=qo(t,0);if(!(e&1))return pt(t,_e()),null;var n=ha(t,e);if(t.tag!==0&&n===2){var r=bu(t);r!==0&&(e=r,n=rc(t,r))}if(n===1)throw n=ws,vr(t,0),$n(t,e),pt(t,_e()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fr(t,ut,yn),pt(t,_e()),null}function Tf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(gi=_e()+500,Ma&&sr())}}function Lr(t){zn!==null&&zn.tag===0&&!(ge&6)&&ai();var e=ge;ge|=1;var n=_t.transition,r=ye;try{if(_t.transition=null,ye=1,t)return t()}finally{ye=r,_t.transition=n,ge=e,!(ge&6)&&sr()}}function wf(){yt=ei.current,Ee(ei)}function vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vS(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(nf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ea();break;case 3:pi(),Ee(dt),Ee(Je),df();break;case 5:ff(r);break;case 4:pi();break;case 13:Ee(Ae);break;case 19:Ee(Ae);break;case 10:af(r.type._context);break;case 22:case 23:wf()}n=n.return}if(je=t,De=t=Zn(t.current,null),He=yt=e,Fe=0,ws=null,Sf=ja=kr=0,ut=es=null,mr!==null){for(e=0;e<mr.length;e++)if(n=mr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}mr=null}return t}function X0(t,e){do{var n=De;try{if(of(),Ao.current=ua,la){for(var r=ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}la=!1}if(Ar=0,Be=Ne=ke=null,Ji=!1,Ss=0,xf.current=null,n===null||n.return===null){Fe=1,ws=e,De=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=He,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Jd(o);if(h!==null){h.flags&=-257,Zd(h,o,a,s,e),h.mode&1&&Qd(s,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Qd(s,u,e),Cf();break e}l=Error(V(426))}}else if(Te&&a.mode&1){var y=Jd(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Zd(y,o,a,s,e),rf(mi(l,a));break e}}s=l=mi(l,a),Fe!==4&&(Fe=2),es===null?es=[s]:es.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=D0(s,l,e);Hd(s,g);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qn===null||!Qn.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=O0(s,a,e);Hd(s,T);break e}}s=s.return}while(s!==null)}Z0(n)}catch(E){e=E,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function Q0(){var t=ca.current;return ca.current=ua,t===null?ua:t}function Cf(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),je===null||!(kr&268435455)&&!(ja&268435455)||$n(je,He)}function ha(t,e){var n=ge;ge|=2;var r=Q0();(je!==t||He!==e)&&(yn=null,vr(t,e));do try{GS();break}catch(i){X0(t,i)}while(!0);if(of(),ge=n,ca.current=r,De!==null)throw Error(V(261));return je=null,He=0,Fe}function GS(){for(;De!==null;)J0(De)}function HS(){for(;De!==null&&!mx();)J0(De)}function J0(t){var e=tg(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?Z0(t):De=e,xf.current=null}function Z0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MS(n,e),n!==null){n.flags&=32767,De=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,De=null;return}}else if(n=FS(n,e,yt),n!==null){De=n;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Fe===0&&(Fe=5)}function fr(t,e,n){var r=ye,i=_t.transition;try{_t.transition=null,ye=1,VS(t,e,n,r)}finally{_t.transition=i,ye=r}return null}function VS(t,e,n,r){do ai();while(zn!==null);if(ge&6)throw Error(V(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Rx(t,s),t===je&&(De=je=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||io||(io=!0,ng(Yo,function(){return ai(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_t.transition,_t.transition=null;var o=ye;ye=1;var a=ge;ge|=4,xf.current=null,BS(t,n),K0(n,t),fS(Nu),Xo=!!Ou,Nu=Ou=null,t.current=n,$S(n),gx(),ge=a,ye=o,_t.transition=s}else t.current=n;if(io&&(io=!1,zn=t,da=i),s=t.pendingLanes,s===0&&(Qn=null),xx(n.stateNode),pt(t,_e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fa)throw fa=!1,t=tc,tc=null,t;return da&1&&t.tag!==0&&ai(),s=t.pendingLanes,s&1?t===nc?ts++:(ts=0,nc=t):ts=0,sr(),null}function ai(){if(zn!==null){var t=Pm(da),e=_t.transition,n=ye;try{if(_t.transition=null,ye=16>t?16:t,zn===null)var r=!1;else{if(t=zn,zn=null,da=0,ge&6)throw Error(V(331));var i=ge;for(ge|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:Zi(8,c,s)}var f=c.child;if(f!==null)f.return=c,Q=f;else for(;Q!==null;){c=Q;var d=c.sibling,h=c.return;if(H0(c),c===u){Q=null;break}if(d!==null){d.return=h,Q=d;break}Q=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zi(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Q=g;break e}Q=s.return}}var v=t.current;for(Q=v;Q!==null;){o=Q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Q=x;else e:for(o=v;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$a(9,a)}}catch(E){be(a,a.return,E)}if(a===o){Q=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Q=T;break e}Q=a.return}}if(ge=i,sr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Pa,t)}catch{}r=!0}return r}finally{ye=n,_t.transition=e}}return!1}function dh(t,e,n){e=mi(n,e),e=D0(t,e,1),t=Xn(t,e,1),e=rt(),t!==null&&(Os(t,1,e),pt(t,e))}function be(t,e,n){if(t.tag===3)dh(t,t,n);else for(;e!==null;){if(e.tag===3){dh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){t=mi(n,t),t=O0(e,t,1),e=Xn(e,t,1),t=rt(),e!==null&&(Os(e,1,t),pt(e,t));break}}e=e.return}}function WS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(He&n)===n&&(Fe===4||Fe===3&&(He&130023424)===He&&500>_e()-Ef?vr(t,0):Sf|=n),pt(t,e)}function eg(t,e){e===0&&(t.mode&1?(e=Ys,Ys<<=1,!(Ys&130023424)&&(Ys=4194304)):e=1);var n=rt();t=kn(t,e),t!==null&&(Os(t,e,n),pt(t,n))}function KS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eg(t,n)}function YS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(e),eg(t,n)}var tg;tg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dt.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,NS(t,e,n);ft=!!(t.flags&131072)}else ft=!1,Te&&e.flags&1048576&&i0(e,ra,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lo(t,e),t=e.pendingProps;var i=fi(e,Je.current);oi(e,n),i=pf(null,e,r,t,i,n);var s=mf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(r)?(s=!0,ta(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uf(e),i.updater=Ua,e.stateNode=i,i._reactInternals=e,Hu(e,r,t,n),e=Ku(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&tf(e),tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=XS(r),t=jt(r,t),i){case 0:e=Wu(null,e,r,t,n);break e;case 1:e=nh(null,e,r,t,n);break e;case 11:e=eh(null,e,r,t,n);break e;case 14:e=th(null,e,r,jt(r.type,t),n);break e}throw Error(V(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Wu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),nh(t,e,r,i,n);case 3:e:{if(U0(e),t===null)throw Error(V(387));r=e.pendingProps,s=e.memoizedState,i=s.element,l0(t,e),oa(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mi(Error(V(423)),e),e=rh(t,e,r,n,i);break e}else if(r!==i){i=mi(Error(V(424)),e),e=rh(t,e,r,n,i);break e}else for(vt=qn(e.stateNode.containerInfo.firstChild),xt=e,Te=!0,Vt=null,n=d0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(di(),r===i){e=Ln(t,e,n);break e}tt(t,e,r,n)}e=e.child}return e;case 5:return h0(e),t===null&&ju(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Fu(r,i)?o=null:s!==null&&Fu(r,s)&&(e.flags|=32),M0(t,e),tt(t,e,o,n),e.child;case 6:return t===null&&ju(e),null;case 13:return B0(t,e,n);case 4:return cf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hi(e,null,r,n):tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),eh(t,e,r,i,n);case 7:return tt(t,e,e.pendingProps,n),e.child;case 8:return tt(t,e,e.pendingProps.children,n),e.child;case 12:return tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ve(ia,r._currentValue),r._currentValue=o,s!==null)if(Xt(s.value,o)){if(s.children===i.children&&!dt.current){e=Ln(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=wn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zu(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oi(e,n),i=Pt(i),r=r(i),e.flags|=1,tt(t,e,r,n),e.child;case 14:return r=e.type,i=jt(r,e.pendingProps),i=jt(r.type,i),th(t,e,r,i,n);case 15:return N0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Lo(t,e),e.tag=1,ht(r)?(t=!0,ta(e)):t=!1,oi(e,n),c0(e,r,i),Hu(e,r,i,n),Ku(null,e,r,!0,t,n);case 19:return $0(t,e,n);case 22:return F0(t,e,n)}throw Error(V(156,e.tag))};function ng(t,e){return Lm(t,e)}function qS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,r){return new qS(t,e,n,r)}function Rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XS(t){if(typeof t=="function")return Rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gc)return 11;if(t===Hc)return 14}return 2}function Zn(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Io(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Rf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hr:return xr(n.children,i,s,e);case zc:o=8,i|=8;break;case pu:return t=bt(12,n,e,i|2),t.elementType=pu,t.lanes=s,t;case mu:return t=bt(13,n,e,i),t.elementType=mu,t.lanes=s,t;case gu:return t=bt(19,n,e,i),t.elementType=gu,t.lanes=s,t;case fm:return za(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case um:o=10;break e;case cm:o=9;break e;case Gc:o=11;break e;case Hc:o=14;break e;case Nn:o=16,r=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=bt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xr(t,e,n,r){return t=bt(7,t,r,e),t.lanes=n,t}function za(t,e,n,r){return t=bt(22,t,r,e),t.elementType=fm,t.lanes=n,t.stateNode={isHidden:!1},t}function Pl(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function Dl(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Af(t,e,n,r,i,s,o,a,l){return t=new QS(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uf(s),t}function JS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rg(t){if(!t)return tr;t=t._reactInternals;e:{if(Ir(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(ht(n))return n0(t,n,e)}return e}function ig(t,e,n,r,i,s,o,a,l){return t=Af(n,r,!0,t,i,s,o,a,l),t.context=rg(null),n=t.current,r=rt(),i=Jn(n),s=wn(r,i),s.callback=e??null,Xn(n,s,i),t.current.lanes=i,Os(t,i,r),pt(t,r),t}function Ga(t,e,n,r){var i=e.current,s=rt(),o=Jn(i);return n=rg(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xn(i,e,o),t!==null&&(Yt(t,i,o,s),Ro(t,i,o)),o}function pa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kf(t,e){hh(t,e),(t=t.alternate)&&hh(t,e)}function ZS(){return null}var sg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lf(t){this._internalRoot=t}Ha.prototype.render=Lf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));Ga(t,e,null,null)};Ha.prototype.unmount=Lf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){Ga(null,t,null,null)}),e[An]=null}};function Ha(t){this._internalRoot=t}Ha.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bn.length&&e!==0&&e<Bn[n].priority;n++);Bn.splice(n,0,t),n===0&&Mm(t)}};function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ph(){}function eE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=pa(o);s.call(u)}}var o=ig(e,r,t,0,null,!1,!1,"",ph);return t._reactRootContainer=o,t[An]=o.current,ms(t.nodeType===8?t.parentNode:t),Lr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=pa(l);a.call(u)}}var l=Af(t,0,!1,null,null,!1,!1,"",ph);return t._reactRootContainer=l,t[An]=l.current,ms(t.nodeType===8?t.parentNode:t),Lr(function(){Ga(e,l,n,r)}),l}function Wa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=pa(o);a.call(l)}}Ga(e,o,t,i)}else o=eE(n,e,t,i,r);return pa(o)}Dm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hi(e.pendingLanes);n!==0&&(Kc(e,n|1),pt(e,_e()),!(ge&6)&&(gi=_e()+500,sr()))}break;case 13:Lr(function(){var r=kn(t,1);if(r!==null){var i=rt();Yt(r,t,1,i)}}),kf(t,1)}};Yc=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var n=rt();Yt(e,t,134217728,n)}kf(t,134217728)}};Om=function(t){if(t.tag===13){var e=Jn(t),n=kn(t,e);if(n!==null){var r=rt();Yt(n,t,e,r)}kf(t,e)}};Nm=function(){return ye};Fm=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Au=function(t,e,n){switch(e){case"input":if(xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fa(r);if(!i)throw Error(V(90));hm(r),xu(r,i)}}}break;case"textarea":mm(t,n);break;case"select":e=n.value,e!=null&&ni(t,!!n.multiple,e,!1)}};Tm=Tf;wm=Lr;var tE={usingClientEntryPoint:!1,Events:[Fs,Yr,Fa,Sm,Em,Tf]},Ui={findFiberByHostInstance:pr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nE={bundleType:Ui.bundleType,version:Ui.version,rendererPackageName:Ui.rendererPackageName,rendererConfig:Ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Am(t),t===null?null:t.stateNode},findFiberByHostInstance:Ui.findFiberByHostInstance||ZS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var so=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!so.isDisabled&&so.supportsFiber)try{Pa=so.inject(nE),un=so}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tE;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(e))throw Error(V(200));return JS(t,e,null,n)};Tt.createRoot=function(t,e){if(!bf(t))throw Error(V(299));var n=!1,r="",i=sg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Af(t,1,!1,null,null,n,!1,r,i),t[An]=e.current,ms(t.nodeType===8?t.parentNode:t),new Lf(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=Am(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Lr(t)};Tt.hydrate=function(t,e,n){if(!Va(e))throw Error(V(200));return Wa(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!bf(t))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ig(e,null,t,1,n??null,i,!1,s,o),t[An]=e.current,ms(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ha(e)};Tt.render=function(t,e,n){if(!Va(e))throw Error(V(200));return Wa(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!Va(t))throw Error(V(40));return t._reactRootContainer?(Lr(function(){Wa(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1};Tt.unstable_batchedUpdates=Tf;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Va(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Wa(t,e,n,!1,r)};Tt.version="18.2.0-next-9e3b772b8-20220608";function og(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(og)}catch(t){console.error(t)}}og(),im.exports=Tt;var _f=im.exports,mh=_f;du.createRoot=mh.createRoot,du.hydrateRoot=mh.hydrateRoot;var ag=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},J=(t,e,n)=>(ag(t,e,"read from private field"),n?n.call(t):e.get(t)),$r=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},lr=(t,e,n,r)=>(ag(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);typeof window<"u"&&!window.global&&(window.global=typeof fu>"u"?window:fu);var lg=t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,ug="pk_live_",rE="pk_test_";function gh(t){if(t=t||"",!cg(t))return null;const e=t.startsWith(ug)?"production":"development";let n=lg(t.split("_")[2]);return n.endsWith("$")?(n=n.slice(0,-1),{instanceType:e,frontendApi:n}):null}function cg(t){t=t||"";const e=t.startsWith(ug)||t.startsWith(rE),n=lg(t.split("_")[2]||"").endsWith("$");return e&&n}function iE(t){return t=t||"",t.startsWith("clerk.")}function sE(){const t=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],e=new Map;return{isDevOrStagingUrl:n=>{if(!n)return!1;const r=typeof n=="string"?n:n.hostname;let i=e.get(r);return i===void 0&&(i=t.some(s=>r.endsWith(s)),e.set(r,i)),i}}}var fg=Object.defineProperty,oE=Object.getOwnPropertyDescriptor,aE=Object.getOwnPropertyNames,lE=Object.prototype.hasOwnProperty,uE=(t,e)=>{for(var n in e)fg(t,n,{get:e[n],enumerable:!0})},yh=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aE(e))!lE.call(t,i)&&i!==n&&fg(t,i,{get:()=>e[i],enumerable:!(r=oE(e,i))||r.enumerable});return t},cE=(t,e,n)=>(yh(t,e,"default"),n&&yh(n,e,"default")),fE=()=>{try{return!1}catch{}return!1},dE=()=>{try{return!1}catch{}return!1},hE=()=>{try{return!0}catch{}return!1},vh=new Set,ma=(t,e,n)=>{const r=dE()||hE(),i=n??t;vh.has(i)||r||(vh.add(i),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))},pE={Expired:"expired",Failed:"failed"};new Proxy(pE,{get(t,e,n){return ma("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(t,e,n)}});var mE=Object.freeze({InvalidFrontendApiErrorMessage:"The frontendApi passed to Clerk is invalid. You can get your Frontend API key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys."});function gE({packageName:t,customMessages:e}){let n=t;const r={...mE,...e};function i(s,o){if(!o)return`${n}: ${s}`;let a=s;const l=s.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const u of l){const c=(o[u[1]]||"").toString();a=a.replace(`{{${u[1]}}}`,c)}return`${n}: ${a}`}return{setPackageName({packageName:s}){return typeof s=="string"&&(n=s),this},setMessages({customMessages:s}){return Object.assign(r,s||{}),this},throwInvalidPublishableKeyError(s){throw new Error(i(r.InvalidPublishableKeyErrorMessage,s))},throwInvalidFrontendApiError(s){throw new Error(i(r.InvalidFrontendApiErrorMessage,s))},throwInvalidProxyUrl(s){throw new Error(i(r.InvalidProxyUrlErrorMessage,s))},throwMissingPublishableKeyError(){throw new Error(i(r.MissingPublishableKeyErrorMessage))}}}const yE="Clerk: You must wrap your application in a <ClerkProvider> component.",vE="Clerk: You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",xE=t=>`Clerk: You've passed multiple children components to <${t}/>. You can only pass a single child component or text.`,Ol="Clerk: Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",SE="Clerk: <UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",EE="Clerk: <UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",TE="Clerk: <OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",wE="Clerk: <OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",CE=t=>`Clerk: <${t} /> can only accept <${t}.Page /> and <${t}.Link /> as its children. Any other provided component will be ignored.`,RE=t=>`Clerk: Missing props. <${t}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,AE=t=>`Clerk: Missing props. <${t}.Link /> component requires the following props: url, label and labelIcon.`,kE=t=>e=>{try{return Y.Children.only(t)}catch{throw new Error(xE(e))}},LE=(t,e)=>(t||(t=e),typeof t=="string"&&(t=Y.createElement("button",null,t)),t),bE=t=>(...e)=>{if(t&&typeof t=="function")return t(...e)},ns=gE({packageName:"@clerk/react"});function _E(t){ns.setMessages(t).setPackageName(t)}function IE(t){return typeof t=="function"}var PE="loadScript cannot be called when document does not exist",DE="loadScript cannot be called without a src";async function OE(t="",e){const{async:n,defer:r,beforeLoad:i,crossOrigin:s}=e||{};return new Promise((o,a)=>{t||a(DE),(!document||!document.body)&&a(PE);const l=document.createElement("script");s&&l.setAttribute("crossorigin",s),l.async=n||!1,l.defer=r||!1,l.addEventListener("load",()=>{l.remove(),o(l)}),l.addEventListener("error",()=>{l.remove(),a()}),l.src=t,i==null||i(l),document.body.appendChild(l)})}function NE(t){return t?FE(t)||dg(t):!0}function FE(t){return/^http(s)?:\/\//.test(t||"")}function dg(t){return t.startsWith("/")}function ME(t){return t?dg(t)?new URL(t,window.location.origin).toString():t:""}function UE(t){if(!t)return"";let e;if(t.match(/^(clerk\.)+\w*$/))e=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;e=/^(clerk\.)*/gi}return`clerk.${t.replace(e,"")}`}const{isDevOrStagingUrl:BE}=sE(),$E=t=>{if(t)return t;const e=jE("4.30.7");return e?e==="snapshot"?"4.70.3":e:zE("4.30.7")},jE=t=>{var e;return(e=t.match(/-(.*)\./))==null?void 0:e[1]},zE=t=>t.split(".")[0],GE="Clerk: Failed to load Clerk",HE=t=>{const{frontendApi:e,publishableKey:n}=t;return!n&&!e&&ns.throwMissingPublishableKeyError(),OE(VE(t),{async:!0,crossOrigin:"anonymous",beforeLoad:WE(t)}).catch(()=>{throw new Error(GE)})},VE=t=>{var f,d;const{clerkJSUrl:e,clerkJSVariant:n,clerkJSVersion:r,proxyUrl:i,domain:s,publishableKey:o,frontendApi:a}=t;if(e)return e;let l="";i&&NE(i)?l=ME(i).replace(/http(s)?:\/\//,""):s&&!BE(((f=gh(o))==null?void 0:f.frontendApi)||a||"")?l=UE(s):l=((d=gh(o))==null?void 0:d.frontendApi)||a||"";const u=n?`${n.replace(/\.+$/,"")}.`:"",c=$E(r);return`https://${l}/npm/@clerk/clerk-js@${c}/dist/clerk.${u}browser.js`},WE=t=>e=>{const{publishableKey:n,frontendApi:r,proxyUrl:i,domain:s}=t;n?e.setAttribute("data-clerk-publishable-key",n):r&&e.setAttribute("data-clerk-frontend-api",r),i&&e.setAttribute("data-clerk-proxy-url",i),s&&e.setAttribute("data-clerk-domain",s)},oo=new Map;function KE(t,e,n=1){Y.useEffect(()=>{const r=oo.get(t)||0;if(r==n)throw new Error(e);return oo.set(t,r+1),()=>{oo.set(t,(oo.get(t)||1)-1)}},[])}function YE(t,e,n){const r=t.displayName||t.name||e||"Component",i=s=>(KE(e,n),Y.createElement(t,{...s}));return i.displayName=`withMaxAllowedInstancesGuard(${r})`,i}const Nl=t=>{const e=Array(t.length).fill(null),[n,r]=$.useState(e);return t.map((i,s)=>({id:i.id,mount:o=>r(a=>a.map((l,u)=>u===s?o:l)),unmount:()=>r(o=>o.map((a,l)=>l===s?null:a)),portal:()=>Y.createElement(Y.Fragment,null,n[s]?_f.createPortal(i.component,n[s]):null)}))};function Fl(t,e,n){if(typeof t=="function")return t(e);if(typeof t<"u")return t;if(typeof n<"u")return n}function xh(){return typeof window<"u"}var Sr=t=>{fE()&&console.error(t)},hg={exports:{}},pg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yi=$;function qE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XE=typeof Object.is=="function"?Object.is:qE,QE=yi.useState,JE=yi.useEffect,ZE=yi.useLayoutEffect,eT=yi.useDebugValue;function tT(t,e){var n=e(),r=QE({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return ZE(function(){i.value=n,i.getSnapshot=e,Ml(i)&&s({inst:i})},[t,n,e]),JE(function(){return Ml(i)&&s({inst:i}),t(function(){Ml(i)&&s({inst:i})})},[t]),eT(n),n}function Ml(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!XE(t,n)}catch{return!0}}function nT(t,e){return e()}var rT=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nT:tT;pg.useSyncExternalStore=yi.useSyncExternalStore!==void 0?yi.useSyncExternalStore:rT;hg.exports=pg;var mg=hg.exports;const Gn=()=>{},nt=Gn(),Po=Object,ae=t=>t===nt,Wt=t=>typeof t=="function",bn=(t,e)=>({...t,...e}),iT=t=>Wt(t.then),ao=new WeakMap;let sT=0;const Cs=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let i,s;if(Po(t)===t&&!r&&n!=RegExp){if(i=ao.get(t),i)return i;if(i=++sT+"~",ao.set(t,i),n==Array){for(i="@",s=0;s<t.length;s++)i+=Cs(t[s])+",";ao.set(t,i)}if(n==Po){i="#";const o=Po.keys(t).sort();for(;!ae(s=o.pop());)ae(t[s])||(i+=s+":"+Cs(t[s])+",");ao.set(t,i)}}else i=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},on=new WeakMap,Ul={},lo={},If="undefined",Ka=typeof window!=If,sc=typeof document!=If,oT=()=>Ka&&typeof window.requestAnimationFrame!=If,Mn=(t,e)=>{const n=on.get(t);return[()=>!ae(e)&&t.get(e)||Ul,r=>{if(!ae(e)){const i=t.get(e);e in lo||(lo[e]=i),n[5](e,bn(i,r),i||Ul)}},n[6],()=>!ae(e)&&e in lo?lo[e]:!ae(e)&&t.get(e)||Ul]};let oc=!0;const aT=()=>oc,[ac,lc]=Ka&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Gn,Gn],lT=()=>{const t=sc&&document.visibilityState;return ae(t)||t!=="hidden"},uT=t=>(sc&&document.addEventListener("visibilitychange",t),ac("focus",t),()=>{sc&&document.removeEventListener("visibilitychange",t),lc("focus",t)}),cT=t=>{const e=()=>{oc=!0,t()},n=()=>{oc=!1};return ac("online",e),ac("offline",n),()=>{lc("online",e),lc("offline",n)}},fT={isOnline:aT,isVisible:lT},dT={initFocus:uT,initReconnect:cT},Sh=!Y.useId,Rs=!Ka||"Deno"in window,hT=t=>oT()?window.requestAnimationFrame(t):setTimeout(t,1),rs=Rs?$.useEffect:$.useLayoutEffect,Bl=typeof navigator<"u"&&navigator.connection,Eh=!Rs&&Bl&&(["slow-2g","2g"].includes(Bl.effectiveType)||Bl.saveData),nr=t=>{if(Wt(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Cs(t):"",[t,e]};let pT=0;const uc=()=>++pT,gg=0,yg=1,vg=2,mT=3;var Bi={__proto__:null,ERROR_REVALIDATE_EVENT:mT,FOCUS_EVENT:gg,MUTATE_EVENT:vg,RECONNECT_EVENT:yg};async function xg(...t){const[e,n,r,i]=t,s=bn({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let o=s.populateCache;const a=s.rollbackOnError;let l=s.optimisticData;const u=s.revalidate!==!1,c=h=>typeof a=="function"?a(h):a!==!1,f=s.throwOnError;if(Wt(n)){const h=n,p=[],m=e.keys();for(const y of m)!/^\$(inf|sub)\$/.test(y)&&h(e.get(y)._k)&&p.push(y);return Promise.all(p.map(d))}return d(n);async function d(h){const[p]=nr(h);if(!p)return;const[m,y]=Mn(e,p),[g,v,x,T]=on.get(e),E=g[p],k=()=>u&&(delete x[p],delete T[p],E&&E[0])?E[0](vg).then(()=>m().data):m().data;if(t.length<3)return k();let w=r,A;const F=uc();v[p]=[F,0];const I=!ae(l),H=m(),U=H.data,z=H._c,O=ae(z)?U:z;if(I&&(l=Wt(l)?l(O,U):l,y({data:l,_c:O})),Wt(w))try{w=w(O)}catch(W){A=W}if(w&&iT(w))if(w=await w.catch(W=>{A=W}),F!==v[p][0]){if(A)throw A;return w}else A&&I&&c(A)&&(o=!0,w=O,y({data:w,_c:nt}));o&&(A||(Wt(o)&&(w=o(w,O)),y({data:w,error:nt,_c:nt}))),v[p][1]=uc();const D=await k();if(y({_c:nt}),A){if(f)throw A;return}return o?D:w}}const Th=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Sg=(t,e)=>{if(!on.has(t)){const n=bn(dT,e),r={},i=xg.bind(nt,t);let s=Gn;const o={},a=(c,f)=>{const d=o[c]||[];return o[c]=d,d.push(f),()=>d.splice(d.indexOf(f),1)},l=(c,f,d)=>{t.set(c,f);const h=o[c];if(h)for(const p of h)p(f,d)},u=()=>{if(!on.has(t)&&(on.set(t,[r,{},{},{},i,l,a]),!Rs)){const c=n.initFocus(setTimeout.bind(nt,Th.bind(nt,r,gg))),f=n.initReconnect(setTimeout.bind(nt,Th.bind(nt,r,yg)));s=()=>{c&&c(),f&&f(),on.delete(t)}}};return u(),[t,i,u,s]}return[t,on.get(t)[4]]},gT=(t,e,n,r,i)=>{const s=n.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!ae(s)&&o>s||setTimeout(r,a,i)},yT=(t,e)=>Cs(t)==Cs(e),[Ya,Eg]=Sg(new Map),Tg=bn({onLoadingSlow:Gn,onSuccess:Gn,onError:Gn,onErrorRetry:gT,onDiscarded:Gn,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Eh?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Eh?5e3:3e3,compare:yT,isPaused:()=>!1,cache:Ya,mutate:Eg,fallback:{}},fT),wg=(t,e)=>{const n=bn(t,e);if(e){const{use:r,fallback:i}=t,{use:s,fallback:o}=e;r&&s&&(n.use=r.concat(s)),i&&o&&(n.fallback=bn(i,o))}return n},cc=$.createContext({}),vT=t=>{const{value:e}=t,n=$.useContext(cc),r=Wt(e),i=$.useMemo(()=>r?e(n):e,[r,n,e]),s=$.useMemo(()=>r?i:wg(n,i),[r,n,i]),o=i&&i.provider,a=$.useRef(nt);o&&!a.current&&(a.current=Sg(o(s.cache||Ya),i));const l=a.current;return l&&(s.cache=l[0],s.mutate=l[1]),rs(()=>{if(l)return l[2]&&l[2](),l[3]},[]),$.createElement(cc.Provider,bn(t,{value:s}))},Cg=Ka&&window.__SWR_DEVTOOLS_USE__,xT=Cg?window.__SWR_DEVTOOLS_USE__:[],ST=()=>{Cg&&(window.__SWR_DEVTOOLS_REACT__=Y)},Rg=t=>Wt(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Ag=()=>bn(Tg,$.useContext(cc)),ET=(t,e)=>{const[n,r]=nr(t),[,,,i]=on.get(Ya);if(i[n])return i[n];const s=e(r);return i[n]=s,s},TT=t=>(e,n,r)=>t(e,n&&((...s)=>{const[o]=nr(e),[,,,a]=on.get(Ya),l=a[o];return ae(l)?n(...s):(delete a[o],l)}),r),wT=xT.concat(TT),CT=t=>function(...n){const r=Ag(),[i,s,o]=Rg(n),a=wg(r,o);let l=t;const{use:u}=a,c=(u||[]).concat(wT);for(let f=c.length;f--;)l=c[f](l);return l(i,s||a.fetcher||null,a)},RT=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}},AT=(t,e)=>(...n)=>{const[r,i,s]=Rg(n),o=(s.use||[]).concat(e);return t(r,i,{...s,use:o})};ST();const kT=t=>nr(t)[0],wh=Y.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),$l={dedupe:!0},LT=(t,e,n)=>{const{cache:r,compare:i,suspense:s,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:u,refreshWhenHidden:c,refreshWhenOffline:f,keepPreviousData:d}=n,[h,p,m,y]=on.get(r),[g,v]=nr(t),x=$.useRef(!1),T=$.useRef(!1),E=$.useRef(g),k=$.useRef(e),w=$.useRef(n),A=()=>w.current,F=()=>A().isVisible()&&A().isOnline(),[I,H,U,z]=Mn(r,g),O=$.useRef({}).current,D=ae(o)?n.fallback[g]:o,W=(de,he)=>{for(const xe in O){const se=xe;if(se==="data"){if(!i(de[se],he[se])&&(!ae(de[se])||!i(te,he[se])))return!1}else if(he[se]!==de[se])return!1}return!0},L=$.useMemo(()=>{const de=!g||!e?!1:ae(a)?A().isPaused()||s?!1:ae(l)?!0:l:a,he=Pe=>{const gt=bn(Pe);return delete gt._k,de?{isValidating:!0,isLoading:!0,...gt}:gt},xe=I(),se=z(),Re=he(xe),Ie=xe===se?Re:he(se);let le=Re;return[()=>{const Pe=he(I());return W(Pe,le)?(le.data=Pe.data,le.isLoading=Pe.isLoading,le.isValidating=Pe.isValidating,le.error=Pe.error,le):(le=Pe,Pe)},()=>Ie]},[r,g]),b=mg.useSyncExternalStore($.useCallback(de=>U(g,(he,xe)=>{W(xe,he)||de()}),[r,g]),L[0],L[1]),R=!x.current,C=h[g]&&h[g].length>0,j=b.data,N=ae(j)?D:j,K=b.error,X=$.useRef(N),te=d?ae(j)?X.current:j:N,re=C&&!ae(K)?!1:R&&!ae(a)?a:A().isPaused()?!1:s?ae(N)?!1:l:ae(N)||l,me=!!(g&&e&&R&&re),at=ae(b.isValidating)?me:b.isValidating,Nt=ae(b.isLoading)?me:b.isLoading,mt=$.useCallback(async de=>{const he=k.current;if(!g||!he||T.current||A().isPaused())return!1;let xe,se,Re=!0;const Ie=de||{},le=!m[g]||!Ie.dedupe,Pe=()=>Sh?!T.current&&g===E.current&&x.current:g===E.current,gt={isValidating:!1,isLoading:!1},Ft=()=>{H(gt)},Mt=()=>{const lt=m[g];lt&&lt[1]===se&&delete m[g]},ar={isValidating:!0};ae(I().data)&&(ar.isLoading=!0);try{if(le&&(H(ar),n.loadingTimeout&&ae(I().data)&&setTimeout(()=>{Re&&Pe()&&A().onLoadingSlow(g,n)},n.loadingTimeout),m[g]=[he(v),uc()]),[xe,se]=m[g],xe=await xe,le&&setTimeout(Mt,n.dedupingInterval),!m[g]||m[g][1]!==se)return le&&Pe()&&A().onDiscarded(g),!1;gt.error=nt;const lt=p[g];if(!ae(lt)&&(se<=lt[0]||se<=lt[1]||lt[1]===0))return Ft(),le&&Pe()&&A().onDiscarded(g),!1;const pn=I().data;gt.data=i(pn,xe)?pn:xe,le&&Pe()&&A().onSuccess(xe,g,n)}catch(lt){Mt();const pn=A(),{shouldRetryOnError:ol}=pn;pn.isPaused()||(gt.error=lt,le&&Pe()&&(pn.onError(lt,g,pn),(ol===!0||Wt(ol)&&ol(lt))&&F()&&pn.onErrorRetry(lt,g,pn,bv=>{const al=h[g];al&&al[0]&&al[0](Bi.ERROR_REVALIDATE_EVENT,bv)},{retryCount:(Ie.retryCount||0)+1,dedupe:!0})))}return Re=!1,Ft(),!0},[g,r]),et=$.useCallback((...de)=>xg(r,E.current,...de),[]);if(rs(()=>{k.current=e,w.current=n,ae(j)||(X.current=j)}),rs(()=>{if(!g)return;const de=mt.bind(nt,$l);let he=0;const se=RT(g,h,(Re,Ie={})=>{if(Re==Bi.FOCUS_EVENT){const le=Date.now();A().revalidateOnFocus&&le>he&&F()&&(he=le+A().focusThrottleInterval,de())}else if(Re==Bi.RECONNECT_EVENT)A().revalidateOnReconnect&&F()&&de();else{if(Re==Bi.MUTATE_EVENT)return mt();if(Re==Bi.ERROR_REVALIDATE_EVENT)return mt(Ie)}});return T.current=!1,E.current=g,x.current=!0,H({_k:v}),re&&(ae(N)||Rs?de():hT(de)),()=>{T.current=!0,se()}},[g]),rs(()=>{let de;function he(){const se=Wt(u)?u(I().data):u;se&&de!==-1&&(de=setTimeout(xe,se))}function xe(){!I().error&&(c||A().isVisible())&&(f||A().isOnline())?mt($l).then(he):he()}return he(),()=>{de&&(clearTimeout(de),de=-1)}},[u,c,f,g]),$.useDebugValue(te),s&&ae(N)&&g){if(!Sh&&Rs)throw new Error("Fallback data is required when using suspense in SSR.");k.current=e,w.current=n,T.current=!1;const de=y[g];if(!ae(de)){const he=et(de);wh(he)}if(ae(K)){const he=mt($l);ae(te)||(he.status="fulfilled",he.value=!0),wh(he)}else throw K}return{mutate:et,get data(){return O.data=!0,te},get error(){return O.error=!0,K},get isValidating(){return O.isValidating=!0,at},get isLoading(){return O.isLoading=!0,Nt}}},Pf=Po.defineProperty(vT,"defaultValue",{value:Tg}),Df=CT(LT),bT=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Pf,default:Df,mutate:Eg,preload:ET,unstable_serialize:kT,useSWRConfig:Ag},Symbol.toStringTag,{value:"Module"})),_T="$inf$",IT=t=>nr(t?t(0,null):null)[0],jl=Promise.resolve(),PT=t=>(e,n,r)=>{const i=$.useRef(!1),{cache:s,initialSize:o=1,revalidateAll:a=!1,persistSize:l=!1,revalidateFirstPage:u=!0,revalidateOnMount:c=!1,parallel:f=!1}=r;let d;try{d=IT(e),d&&(d=_T+d)}catch{}const[h,p,m]=Mn(s,d),y=$.useCallback(()=>ae(h()._l)?o:h()._l,[s,d,o]);mg.useSyncExternalStore($.useCallback(w=>d?m(d,()=>{w()}):()=>{},[s,d]),y,y);const g=$.useCallback(()=>{const w=h()._l;return ae(w)?o:w},[d,o]),v=$.useRef(g());rs(()=>{if(!i.current){i.current=!0;return}d&&p({_l:l?v.current:g()})},[d,s]);const x=c&&!i.current,T=t(d,async w=>{const A=h()._i,F=[],I=g(),[H]=Mn(s,w),U=H().data,z=[];let O=null;for(let D=0;D<I;++D){const[W,L]=nr(e(D,f?null:O));if(!W)break;const[b,R]=Mn(s,W);let C=b().data;const j=a||A||ae(C)||u&&!D&&!ae(U)||x||U&&!ae(U[D])&&!r.compare(U[D],C);if(n&&j){const N=async()=>{C=await n(L),R({data:C,_k:L}),F[D]=C};f?z.push(N):await N()}else F[D]=C;f||(O=C)}return f&&await Promise.all(z.map(D=>D())),p({_i:nt}),F},r),E=$.useCallback(function(w,A){const F=typeof A=="boolean"?{revalidate:A}:A||{},I=F.revalidate!==!1;return d?(I&&(ae(w)?p({_i:!0}):p({_i:!1})),arguments.length?T.mutate(w,{...F,revalidate:I}):T.mutate()):jl},[d,s]),k=$.useCallback(w=>{if(!d)return jl;const[,A]=Mn(s,d);let F;if(Wt(w)?F=w(g()):typeof w=="number"&&(F=w),typeof F!="number")return jl;A({_l:F}),v.current=F;const I=[],[H]=Mn(s,d);let U=null;for(let z=0;z<F;++z){const[O]=nr(e(z,U)),[D]=Mn(s,O),W=O?D().data:nt;if(ae(W))return E(H().data);I.push(W),U=W}return E(I)},[d,s,E,g]);return{size:g(),setSize:k,mutate:E,get data(){return T.data},get error(){return T.error},get isValidating(){return T.isValidating},get isLoading(){return T.isLoading}}},DT=AT(Df,PT);function OT(t,e){if(!t)throw typeof e=="string"?new Error(e):new Error(`${e.displayName} not found`)}var Ai=(t,e)=>{const{assertCtxFn:n=OT}=e||{},r=Y.createContext(void 0);return r.displayName=t,[r,()=>{const o=Y.useContext(r);return n(o,`${t} not found`),o.value},()=>{const o=Y.useContext(r);return o?o.value:{}}]},kg={};uE(kg,{SWRConfig:()=>Pf,useSWR:()=>Df,useSWRInfinite:()=>DT});cE(kg,bT);var[NT,FT]=Ai("ClerkInstanceContext"),[MT,Bb]=Ai("UserContext"),[UT,$b]=Ai("ClientContext"),[BT,jb]=Ai("SessionContext"),[$T,zb]=Ai("OrganizationContext"),jT=({children:t,organization:e,lastOrganizationMember:n,lastOrganizationInvitation:r,swrConfig:i})=>Y.createElement(Pf,{value:i},Y.createElement($T.Provider,{value:{value:{organization:e,lastOrganizationMember:n,lastOrganizationInvitation:r}}},t));typeof window<"u"?Y.useLayoutEffect:Y.useEffect;const[zT,GT]=[NT,FT];function HT(t){if(!t)throw new Error(yE)}const Lg=Object.freeze({noGuarantees:Object.freeze({guaranteedLoaded:!1}),guaranteedLoaded:Object.freeze({guaranteedLoaded:!0})}),qa=Y.createContext(void 0);qa.displayName="StructureContext";const VT=()=>{const t=Y.useContext(qa);return HT(t),t},WT=({children:t})=>VT().guaranteedLoaded?Y.createElement(Y.Fragment,null,t):Y.createElement(qa.Provider,{value:Lg.guaranteedLoaded},t),ot=(t,e)=>{e=e||t.displayName||t.name||"Component",t.displayName=e;const n=r=>{const i=GT();return i.loaded?Y.createElement(WT,null,Y.createElement(t,{...r,clerk:i})):null};return n.displayName=`withClerk(${e})`,n};class or extends Y.PureComponent{constructor(){super(...arguments),this.portalRef=Y.createRef()}componentDidUpdate(e){var n,r,i,s;(e.props.appearance!==this.props.props.appearance||((r=(n=e.props)==null?void 0:n.customPages)==null?void 0:r.length)!==((s=(i=this.props.props)==null?void 0:i.customPages)==null?void 0:s.length))&&this.props.updateProps({node:this.portalRef.current,props:this.props.props})}componentDidMount(){this.portalRef.current&&this.props.mount(this.portalRef.current,this.props.props)}componentWillUnmount(){this.portalRef.current&&this.props.unmount(this.portalRef.current)}render(){var e,n;return Y.createElement(Y.Fragment,null,Y.createElement("div",{ref:this.portalRef}),(n=(e=this.props)==null?void 0:e.customPagesPortals)==null?void 0:n.map((r,i)=>$.createElement(r,{key:i})))}}ot(({clerk:t,...e})=>Y.createElement(or,{mount:t.mountSignIn,unmount:t.unmountSignIn,updateProps:t.__unstable__updateProps,props:e}),"SignIn");ot(({clerk:t,...e})=>Y.createElement(or,{mount:t.mountSignUp,unmount:t.unmountSignUp,updateProps:t.__unstable__updateProps,props:e}),"SignUp");function Of({children:t}){return Sr(SE),Y.createElement(Y.Fragment,null,t)}function Nf({children:t}){return Sr(EE),Y.createElement(Y.Fragment,null,t)}const KT=ot(({clerk:t,...e})=>{const{customPages:n,customPagesPortals:r}=bg(e.children);return Y.createElement(or,{mount:t.mountUserProfile,unmount:t.unmountUserProfile,updateProps:t.__unstable__updateProps,props:{...e,customPages:n},customPagesPortals:r})},"UserProfile");Object.assign(KT,{Page:Of,Link:Nf});const YT=ot(({clerk:t,...e})=>{const{customPages:n,customPagesPortals:r}=bg(e.children),i=Object.assign(e.userProfileProps||{},{customPages:n});return Y.createElement(or,{mount:t.mountUserButton,unmount:t.unmountUserButton,updateProps:t.__unstable__updateProps,props:{...e,userProfileProps:i},customPagesPortals:r})},"UserButton"),qT=Object.assign(YT,{UserProfilePage:Of,UserProfileLink:Nf});function Ff({children:t}){return Sr(TE),Y.createElement(Y.Fragment,null,t)}function Mf({children:t}){return Sr(wE),Y.createElement(Y.Fragment,null,t)}const XT=ot(({clerk:t,...e})=>{const{customPages:n,customPagesPortals:r}=_g(e.children);return Y.createElement(or,{mount:t.mountOrganizationProfile,unmount:t.unmountOrganizationProfile,updateProps:t.__unstable__updateProps,props:{...e,customPages:n},customPagesPortals:r})},"OrganizationProfile");Object.assign(XT,{Page:Ff,Link:Mf});ot(({clerk:t,...e})=>Y.createElement(or,{mount:t.mountCreateOrganization,unmount:t.unmountCreateOrganization,updateProps:t.__unstable__updateProps,props:e}),"CreateOrganization");const QT=ot(({clerk:t,...e})=>{const{customPages:n,customPagesPortals:r}=_g(e.children),i=Object.assign(e.organizationProfileProps||{},{customPages:n});return Y.createElement(or,{mount:t.mountOrganizationSwitcher,unmount:t.unmountOrganizationSwitcher,updateProps:t.__unstable__updateProps,props:{...e,organizationProfileProps:i},customPagesPortals:r})},"OrganizationSwitcher");Object.assign(QT,{OrganizationProfilePage:Ff,OrganizationProfileLink:Mf});ot(({clerk:t,...e})=>Y.createElement(or,{mount:t.mountOrganizationList,unmount:t.unmountOrganizationList,updateProps:t.__unstable__updateProps,props:e}),"OrganizationList");const uo=(t,e)=>!!t&&Y.isValidElement(t)&&(t==null?void 0:t.type)===e,bg=t=>Ig({children:t,reorderItemsLabels:["account","security"],LinkComponent:Nf,PageComponent:Of,componentName:"UserProfile"}),_g=t=>Ig({children:t,reorderItemsLabels:["members","settings"],LinkComponent:Mf,PageComponent:Ff,componentName:"OrganizationProfile"}),Ig=({children:t,LinkComponent:e,PageComponent:n,reorderItemsLabels:r,componentName:i})=>{const s=[];Y.Children.forEach(t,p=>{if(!uo(p,n)&&!uo(p,e)){p&&Sr(CE(i));return}const{props:m}=p,{children:y,label:g,url:v,labelIcon:x}=m;if(uo(p,n))if(Ch(m,r))s.push({label:g});else if(zl(m))s.push({label:g,labelIcon:x,children:y,url:v});else{Sr(RE(i));return}if(uo(p,e))if(Gl(m))s.push({label:g,labelIcon:x,url:v});else{Sr(AE(i));return}});const o=[],a=[],l=[];s.forEach((p,m)=>{if(zl(p)){o.push({component:p.children,id:m}),a.push({component:p.labelIcon,id:m});return}Gl(p)&&l.push({component:p.labelIcon,id:m})});const u=Nl(o),c=Nl(a),f=Nl(l),d=[],h=[];return s.forEach((p,m)=>{if(Ch(p,r)){d.push({label:p.label});return}if(zl(p)){const{portal:y,mount:g,unmount:v}=u.find(k=>k.id===m),{portal:x,mount:T,unmount:E}=c.find(k=>k.id===m);d.push({label:p.label,url:p.url,mount:g,unmount:v,mountIcon:T,unmountIcon:E}),h.push(y),h.push(x);return}if(Gl(p)){const{portal:y,mount:g,unmount:v}=f.find(x=>x.id===m);d.push({label:p.label,url:p.url,mountIcon:g,unmountIcon:v}),h.push(y);return}}),{customPages:d,customPagesPortals:h}},Ch=(t,e)=>{const{children:n,label:r,url:i,labelIcon:s}=t;return!n&&!i&&!s&&e.some(o=>o===r)},zl=t=>{const{children:e,label:n,url:r,labelIcon:i}=t;return!!e&&!!r&&!!i&&!!n},Gl=t=>{const{children:e,label:n,url:r,labelIcon:i}=t;return!e&&!!r&&!!i&&!!n};var Z,jr,zr,Do,Oo,hr;const Pg=class Dg{constructor(e){this.clerkjs=null,this.preopenSignIn=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.loadedListeners=[],$r(this,Z,!1),$r(this,jr,void 0),$r(this,zr,void 0),$r(this,Do,void 0),$r(this,Oo,void 0),this.isReady=()=>{var s;return!!((s=this.clerkjs)!=null&&s.isReady())},this.buildSignInUrl=s=>{const o=()=>{var a;return((a=this.clerkjs)==null?void 0:a.buildSignInUrl(s))||""};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("buildSignInUrl",o)},this.buildSignUpUrl=s=>{const o=()=>{var a;return((a=this.clerkjs)==null?void 0:a.buildSignUpUrl(s))||""};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("buildSignUpUrl",o)},this.buildUserProfileUrl=()=>{const s=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildUserProfileUrl())||""};if(this.clerkjs&&J(this,Z))return s();this.premountMethodCalls.set("buildUserProfileUrl",s)},this.buildCreateOrganizationUrl=()=>{const s=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildCreateOrganizationUrl())||""};if(this.clerkjs&&J(this,Z))return s();this.premountMethodCalls.set("buildCreateOrganizationUrl",s)},this.buildOrganizationProfileUrl=()=>{const s=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildOrganizationProfileUrl())||""};if(this.clerkjs&&J(this,Z))return s();this.premountMethodCalls.set("buildOrganizationProfileUrl",s)},this.buildHomeUrl=()=>{const s=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildHomeUrl())||""};if(this.clerkjs&&J(this,Z))return s();this.premountMethodCalls.set("buildHomeUrl",s)},this.buildUrlWithAuth=s=>{const o=()=>{var a;return((a=this.clerkjs)==null?void 0:a.buildUrlWithAuth(s))||""};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("buildUrlWithAuth",o)},this.handleUnauthenticated=()=>{const s=()=>{var o;return(o=this.clerkjs)==null?void 0:o.handleUnauthenticated()};this.clerkjs&&J(this,Z)?s():this.premountMethodCalls.set("handleUnauthenticated",s)},this.addOnLoaded=s=>{this.loadedListeners.push(s),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(s=>s()),this.loadedListeners=[]},this.hydrateClerkJS=s=>{if(!s)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=s,this.premountMethodCalls.forEach(o=>o()),this.preopenSignIn!==null&&s.openSignIn(this.preopenSignIn),this.preopenSignUp!==null&&s.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&s.openUserProfile(this.preopenUserProfile),this.preopenOrganizationProfile!==null&&s.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&s.openCreateOrganization(this.preopenCreateOrganization),this.premountSignInNodes.forEach((o,a)=>{s.mountSignIn(a,o)}),this.premountSignUpNodes.forEach((o,a)=>{s.mountSignUp(a,o)}),this.premountUserProfileNodes.forEach((o,a)=>{s.mountUserProfile(a,o)}),this.premountUserButtonNodes.forEach((o,a)=>{s.mountUserButton(a,o)}),this.premountOrganizationListNodes.forEach((o,a)=>{s.mountOrganizationList(a,o)}),lr(this,Z,!0),this.emitLoaded(),this.clerkjs},this.__unstable__updateProps=s=>{if(this.clerkjs&&"__unstable__updateProps"in this.clerkjs)this.clerkjs.__unstable__updateProps(s);else return},this.setActive=({session:s,organization:o,beforeEmit:a})=>this.clerkjs?this.clerkjs.setActive({session:s,organization:o,beforeEmit:a}):Promise.reject(),this.setSession=(s,o)=>(ma("setSession","Use `Clerk.setActive` instead"),this.setActive({session:s,beforeEmit:o})),this.openSignIn=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.openSignIn(s):this.preopenSignIn=s},this.closeSignIn=()=>{this.clerkjs&&J(this,Z)?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.openUserProfile=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.openUserProfile(s):this.preopenUserProfile=s},this.closeUserProfile=()=>{this.clerkjs&&J(this,Z)?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.openOrganizationProfile(s):this.preopenOrganizationProfile=s},this.closeOrganizationProfile=()=>{this.clerkjs&&J(this,Z)?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.openCreateOrganization(s):this.preopenCreateOrganization=s},this.closeCreateOrganization=()=>{this.clerkjs&&J(this,Z)?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openSignUp=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.openSignUp(s):this.preopenSignUp=s},this.closeSignUp=()=>{this.clerkjs&&J(this,Z)?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountSignIn(s,o):this.premountSignInNodes.set(s,o)},this.unmountSignIn=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountSignIn(s):this.premountSignInNodes.delete(s)},this.mountSignUp=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountSignUp(s,o):this.premountSignUpNodes.set(s,o)},this.unmountSignUp=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountSignUp(s):this.premountSignUpNodes.delete(s)},this.mountUserProfile=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountUserProfile(s,o):this.premountUserProfileNodes.set(s,o)},this.unmountUserProfile=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountUserProfile(s):this.premountUserProfileNodes.delete(s)},this.mountOrganizationProfile=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountOrganizationProfile(s,o):this.premountOrganizationProfileNodes.set(s,o)},this.unmountOrganizationProfile=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountOrganizationProfile(s):this.premountOrganizationProfileNodes.delete(s)},this.mountCreateOrganization=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountCreateOrganization(s,o):this.premountCreateOrganizationNodes.set(s,o)},this.unmountCreateOrganization=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountCreateOrganization(s):this.premountCreateOrganizationNodes.delete(s)},this.mountOrganizationSwitcher=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountOrganizationSwitcher(s,o):this.premountOrganizationSwitcherNodes.set(s,o)},this.unmountOrganizationSwitcher=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountOrganizationSwitcher(s):this.premountOrganizationSwitcherNodes.delete(s)},this.mountOrganizationList=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountOrganizationList(s,o):this.premountOrganizationListNodes.set(s,o)},this.unmountOrganizationList=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountOrganizationList(s):this.premountOrganizationListNodes.delete(s)},this.mountUserButton=(s,o)=>{this.clerkjs&&J(this,Z)?this.clerkjs.mountUserButton(s,o):this.premountUserButtonNodes.set(s,o)},this.unmountUserButton=s=>{this.clerkjs&&J(this,Z)?this.clerkjs.unmountUserButton(s):this.premountUserButtonNodes.delete(s)},this.addListener=s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.addListener(s)};return this.clerkjs?o():(this.premountMethodCalls.set("addListener",o),()=>this.premountMethodCalls.delete("addListener"))},this.navigate=s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.navigate(s)};this.clerkjs&&J(this,Z)?o():this.premountMethodCalls.set("navigate",o)},this.redirectWithAuth=(...s)=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.redirectWithAuth(...s)};this.clerkjs&&J(this,Z)?o():this.premountMethodCalls.set("redirectWithAuth",o)},this.redirectToSignIn=s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.redirectToSignIn(s)};this.clerkjs&&J(this,Z)?o():this.premountMethodCalls.set("redirectToSignIn",o)},this.redirectToSignUp=s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.redirectToSignUp(s)};this.clerkjs&&J(this,Z)?o():this.premountMethodCalls.set("redirectToSignUp",o)},this.redirectToUserProfile=()=>{const s=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToUserProfile()};this.clerkjs&&J(this,Z)?s():this.premountMethodCalls.set("redirectToUserProfile",s)},this.redirectToHome=()=>{const s=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToHome()};this.clerkjs&&J(this,Z)?s():this.premountMethodCalls.set("redirectToHome",s)},this.redirectToOrganizationProfile=()=>{const s=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToOrganizationProfile()};this.clerkjs&&J(this,Z)?s():this.premountMethodCalls.set("redirectToOrganizationProfile",s)},this.redirectToCreateOrganization=()=>{const s=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToCreateOrganization()};this.clerkjs&&J(this,Z)?s():this.premountMethodCalls.set("redirectToCreateOrganization",s)},this.handleRedirectCallback=s=>{var a;const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.handleRedirectCallback(s)};this.clerkjs&&J(this,Z)?(a=o())==null||a.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",o)},this.handleMagicLinkVerification=async s=>{ma("handleMagicLinkVerification","Use `handleEmailLinkVerification` instead.");const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.handleMagicLinkVerification(s)};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("handleMagicLinkVerification",o)},this.handleEmailLinkVerification=async s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.handleEmailLinkVerification(s)};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("handleEmailLinkVerification",o)},this.authenticateWithMetamask=async s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.authenticateWithMetamask(s)};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("authenticateWithMetamask",o)},this.createOrganization=async s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.createOrganization(s)};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("createOrganization",o)},this.getOrganizationMemberships=async()=>{const s=()=>{var o;return(o=this.clerkjs)==null?void 0:o.getOrganizationMemberships()};if(this.clerkjs&&J(this,Z))return s();this.premountMethodCalls.set("getOrganizationMemberships",s)},this.getOrganization=async s=>{const o=()=>{var a;return(a=this.clerkjs)==null?void 0:a.getOrganization(s)};if(this.clerkjs&&J(this,Z))return o();this.premountMethodCalls.set("getOrganization",o)},this.signOut=async(s,o)=>{const a=()=>{var l;return(l=this.clerkjs)==null?void 0:l.signOut(s,o)};if(this.clerkjs&&J(this,Z))return a();this.premountMethodCalls.set("signOut",a)};const{Clerk:n=null,frontendApi:r,publishableKey:i}=e||{};lr(this,Do,r),lr(this,Oo,i),lr(this,zr,e==null?void 0:e.proxyUrl),lr(this,jr,e==null?void 0:e.domain),this.options=e,this.Clerk=n,this.mode=xh()?"browser":"server",this.loadClerkJS()}get publishableKey(){return J(this,Oo)}get loaded(){return J(this,Z)}static getOrCreateInstance(e){return(!xh()||!J(this,hr)||e.Clerk&&J(this,hr).Clerk!==e.Clerk)&&lr(this,hr,new Dg(e)),J(this,hr)}static clearInstance(){lr(this,hr,null)}get domain(){if(typeof window<"u"&&window.location)return Fl(J(this,jr),new URL(window.location.href),"");if(typeof J(this,jr)=="function")throw new Error(Ol);return J(this,jr)||""}get proxyUrl(){if(typeof window<"u"&&window.location)return Fl(J(this,zr),new URL(window.location.href),"");if(typeof J(this,zr)=="function")throw new Error(Ol);return J(this,zr)||""}get sdkMetadata(){var e;return((e=this.clerkjs)==null?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return(e=this.clerkjs)==null?void 0:e.instanceType}get frontendApi(){var e;return((e=this.clerkjs)==null?void 0:e.frontendApi)||J(this,Do)||""}get isStandardBrowser(){var e;return((e=this.clerkjs)==null?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){if(typeof window<"u"&&window.location)return Fl(this.options.isSatellite,new URL(window.location.href),!1);if(typeof this.options.isSatellite=="function")throw new Error(Ol);return!1}async loadClerkJS(){var e,n;if(!(this.mode!=="browser"||J(this,Z))){typeof window<"u"&&(window.__clerk_frontend_api=this.frontendApi,window.__clerk_publishable_key=this.publishableKey,window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let r;IE(this.Clerk)?(r=new this.Clerk(this.publishableKey||this.frontendApi||"",{proxyUrl:this.proxyUrl,domain:this.domain}),await r.load(this.options)):(r=this.Clerk,r.isReady()||await r.load(this.options)),global.Clerk=r}else{if(global.Clerk||await HE({...this.options,frontendApi:this.frontendApi,publishableKey:this.publishableKey,proxyUrl:this.proxyUrl,domain:this.domain}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");await global.Clerk.load(this.options)}return global.Clerk.sdkMetadata=this.options.sdkMetadata??{name:"@clerk/clerk-react",version:"4.30.7"},(e=global.Clerk)!=null&&e.loaded||(n=global.Clerk)!=null&&n.isReady()?this.hydrateClerkJS(global.Clerk):void 0}catch(r){const i=r;console.error(i.stack||i.message||i);return}}}get version(){var e;return(e=this.clerkjs)==null?void 0:e.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}__unstable__setEnvironment(...e){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(e);else return}};Z=new WeakMap;jr=new WeakMap;zr=new WeakMap;Do=new WeakMap;Oo=new WeakMap;hr=new WeakMap;$r(Pg,hr,void 0);let Rh=Pg;const JT=(t,e,n)=>!t&&n?ZT(n):e1(e),ZT=t=>{const e=t.userId,n=t.user,r=t.sessionId,i=t.session,s=t.organization,o=t.orgId,a=t.orgRole,l=t.orgPermissions,u=t.orgSlug,c=t.actor;return{userId:e,user:n,sessionId:r,session:i,organization:s,orgId:o,orgRole:a,orgPermissions:l,orgSlug:u,actor:c,lastOrganizationInvitation:null,lastOrganizationMember:null}},e1=t=>{var p;const e=t.user?t.user.id:t.user,n=t.user,r=t.session?t.session.id:t.session,i=t.session,s=i==null?void 0:i.actor,o=t.organization,a=t.organization?t.organization.id:t.organization,l=o==null?void 0:o.slug,u=o&&((p=n==null?void 0:n.organizationMemberships)==null?void 0:p.find(m=>m.organization.id===a)),c=u&&u.permissions,f=u&&u.role,d=t.lastOrganizationInvitation,h=t.lastOrganizationMember;return{userId:e,user:n,sessionId:r,session:i,organization:o,orgId:a,orgRole:f,orgSlug:l,orgPermissions:c,actor:s,lastOrganizationInvitation:d,lastOrganizationMember:h}},[t1,Og]=Ai("AuthContext");function n1(t){const{isomorphicClerkOptions:e,initialState:n,children:r}=t,{isomorphicClerk:i,loaded:s}=r1(e);e.frontendApi&&ma("frontendApi","Use `publishableKey` instead.");const[o,a]=Y.useState({client:i.client,session:i.session,user:i.user,organization:i.organization,lastOrganizationInvitation:null,lastOrganizationMember:null});Y.useEffect(()=>i.addListener(H=>a({...H})),[]);const l=JT(s,o,n),u=Y.useMemo(()=>({value:i}),[s]),c=Y.useMemo(()=>({value:o.client}),[o.client]),{sessionId:f,session:d,userId:h,user:p,orgId:m,actor:y,lastOrganizationInvitation:g,lastOrganizationMember:v,organization:x,orgRole:T,orgSlug:E,orgPermissions:k}=l,w=Y.useMemo(()=>({value:{sessionId:f,userId:h,actor:y,orgId:m,orgRole:T,orgSlug:E,orgPermissions:k}}),[f,h,y,m,T,E]),A=Y.useMemo(()=>({value:p}),[h,p]),F=Y.useMemo(()=>({value:d}),[f,d]),I=Y.useMemo(()=>({value:{organization:x,lastOrganizationInvitation:g,lastOrganizationMember:v}}),[m,x,g,v]);return Y.createElement(zT.Provider,{value:u},Y.createElement(UT.Provider,{value:c},Y.createElement(BT.Provider,{value:F},Y.createElement(jT,{...I.value},Y.createElement(t1.Provider,{value:w},Y.createElement(MT.Provider,{value:A},r))))))}const r1=t=>{const[e,n]=Y.useState(!1),r=Y.useMemo(()=>Rh.getOrCreateInstance(t),[]);return Y.useEffect(()=>{r.__unstable__updateProps({appearance:t.appearance})},[t.appearance]),Y.useEffect(()=>{r.__unstable__updateProps({options:t})},[t.localization]),Y.useEffect(()=>{r.addOnLoaded(()=>n(!0))},[]),Y.useEffect(()=>()=>{Rh.clearInstance()},[]),{isomorphicClerk:r,loaded:e}};_E({packageName:"@clerk/clerk-react"});function i1(t){const{initialState:e,children:n,...r}=t,{frontendApi:i="",publishableKey:s="",Clerk:o}=r;return o||(!s&&!i?ns.throwMissingPublishableKeyError():s&&!cg(s)?ns.throwInvalidPublishableKeyError({key:s}):!s&&i&&!iE(i)&&ns.throwInvalidFrontendApiError({key:i})),Y.createElement(qa.Provider,{value:Lg.noGuarantees},Y.createElement(n1,{initialState:e,isomorphicClerkOptions:r},n))}const Ng=YE(i1,"ClerkProvider",vE);Ng.displayName="ClerkProvider";const s1=({children:t})=>{const{userId:e}=Og();return e?Y.createElement(Y.Fragment,null,t):null},o1=({children:t})=>{const{userId:e}=Og();return e===null?Y.createElement(Y.Fragment,null,t):null};ot(({clerk:t,...e})=>{const{client:n,session:r}=t,{__unstable__environment:i}=t,s=n.activeSessions&&n.activeSessions.length>0;return Y.useEffect(()=>{if(r===null&&s&&i){const{afterSignOutOneUrl:o}=i.displayConfig;t.navigate(o)}else t.redirectToSignIn(e)},[]),null},"RedirectToSignIn");ot(({clerk:t,...e})=>(Y.useEffect(()=>{t.redirectToSignUp(e)},[]),null),"RedirectToSignUp");ot(({clerk:t})=>(Y.useEffect(()=>{t.redirectToUserProfile()},[]),null),"RedirectToUserProfile");ot(({clerk:t})=>(Y.useEffect(()=>{t.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");ot(({clerk:t})=>(Y.useEffect(()=>{t.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");ot(({clerk:t,...e})=>(Y.useEffect(()=>{t.handleRedirectCallback(e)},[]),null),"AuthenticateWithRedirectCallback");const a1=ot(({clerk:t,children:e,...n})=>{const{afterSignInUrl:r,afterSignUpUrl:i,redirectUrl:s,mode:o,...a}=n;e=LE(e,"Sign in");const l=kE(e)("SignInButton"),u=()=>{const d={afterSignInUrl:r,afterSignUpUrl:i,redirectUrl:s};return o==="modal"?t.openSignIn(d):t.redirectToSignIn(d)},f={...a,onClick:async d=>(await bE(l.props.onClick)(d),u())};return Y.cloneElement(l,f)},"SignInButton");/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},As.apply(this,arguments)}var Hn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hn||(Hn={}));const Ah="popstate";function l1(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return fc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Mg(i)}return c1(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u1(){return Math.random().toString(36).substr(2,8)}function kh(t,e){return{usr:t.state,key:t.key,idx:e}}function fc(t,e,n,r){return n===void 0&&(n=null),As({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ki(e):e,{state:n,key:e&&e.key||r||u1()})}function Mg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function c1(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Hn.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(As({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Hn.Pop;let y=c(),g=y==null?null:y-u;u=y,l&&l({action:a,location:m.location,delta:g})}function d(y,g){a=Hn.Push;let v=fc(m.location,y,g);n&&n(v,y),u=c()+1;let x=kh(v,u),T=m.createHref(v);try{o.pushState(x,"",T)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(T)}s&&l&&l({action:a,location:m.location,delta:1})}function h(y,g){a=Hn.Replace;let v=fc(m.location,y,g);n&&n(v,y),u=c();let x=kh(v,u),T=m.createHref(v);o.replaceState(x,"",T),s&&l&&l({action:a,location:m.location,delta:0})}function p(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof y=="string"?y:Mg(y);return v=v.replace(/ $/,"%20"),Me(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let m={get action(){return a},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ah,f),l=y,()=>{i.removeEventListener(Ah,f),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:h,go(y){return o.go(y)}};return m}var Lh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lh||(Lh={}));function f1(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ki(e):e,i=$g(r.pathname||"/",n);if(i==null)return null;let s=Ug(t);d1(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=C1(i);o=E1(s[a],l)}return o}function Ug(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Er([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ug(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:x1(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Bg(s.path))i(s,o,l)}),e}function Bg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Bg(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function d1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const h1=/^:[\w-]+$/,p1=3,m1=2,g1=1,y1=10,v1=-2,bh=t=>t==="*";function x1(t,e){let n=t.split("/"),r=n.length;return n.some(bh)&&(r+=v1),e&&(r+=m1),n.filter(i=>!bh(i)).reduce((i,s)=>i+(h1.test(s)?p1:s===""?g1:y1),r)}function S1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function E1(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=T1({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Er([i,c.pathname]),pathnameBase:_1(Er([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Er([i,c.pathnameBase]))}return s}function T1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=w1(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function w1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function C1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $g(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function R1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ki(t):t;return{pathname:n?n.startsWith("/")?n:A1(n,e):e,search:I1(r),hash:P1(i)}}function A1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hl(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function L1(t,e){let n=k1(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function b1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ki(t):(i=As({},t),Me(!i.pathname||!i.pathname.includes("?"),Hl("?","pathname","search",i)),Me(!i.pathname||!i.pathname.includes("#"),Hl("#","pathname","hash",i)),Me(!i.search||!i.search.includes("#"),Hl("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?e[f]:"/"}let l=R1(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),_1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),I1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function D1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jg=["post","put","patch","delete"];new Set(jg);const O1=["get",...jg];new Set(O1);/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ks(){return ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ks.apply(this,arguments)}const Uf=$.createContext(null),N1=$.createContext(null),Xa=$.createContext(null),Qa=$.createContext(null),Pr=$.createContext({outlet:null,matches:[],isDataRoute:!1}),zg=$.createContext(null);function Ja(){return $.useContext(Qa)!=null}function Gg(){return Ja()||Me(!1),$.useContext(Qa).location}function Hg(t){$.useContext(Xa).static||$.useLayoutEffect(t)}function Vg(){let{isDataRoute:t}=$.useContext(Pr);return t?q1():F1()}function F1(){Ja()||Me(!1);let t=$.useContext(Uf),{basename:e,future:n,navigator:r}=$.useContext(Xa),{matches:i}=$.useContext(Pr),{pathname:s}=Gg(),o=JSON.stringify(L1(i,n.v7_relativeSplatPath)),a=$.useRef(!1);return Hg(()=>{a.current=!0}),$.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=b1(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Er([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,o,s,t])}function M1(){let{matches:t}=$.useContext(Pr),e=t[t.length-1];return e?e.params:{}}function U1(t,e){return B1(t,e)}function B1(t,e,n,r){Ja()||Me(!1);let{navigator:i}=$.useContext(Xa),{matches:s}=$.useContext(Pr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Gg(),c;if(e){var f;let y=typeof e=="string"?ki(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||Me(!1),c=y}else c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=f1(t,{pathname:h}),m=H1(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Er([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Er([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return e&&m?$.createElement(Qa.Provider,{value:{location:ks({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Hn.Pop}},m):m}function $1(){let t=Y1(),e=D1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:i},n):null,null)}const j1=$.createElement($1,null);class z1 extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(Pr.Provider,{value:this.props.routeContext},$.createElement(zg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G1(t){let{routeContext:e,match:n,children:r}=t,i=$.useContext(Uf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Pr.Provider,{value:e},r)}function H1(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id]));c>=0||Me(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,y=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||j1,l&&(u<0&&d===0?(X1("route-fallback",!1),p=!0,y=null):u===d&&(p=!0,y=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),v=()=>{let x;return h?x=m:p?x=y:f.route.Component?x=$.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=c,$.createElement(G1,{match:f,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?$.createElement(z1,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var Wg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Wg||{}),ga=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ga||{});function V1(t){let e=$.useContext(Uf);return e||Me(!1),e}function W1(t){let e=$.useContext(N1);return e||Me(!1),e}function K1(t){let e=$.useContext(Pr);return e||Me(!1),e}function Kg(t){let e=K1(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function Y1(){var t;let e=$.useContext(zg),n=W1(ga.UseRouteError),r=Kg(ga.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function q1(){let{router:t}=V1(Wg.UseNavigateStable),e=Kg(ga.UseNavigateStable),n=$.useRef(!1);return Hg(()=>{n.current=!0}),$.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ks({fromRouteId:e},s)))},[t,e])}const _h={};function X1(t,e,n){!e&&!_h[t]&&(_h[t]=!0)}function No(t){Me(!1)}function Q1(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Hn.Pop,navigator:s,static:o=!1,future:a}=t;Ja()&&Me(!1);let l=e.replace(/^\/*/,"/"),u=$.useMemo(()=>({basename:l,navigator:s,static:o,future:ks({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ki(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=$.useMemo(()=>{let y=$g(c,l);return y==null?null:{location:{pathname:y,search:f,hash:d,state:h,key:p},navigationType:i}},[l,c,f,d,h,p,i]);return m==null?null:$.createElement(Xa.Provider,{value:u},$.createElement(Qa.Provider,{children:n,value:m}))}function J1(t){let{children:e,location:n}=t;return U1(dc(e),n)}new Promise(()=>{});function dc(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(r,i)=>{if(!$.isValidElement(r))return;let s=[...e,i];if(r.type===$.Fragment){n.push.apply(n,dc(r.props.children,s));return}r.type!==No&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dc(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Z1="6";try{window.__reactRouterVersion=Z1}catch{}const ew="startTransition",Ih=Kv[ew];function tw(t){let{basename:e,children:n,future:r,window:i}=t,s=$.useRef();s.current==null&&(s.current=l1({window:i,v5Compat:!0}));let o=s.current,[a,l]=$.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=$.useCallback(f=>{u&&Ih?Ih(()=>l(f)):l(f)},[l,u]);return $.useLayoutEffect(()=>o.listen(c),[o,c]),$.createElement(Q1,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Ph;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ph||(Ph={}));var Dh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Dh||(Dh={}));function Yg(t,e){return function(){return t.apply(e,arguments)}}const{toString:nw}=Object.prototype,{getPrototypeOf:Bf}=Object,Za=(t=>e=>{const n=nw.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),hn=t=>(t=t.toLowerCase(),e=>Za(e)===t),el=t=>e=>typeof e===t,{isArray:Li}=Array,Ls=el("undefined");function rw(t){return t!==null&&!Ls(t)&&t.constructor!==null&&!Ls(t.constructor)&&It(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const qg=hn("ArrayBuffer");function iw(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qg(t.buffer),e}const sw=el("string"),It=el("function"),Xg=el("number"),tl=t=>t!==null&&typeof t=="object",ow=t=>t===!0||t===!1,Fo=t=>{if(Za(t)!=="object")return!1;const e=Bf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},aw=hn("Date"),lw=hn("File"),uw=hn("Blob"),cw=hn("FileList"),fw=t=>tl(t)&&It(t.pipe),dw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||It(t.append)&&((e=Za(t))==="formdata"||e==="object"&&It(t.toString)&&t.toString()==="[object FormData]"))},hw=hn("URLSearchParams"),pw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Us(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Li(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function Qg(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Jg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zg=t=>!Ls(t)&&t!==Jg;function hc(){const{caseless:t}=Zg(this)&&this||{},e={},n=(r,i)=>{const s=t&&Qg(e,i)||i;Fo(e[s])&&Fo(r)?e[s]=hc(e[s],r):Fo(r)?e[s]=hc({},r):Li(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Us(arguments[r],n);return e}const mw=(t,e,n,{allOwnKeys:r}={})=>(Us(e,(i,s)=>{n&&It(i)?t[s]=Yg(i,n):t[s]=i},{allOwnKeys:r}),t),gw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),yw=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},vw=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Bf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},xw=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Sw=t=>{if(!t)return null;if(Li(t))return t;let e=t.length;if(!Xg(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Ew=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Bf(Uint8Array)),Tw=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},ww=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Cw=hn("HTMLFormElement"),Rw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Oh=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Aw=hn("RegExp"),ey=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Us(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},kw=t=>{ey(t,(e,n)=>{if(It(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(It(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Lw=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Li(t)?r(t):r(String(t).split(e)),n},bw=()=>{},_w=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Vl="abcdefghijklmnopqrstuvwxyz",Nh="0123456789",ty={DIGIT:Nh,ALPHA:Vl,ALPHA_DIGIT:Vl+Vl.toUpperCase()+Nh},Iw=(t=16,e=ty.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Pw(t){return!!(t&&It(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Dw=t=>{const e=new Array(10),n=(r,i)=>{if(tl(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Li(r)?[]:{};return Us(r,(o,a)=>{const l=n(o,i+1);!Ls(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},Ow=hn("AsyncFunction"),Nw=t=>t&&(tl(t)||It(t))&&It(t.then)&&It(t.catch),B={isArray:Li,isArrayBuffer:qg,isBuffer:rw,isFormData:dw,isArrayBufferView:iw,isString:sw,isNumber:Xg,isBoolean:ow,isObject:tl,isPlainObject:Fo,isUndefined:Ls,isDate:aw,isFile:lw,isBlob:uw,isRegExp:Aw,isFunction:It,isStream:fw,isURLSearchParams:hw,isTypedArray:Ew,isFileList:cw,forEach:Us,merge:hc,extend:mw,trim:pw,stripBOM:gw,inherits:yw,toFlatObject:vw,kindOf:Za,kindOfTest:hn,endsWith:xw,toArray:Sw,forEachEntry:Tw,matchAll:ww,isHTMLForm:Cw,hasOwnProperty:Oh,hasOwnProp:Oh,reduceDescriptors:ey,freezeMethods:kw,toObjectSet:Lw,toCamelCase:Rw,noop:bw,toFiniteNumber:_w,findKey:Qg,global:Jg,isContextDefined:Zg,ALPHABET:ty,generateString:Iw,isSpecCompliantForm:Pw,toJSONObject:Dw,isAsyncFn:Ow,isThenable:Nw};function pe(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}B.inherits(pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ny=pe.prototype,ry={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ry[t]={value:t}});Object.defineProperties(pe,ry);Object.defineProperty(ny,"isAxiosError",{value:!0});pe.from=(t,e,n,r,i,s)=>{const o=Object.create(ny);return B.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),pe.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const Fw=null;function pc(t){return B.isPlainObject(t)||B.isArray(t)}function iy(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function Fh(t,e,n){return t?t.concat(e).map(function(i,s){return i=iy(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Mw(t){return B.isArray(t)&&!t.some(pc)}const Uw=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function nl(t,e,n){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!B.isUndefined(y[m])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(i))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(B.isDate(p))return p.toISOString();if(!l&&B.isBlob(p))throw new pe("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(p)||B.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,y){let g=p;if(p&&!y&&typeof p=="object"){if(B.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(B.isArray(p)&&Mw(p)||(B.isFileList(p)||B.endsWith(m,"[]"))&&(g=B.toArray(p)))return m=iy(m),g.forEach(function(x,T){!(B.isUndefined(x)||x===null)&&e.append(o===!0?Fh([m],T,s):o===null?m:m+"[]",u(x))}),!1}return pc(p)?!0:(e.append(Fh(y,m,s),u(p)),!1)}const f=[],d=Object.assign(Uw,{defaultVisitor:c,convertValue:u,isVisitable:pc});function h(p,m){if(!B.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),B.forEach(p,function(g,v){(!(B.isUndefined(g)||g===null)&&i.call(e,g,B.isString(v)?v.trim():v,m,d))===!0&&h(g,m?m.concat(v):[v])}),f.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return h(t),e}function Mh(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function $f(t,e){this._pairs=[],t&&nl(t,this,e)}const sy=$f.prototype;sy.append=function(e,n){this._pairs.push([e,n])};sy.toString=function(e){const n=e?function(r){return e.call(this,r,Mh)}:Mh;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Bw(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oy(t,e,n){if(!e)return t;const r=n&&n.encode||Bw,i=n&&n.serialize;let s;if(i?s=i(e,n):s=B.isURLSearchParams(e)?e.toString():new $f(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Uh{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(r){r!==null&&e(r)})}}const ay={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$w=typeof URLSearchParams<"u"?URLSearchParams:$f,jw=typeof FormData<"u"?FormData:null,zw=typeof Blob<"u"?Blob:null,Gw={isBrowser:!0,classes:{URLSearchParams:$w,FormData:jw,Blob:zw},protocols:["http","https","file","blob","url","data"]},ly=typeof window<"u"&&typeof document<"u",Hw=(t=>ly&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Vw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ww=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ly,hasStandardBrowserEnv:Hw,hasStandardBrowserWebWorkerEnv:Vw},Symbol.toStringTag,{value:"Module"})),an={...Ww,...Gw};function Kw(t,e){return nl(t,new an.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return an.isNode&&B.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Yw(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function qw(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function uy(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&B.isArray(i)?i.length:o,l?(B.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!B.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&B.isArray(i[o])&&(i[o]=qw(i[o])),!a)}if(B.isFormData(t)&&B.isFunction(t.entries)){const n={};return B.forEachEntry(t,(r,i)=>{e(Yw(r),i,n,0)}),n}return null}function Xw(t,e,n){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const jf={transitional:ay,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=B.isObject(e);if(s&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return i?JSON.stringify(uy(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Kw(e,this.formSerializer).toString();if((a=B.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return nl(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Xw(e)):e}],transformResponse:[function(e){const n=this.transitional||jf.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&B.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?pe.from(a,pe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{jf.headers[t]={}});const zf=jf,Qw=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jw=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&Qw[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Bh=Symbol("internals");function $i(t){return t&&String(t).trim().toLowerCase()}function Mo(t){return t===!1||t==null?t:B.isArray(t)?t.map(Mo):String(t)}function Zw(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const eC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Wl(t,e,n,r,i){if(B.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!B.isString(e)){if(B.isString(r))return e.indexOf(r)!==-1;if(B.isRegExp(r))return r.test(e)}}function tC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function nC(t,e){const n=B.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class rl{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,u){const c=$i(l);if(!c)throw new Error("header name must be a non-empty string");const f=B.findKey(i,c);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||l]=Mo(a))}const o=(a,l)=>B.forEach(a,(u,c)=>s(u,c,l));return B.isPlainObject(e)||e instanceof this.constructor?o(e,n):B.isString(e)&&(e=e.trim())&&!eC(e)?o(Jw(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=$i(e),e){const r=B.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Zw(i);if(B.isFunction(n))return n.call(this,i,r);if(B.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=$i(e),e){const r=B.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Wl(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=$i(o),o){const a=B.findKey(r,o);a&&(!n||Wl(r,r[a],a,n))&&(delete r[a],i=!0)}}return B.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Wl(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return B.forEach(this,(i,s)=>{const o=B.findKey(r,s);if(o){n[o]=Mo(i),delete n[s];return}const a=e?tC(s):String(s).trim();a!==s&&delete n[s],n[a]=Mo(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return B.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&B.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Bh]=this[Bh]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=$i(o);r[a]||(nC(i,o),r[a]=!0)}return B.isArray(e)?e.forEach(s):s(e),this}}rl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(rl.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});B.freezeMethods(rl);const Cn=rl;function Kl(t,e){const n=this||zf,r=e||n,i=Cn.from(r.headers);let s=r.data;return B.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function cy(t){return!!(t&&t.__CANCEL__)}function Bs(t,e,n){pe.call(this,t??"canceled",pe.ERR_CANCELED,e,n),this.name="CanceledError"}B.inherits(Bs,pe,{__CANCEL__:!0});function rC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new pe("Request failed with status code "+n.status,[pe.ERR_BAD_REQUEST,pe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const iC=an.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];B.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),B.isString(r)&&o.push("path="+r),B.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function sC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oC(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function fy(t,e){return t&&!sC(e)?oC(t,e):e}const aC=an.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=B.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function lC(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function uC(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];o||(o=u),n[i]=l,r[i]=u;let f=s,d=0;for(;f!==i;)d+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const h=c&&u-c;return h?Math.round(d*1e3/h):void 0}}function $h(t,e){let n=0;const r=uC(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),u=s<=o;n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const cC=typeof XMLHttpRequest<"u",fC=cC&&function(t){return new Promise(function(n,r){let i=t.data;const s=Cn.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,l;function u(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let c;if(B.isFormData(i)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[m,...y]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];s.setContentType([m||"multipart/form-data",...y].join("; "))}}let f=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(m+":"+y))}const d=fy(t.baseURL,t.url);f.open(t.method.toUpperCase(),oy(d,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function h(){if(!f)return;const m=Cn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:m,config:t,request:f};rC(function(x){n(x),u()},function(x){r(x),u()},g),f=null}if("onloadend"in f?f.onloadend=h:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(h)},f.onabort=function(){f&&(r(new pe("Request aborted",pe.ECONNABORTED,t,f)),f=null)},f.onerror=function(){r(new pe("Network Error",pe.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const g=t.transitional||ay;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),r(new pe(y,g.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,t,f)),f=null},an.hasStandardBrowserEnv&&(a&&B.isFunction(a)&&(a=a(t)),a||a!==!1&&aC(d))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&iC.read(t.xsrfCookieName);m&&s.set(t.xsrfHeaderName,m)}i===void 0&&s.setContentType(null),"setRequestHeader"in f&&B.forEach(s.toJSON(),function(y,g){f.setRequestHeader(g,y)}),B.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),o&&o!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",$h(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",$h(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{f&&(r(!m||m.type?new Bs(null,t,f):m),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const p=lC(d);if(p&&an.protocols.indexOf(p)===-1){r(new pe("Unsupported protocol "+p+":",pe.ERR_BAD_REQUEST,t));return}f.send(i||null)})},mc={http:Fw,xhr:fC};B.forEach(mc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const jh=t=>`- ${t}`,dC=t=>B.isFunction(t)||t===null||t===!1,dy={getAdapter:t=>{t=B.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!dC(n)&&(r=mc[(o=String(n)).toLowerCase()],r===void 0))throw new pe(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(jh).join(`
`):" "+jh(s[0]):"as no adapter specified";throw new pe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:mc};function Yl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Bs(null,t)}function zh(t){return Yl(t),t.headers=Cn.from(t.headers),t.data=Kl.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),dy.getAdapter(t.adapter||zf.adapter)(t).then(function(r){return Yl(t),r.data=Kl.call(t,t.transformResponse,r),r.headers=Cn.from(r.headers),r},function(r){return cy(r)||(Yl(t),r&&r.response&&(r.response.data=Kl.call(t,t.transformResponse,r.response),r.response.headers=Cn.from(r.response.headers))),Promise.reject(r)})}const Gh=t=>t instanceof Cn?t.toJSON():t;function vi(t,e){e=e||{};const n={};function r(u,c,f){return B.isPlainObject(u)&&B.isPlainObject(c)?B.merge.call({caseless:f},u,c):B.isPlainObject(c)?B.merge({},c):B.isArray(c)?c.slice():c}function i(u,c,f){if(B.isUndefined(c)){if(!B.isUndefined(u))return r(void 0,u,f)}else return r(u,c,f)}function s(u,c){if(!B.isUndefined(c))return r(void 0,c)}function o(u,c){if(B.isUndefined(c)){if(!B.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,f){if(f in e)return r(u,c);if(f in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>i(Gh(u),Gh(c),!0)};return B.forEach(Object.keys(Object.assign({},t,e)),function(c){const f=l[c]||i,d=f(t[c],e[c],c);B.isUndefined(d)&&f!==a||(n[c]=d)}),n}const hy="1.6.7",Gf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Gf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Hh={};Gf.transitional=function(e,n,r){function i(s,o){return"[Axios v"+hy+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new pe(i(o," has been removed"+(n?" in "+n:"")),pe.ERR_DEPRECATED);return n&&!Hh[o]&&(Hh[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function hC(t,e,n){if(typeof t!="object")throw new pe("options must be an object",pe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new pe("option "+s+" must be "+l,pe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new pe("Unknown option "+s,pe.ERR_BAD_OPTION)}}const gc={assertOptions:hC,validators:Gf},Pn=gc.validators;class ya{constructor(e){this.defaults=e,this.interceptors={request:new Uh,response:new Uh}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=vi(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&gc.assertOptions(r,{silentJSONParsing:Pn.transitional(Pn.boolean),forcedJSONParsing:Pn.transitional(Pn.boolean),clarifyTimeoutError:Pn.transitional(Pn.boolean)},!1),i!=null&&(B.isFunction(i)?n.paramsSerializer={serialize:i}:gc.assertOptions(i,{encode:Pn.function,serialize:Pn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&B.merge(s.common,s[n.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Cn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let c,f=0,d;if(!l){const p=[zh.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),d=p.length,c=Promise.resolve(n);f<d;)c=c.then(p[f++],p[f++]);return c}d=a.length;let h=n;for(f=0;f<d;){const p=a[f++],m=a[f++];try{h=p(h)}catch(y){m.call(this,y);break}}try{c=zh.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=u.length;f<d;)c=c.then(u[f++],u[f++]);return c}getUri(e){e=vi(this.defaults,e);const n=fy(e.baseURL,e.url);return oy(n,e.params,e.paramsSerializer)}}B.forEach(["delete","get","head","options"],function(e){ya.prototype[e]=function(n,r){return this.request(vi(r||{},{method:e,url:n,data:(r||{}).data}))}});B.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(vi(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ya.prototype[e]=n(),ya.prototype[e+"Form"]=n(!0)});const Uo=ya;class Hf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Bs(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Hf(function(i){e=i}),cancel:e}}}const pC=Hf;function mC(t){return function(n){return t.apply(null,n)}}function gC(t){return B.isObject(t)&&t.isAxiosError===!0}const yc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yc).forEach(([t,e])=>{yc[e]=t});const yC=yc;function py(t){const e=new Uo(t),n=Yg(Uo.prototype.request,e);return B.extend(n,Uo.prototype,e,{allOwnKeys:!0}),B.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return py(vi(t,i))},n}const Ce=py(zf);Ce.Axios=Uo;Ce.CanceledError=Bs;Ce.CancelToken=pC;Ce.isCancel=cy;Ce.VERSION=hy;Ce.toFormData=nl;Ce.AxiosError=pe;Ce.Cancel=Ce.CanceledError;Ce.all=function(e){return Promise.all(e)};Ce.spread=mC;Ce.isAxiosError=gC;Ce.mergeConfig=vi;Ce.AxiosHeaders=Cn;Ce.formToJSON=t=>uy(B.isHTMLForm(t)?new FormData(t):t);Ce.getAdapter=dy.getAdapter;Ce.HttpStatusCode=yC;Ce.default=Ce;var my={exports:{}};(function(t,e){(function(n,r){t.exports=r($)})(fu,n=>(()=>{var r={703:(a,l,u)=>{var c=u(414);function f(){}function d(){}d.resetWarningCache=f,a.exports=function(){function h(y,g,v,x,T,E){if(E!==c){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}function p(){return h}h.isRequired=h;var m={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:p,element:h,elementType:h,instanceOf:p,node:h,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:d,resetWarningCache:f};return m.PropTypes=m,m}},697:(a,l,u)=>{a.exports=u(703)()},414:a=>{a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:a=>{a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var u=i[a]={exports:{}};return r[a](u,u.exports,s),u.exports}s.n=a=>{var l=a&&a.__esModule?()=>a.default:()=>a;return s.d(l,{a:l}),l},s.d=(a,l)=>{for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return(()=>{s.r(o),s.d(o,{default:()=>H});var a=s(98),l=s.n(a),u=s(697),c=s.n(u);function f(){return f=Object.assign?Object.assign.bind():function(U){for(var z=1;z<arguments.length;z++){var O=arguments[z];for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&(U[D]=O[D])}return U},f.apply(this,arguments)}var d=function(U){var z=U.pageClassName,O=U.pageLinkClassName,D=U.page,W=U.selected,L=U.activeClassName,b=U.activeLinkClassName,R=U.getEventListener,C=U.pageSelectedHandler,j=U.href,N=U.extraAriaContext,K=U.pageLabelBuilder,X=U.rel,te=U.ariaLabel||"Page "+D+(N?" "+N:""),re=null;return W&&(re="page",te=U.ariaLabel||"Page "+D+" is your current page",z=z!==void 0?z+" "+L:L,O!==void 0?b!==void 0&&(O=O+" "+b):O=b),l().createElement("li",{className:z},l().createElement("a",f({rel:X,role:j?void 0:"button",className:O,href:j,tabIndex:W?"-1":"0","aria-label":te,"aria-current":re,onKeyPress:C},R(C)),K(D)))};d.propTypes={pageSelectedHandler:c().func.isRequired,selected:c().bool.isRequired,pageClassName:c().string,pageLinkClassName:c().string,activeClassName:c().string,activeLinkClassName:c().string,extraAriaContext:c().string,href:c().string,ariaLabel:c().string,page:c().number.isRequired,getEventListener:c().func.isRequired,pageLabelBuilder:c().func.isRequired,rel:c().string};const h=d;function p(){return p=Object.assign?Object.assign.bind():function(U){for(var z=1;z<arguments.length;z++){var O=arguments[z];for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&(U[D]=O[D])}return U},p.apply(this,arguments)}var m=function(U){var z=U.breakLabel,O=U.breakAriaLabel,D=U.breakClassName,W=U.breakLinkClassName,L=U.breakHandler,b=U.getEventListener,R=D||"break";return l().createElement("li",{className:R},l().createElement("a",p({className:W,role:"button",tabIndex:"0","aria-label":O,onKeyPress:L},b(L)),z))};m.propTypes={breakLabel:c().oneOfType([c().string,c().node]),breakAriaLabel:c().string,breakClassName:c().string,breakLinkClassName:c().string,breakHandler:c().func.isRequired,getEventListener:c().func.isRequired};const y=m;function g(U){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return U??z}function v(U){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},v(U)}function x(){return x=Object.assign?Object.assign.bind():function(U){for(var z=1;z<arguments.length;z++){var O=arguments[z];for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&(U[D]=O[D])}return U},x.apply(this,arguments)}function T(U,z){for(var O=0;O<z.length;O++){var D=z[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(U,D.key,D)}}function E(U,z){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,D){return O.__proto__=D,O},E(U,z)}function k(U,z){if(z&&(v(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(U)}function w(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function A(U){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},A(U)}function F(U,z,O){return z in U?Object.defineProperty(U,z,{value:O,enumerable:!0,configurable:!0,writable:!0}):U[z]=O,U}var I=function(U){(function(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(C&&C.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),C&&E(R,C)})(b,U);var z,O,D,W,L=(D=b,W=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var R,C=A(D);if(W){var j=A(this).constructor;R=Reflect.construct(C,arguments,j)}else R=C.apply(this,arguments);return k(this,R)});function b(R){var C,j;return function(N,K){if(!(N instanceof K))throw new TypeError("Cannot call a class as a function")}(this,b),F(w(C=L.call(this,R)),"handlePreviousPage",function(N){var K=C.state.selected;C.handleClick(N,null,K>0?K-1:void 0,{isPrevious:!0})}),F(w(C),"handleNextPage",function(N){var K=C.state.selected,X=C.props.pageCount;C.handleClick(N,null,K<X-1?K+1:void 0,{isNext:!0})}),F(w(C),"handlePageSelected",function(N,K){if(C.state.selected===N)return C.callActiveCallback(N),void C.handleClick(K,null,void 0,{isActive:!0});C.handleClick(K,null,N)}),F(w(C),"handlePageChange",function(N){C.state.selected!==N&&(C.setState({selected:N}),C.callCallback(N))}),F(w(C),"getEventListener",function(N){return F({},C.props.eventListener,N)}),F(w(C),"handleClick",function(N,K,X){var te=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},re=te.isPrevious,me=re!==void 0&&re,at=te.isNext,Nt=at!==void 0&&at,mt=te.isBreak,et=mt!==void 0&&mt,de=te.isActive,he=de!==void 0&&de;N.preventDefault?N.preventDefault():N.returnValue=!1;var xe=C.state.selected,se=C.props.onClick,Re=X;if(se){var Ie=se({index:K,selected:xe,nextSelectedPage:X,event:N,isPrevious:me,isNext:Nt,isBreak:et,isActive:he});if(Ie===!1)return;Number.isInteger(Ie)&&(Re=Ie)}Re!==void 0&&C.handlePageChange(Re)}),F(w(C),"handleBreakClick",function(N,K){var X=C.state.selected;C.handleClick(K,N,X<N?C.getForwardJump():C.getBackwardJump(),{isBreak:!0})}),F(w(C),"callCallback",function(N){C.props.onPageChange!==void 0&&typeof C.props.onPageChange=="function"&&C.props.onPageChange({selected:N})}),F(w(C),"callActiveCallback",function(N){C.props.onPageActive!==void 0&&typeof C.props.onPageActive=="function"&&C.props.onPageActive({selected:N})}),F(w(C),"getElementPageRel",function(N){var K=C.state.selected,X=C.props,te=X.nextPageRel,re=X.prevPageRel,me=X.selectedPageRel;return K-1===N?re:K===N?me:K+1===N?te:void 0}),F(w(C),"pagination",function(){var N=[],K=C.props,X=K.pageRangeDisplayed,te=K.pageCount,re=K.marginPagesDisplayed,me=K.breakLabel,at=K.breakClassName,Nt=K.breakLinkClassName,mt=K.breakAriaLabels,et=C.state.selected;if(te<=X)for(var de=0;de<te;de++)N.push(C.getPageElement(de));else{var he=X/2,xe=X-he;et>te-X/2?he=X-(xe=te-et):et<X/2&&(xe=X-(he=et));var se,Re,Ie=function(Ft){return C.getPageElement(Ft)},le=[];for(se=0;se<te;se++){var Pe=se+1;if(Pe<=re)le.push({type:"page",index:se,display:Ie(se)});else if(Pe>te-re)le.push({type:"page",index:se,display:Ie(se)});else if(se>=et-he&&se<=et+(et===0&&X>1?xe-1:xe))le.push({type:"page",index:se,display:Ie(se)});else if(me&&le.length>0&&le[le.length-1].display!==Re&&(X>0||re>0)){var gt=se<et?mt.backward:mt.forward;Re=l().createElement(y,{key:se,breakAriaLabel:gt,breakLabel:me,breakClassName:at,breakLinkClassName:Nt,breakHandler:C.handleBreakClick.bind(null,se),getEventListener:C.getEventListener}),le.push({type:"break",index:se,display:Re})}}le.forEach(function(Ft,Mt){var ar=Ft;Ft.type==="break"&&le[Mt-1]&&le[Mt-1].type==="page"&&le[Mt+1]&&le[Mt+1].type==="page"&&le[Mt+1].index-le[Mt-1].index<=2&&(ar={type:"page",index:Ft.index,display:Ie(Ft.index)}),N.push(ar.display)})}return N}),R.initialPage!==void 0&&R.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(R.initialPage,") and forcePage (").concat(R.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),j=R.initialPage?R.initialPage:R.forcePage?R.forcePage:0,C.state={selected:j},C}return z=b,(O=[{key:"componentDidMount",value:function(){var R=this.props,C=R.initialPage,j=R.disableInitialCallback,N=R.extraAriaContext,K=R.pageCount,X=R.forcePage;C===void 0||j||this.callCallback(C),N&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(K)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(K,"). Did you forget a Math.ceil()?")),C!==void 0&&C>K-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(C," > ").concat(K-1,").")),X!==void 0&&X>K-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(X," > ").concat(K-1,")."))}},{key:"componentDidUpdate",value:function(R){this.props.forcePage!==void 0&&this.props.forcePage!==R.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(R.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var R=this.state.selected,C=this.props,j=C.pageCount,N=R+C.pageRangeDisplayed;return N>=j?j-1:N}},{key:"getBackwardJump",value:function(){var R=this.state.selected-this.props.pageRangeDisplayed;return R<0?0:R}},{key:"getElementHref",value:function(R){var C=this.props,j=C.hrefBuilder,N=C.pageCount,K=C.hrefAllControls;if(j)return K||R>=0&&R<N?j(R+1,N,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(R){var C=R===this.state.selected;if(this.props.ariaLabelBuilder&&R>=0&&R<this.props.pageCount){var j=this.props.ariaLabelBuilder(R+1,C);return this.props.extraAriaContext&&!C&&(j=j+" "+this.props.extraAriaContext),j}}},{key:"getPageElement",value:function(R){var C=this.state.selected,j=this.props,N=j.pageClassName,K=j.pageLinkClassName,X=j.activeClassName,te=j.activeLinkClassName,re=j.extraAriaContext,me=j.pageLabelBuilder;return l().createElement(h,{key:R,pageSelectedHandler:this.handlePageSelected.bind(null,R),selected:C===R,rel:this.getElementPageRel(R),pageClassName:N,pageLinkClassName:K,activeClassName:X,activeLinkClassName:te,extraAriaContext:re,href:this.getElementHref(R),ariaLabel:this.ariaLabelBuilder(R),page:R+1,pageLabelBuilder:me,getEventListener:this.getEventListener})}},{key:"render",value:function(){var R=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&R!==void 0)return R&&R(this.props);var C=this.props,j=C.disabledClassName,N=C.disabledLinkClassName,K=C.pageCount,X=C.className,te=C.containerClassName,re=C.previousLabel,me=C.previousClassName,at=C.previousLinkClassName,Nt=C.previousAriaLabel,mt=C.prevRel,et=C.nextLabel,de=C.nextClassName,he=C.nextLinkClassName,xe=C.nextAriaLabel,se=C.nextRel,Re=this.state.selected,Ie=Re===0,le=Re===K-1,Pe="".concat(g(me)).concat(Ie?" ".concat(g(j)):""),gt="".concat(g(de)).concat(le?" ".concat(g(j)):""),Ft="".concat(g(at)).concat(Ie?" ".concat(g(N)):""),Mt="".concat(g(he)).concat(le?" ".concat(g(N)):""),ar=Ie?"true":"false",lt=le?"true":"false";return l().createElement("ul",{className:X||te,role:"navigation","aria-label":"Pagination"},l().createElement("li",{className:Pe},l().createElement("a",x({className:Ft,href:this.getElementHref(Re-1),tabIndex:Ie?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":ar,"aria-label":Nt,rel:mt},this.getEventListener(this.handlePreviousPage)),re)),this.pagination(),l().createElement("li",{className:gt},l().createElement("a",x({className:Mt,href:this.getElementHref(Re+1),tabIndex:le?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":lt,"aria-label":xe,rel:se},this.getEventListener(this.handleNextPage)),et)))}}])&&T(z.prototype,O),Object.defineProperty(z,"prototype",{writable:!1}),b}(a.Component);F(I,"propTypes",{pageCount:c().number.isRequired,pageRangeDisplayed:c().number,marginPagesDisplayed:c().number,previousLabel:c().node,previousAriaLabel:c().string,prevPageRel:c().string,prevRel:c().string,nextLabel:c().node,nextAriaLabel:c().string,nextPageRel:c().string,nextRel:c().string,breakLabel:c().oneOfType([c().string,c().node]),breakAriaLabels:c().shape({forward:c().string,backward:c().string}),hrefBuilder:c().func,hrefAllControls:c().bool,onPageChange:c().func,onPageActive:c().func,onClick:c().func,initialPage:c().number,forcePage:c().number,disableInitialCallback:c().bool,containerClassName:c().string,className:c().string,pageClassName:c().string,pageLinkClassName:c().string,pageLabelBuilder:c().func,activeClassName:c().string,activeLinkClassName:c().string,previousClassName:c().string,nextClassName:c().string,previousLinkClassName:c().string,nextLinkClassName:c().string,disabledClassName:c().string,disabledLinkClassName:c().string,breakClassName:c().string,breakLinkClassName:c().string,extraAriaContext:c().string,ariaLabelBuilder:c().func,eventListener:c().string,renderOnZeroPageCount:c().func,selectedPageRel:c().string}),F(I,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(U){return U},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const H=I})(),o})())})(my);var vC=my.exports;const xC=Oc(vC);var gy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Vh=Y.createContext&&Y.createContext(gy),SC=["attr","size","title"];function EC(t,e){if(t==null)return{};var n=TC(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function va(){return va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},va.apply(this,arguments)}function Wh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wh(Object(n),!0).forEach(function(r){wC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wC(t,e,n){return e=CC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CC(t){var e=RC(t,"string");return typeof e=="symbol"?e:String(e)}function RC(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yy(t){return t&&t.map((e,n)=>Y.createElement(e.tag,xa({key:n},e.attr),yy(e.child)))}function AC(t){return e=>Y.createElement(kC,va({attr:xa({},t.attr)},e),yy(t.child))}function kC(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=EC(t,SC),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Y.createElement("svg",va({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:xa(xa({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Y.createElement("title",null,s),t.children)};return Vh!==void 0?Y.createElement(Vh.Consumer,null,n=>e(n)):e(gy)}function vy(t){return AC({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.972 6.251c-.967-.538-2.185-.188-2.72.777l-3.713 6.682-2.125-2.125c-.781-.781-2.047-.781-2.828 0-.781.781-.781 2.047 0 2.828l4 4c.378.379.888.587 1.414.587l.277-.02c.621-.087 1.166-.46 1.471-1.009l5-9c.537-.966.189-2.183-.776-2.72z"},child:[]}]})(t)}const LC=({chapter:t,book:e})=>{const n=Vg(),[r,i]=$.useState(!1),[s,o]=$.useState(!0),[a,l]=$.useState(!0),u=()=>{n(`/book/${e.name}/${t.chapter_number}`)};$.useEffect(()=>{setTimeout(()=>{},1e3)},[]);const c=()=>{console.log("Checking availability"),i(!0);const f=e.aws_hosted,d=t.url,h="https://audio.jukehost.co.uk/";if(!f){const p=new AbortController,m=p.signal,y=`${h}${d}`;console.log("Checking:",y),fetch(y,{signal:m}).then(g=>{p.abort(),g.status===200?(o(!0),l(!1)):(o(!1),l(!1))}).catch(g=>{g.name==="AbortError"?console.log("Fetch aborted"):(console.error("Error:",g),o(!1))})}};return M.jsx("div",{className:"flex flex-col my-2 px-8 py-3 bg-slate-900",children:M.jsxs("div",{className:"flex justify-between items-center",children:[M.jsxs("div",{children:["Chapter ",t.chapter_number]}),M.jsxs("div",{className:"flex gap-2",children:[r&&(a?M.jsx("div",{className:"animate-spin h-6 w-6 border-t-2 border-blue-500 rounded-full my-2 mx-2"}):s?M.jsx("p",{className:"text-green-500 py-2 px-4",children:M.jsx(vy,{size:24})}):M.jsx("p",{className:"text-red-500 py-2",children:"Unavailable"})),M.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:c,children:"Health Check"}),M.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:u,children:"Update"})]})]})})},bC=({book:t})=>{const[e,n]=$.useState(!1),[r,i]=$.useState(!0),[s,o]=$.useState([]),a=()=>{n(!e),Ce.get(`http://localhost:5000/book/${t.name}`).then(l=>{o(l.data[0].chapters),i(!1)})};return M.jsxs("div",{children:[M.jsx("div",{className:"flex flex-col mb-4 p-6",children:M.jsxs("div",{className:"flex",children:[M.jsx("div",{className:"flex-[25%]",children:M.jsx("img",{src:t.bookimg,alt:t.name,className:"rounded-lg h-[20rem] w-[15rem] object-fit "})}),M.jsx("div",{className:"flex-[50%]",children:M.jsxs("div",{className:"flex flex-col justify-between h-full",children:[M.jsxs("div",{children:[M.jsx("h2",{className:"text-xl font-bold mt-2",children:t.name}),M.jsx("p",{className:"text-lg font-semibold mt-2",children:t.author})]}),M.jsx("div",{className:"mb-2",children:M.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-[12rem]",onClick:a,children:"View Chapters"})})]})})]})},t.name),e&&M.jsx("div",{className:"",children:r?M.jsx("p",{children:"Loading"}):M.jsx("div",{children:s.map(l=>M.jsx(LC,{chapter:l,book:t}))})}),M.jsx("hr",{className:" border-purple-400 shadow-xl -mx-4"})]})},_C=({contents:t})=>(console.log(t),M.jsx("div",{children:t&&t.map(e=>M.jsx(bC,{book:e}))})),IC=({})=>{const[t,e]=$.useState([]),[n,r]=$.useState(0),[i,s]=$.useState(!0);$.useEffect(()=>{(async()=>{try{const f=await Ce.get("http://localhost:5000/books");e(f.data)}catch(f){console.log(f)}finally{s(!1)}})()},[]);const o=5,a=n+o;t.slice(n,a);const l=Math.ceil(t.length/o),u=c=>{const f=c.selected*o%t.length;r(f)};return M.jsx(M.Fragment,{children:i?M.jsx("p",{children:"Loading"}):M.jsxs("div",{children:[M.jsx("h1",{className:"px-4 mb-12 text-4xl font-semibold font-serif",children:"Recently Added Books"}),M.jsx(_C,{contents:t.slice().reverse().slice(n,n+o)}),M.jsx(xC,{className:"react-paginate",breakLabel:"...",nextLabel:"next >",onPageChange:u,pageRangeDisplayed:5,pageCount:l,previousLabel:"< previous",renderOnZeroPageCount:null})]})})},PC=()=>M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"flex justify-between p-2  items-center",children:[M.jsx("div",{className:"px-2 pt-2",children:M.jsx(qT,{})}),M.jsx("h2",{className:"text-center text-3xl",children:"Welcome to the Admin Panel"}),M.jsx("div",{})]}),M.jsx("hr",{className:"my-4 -mx-4 "}),M.jsx("div",{className:"min-h-screen w-[calc(100vw-4rem)] pt-8  mt-4",children:M.jsx(IC,{})})]});function DC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OC={exports:{}};(function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var f=a.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");return f.path=a.normalizePath(f.path),a.buildURLFromParts(f)}var d=a.parseURL(u);if(!d)throw new Error("Error trying to parse relative URL.");if(d.scheme)return c.alwaysNormalize?(d.path=a.normalizePath(d.path),a.buildURLFromParts(d)):u;var h=a.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=i.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var m={scheme:h.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};if(!d.netLoc&&(m.netLoc=h.netLoc,d.path[0]!=="/"))if(!d.path)m.path=h.path,d.params||(m.params=h.params,d.query||(m.query=h.query));else{var y=h.path,g=y.substring(0,y.lastIndexOf("/")+1)+d.path;m.path=a.normalizePath(g)}return m.path===null&&(m.path=c.alwaysNormalize?a.normalizePath(d.path):d.path),a.buildURLFromParts(m)},parseURL:function(l){var u=r.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()})(OC);function Kh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kh(Object(n),!0).forEach(function(r){MC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NC(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FC(t){var e=NC(t,"string");return typeof e=="symbol"?e:String(e)}function MC(t,e,n){return e=FC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ze(){return Ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ze.apply(this,arguments)}const ne=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},UC=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=BC},BC=Number.MAX_SAFE_INTEGER||9007199254740991;let S=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),ue=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),G=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const Or=function(){},$C={trace:Or,debug:Or,log:Or,warn:Or,info:Or,error:Or};let jC=$C;const P=jC,zC=/^(\d+)x(\d+)$/,Yh=/(.+?)=(".*?"|.*?)(?:,|$)/g;class $s{constructor(e){typeof e=="string"&&(e=$s.parseAttrList(e)),Ze(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let i=0;i<n.length/2;i++)r[i]=parseInt(n.slice(i*2,i*2+2),16);return r}else return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const n=zC.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e){let n;const r={},i='"';for(Yh.lastIndex=0;(n=Yh.exec(e))!==null;){let s=n[2];s.indexOf(i)===0&&s.lastIndexOf(i)===s.length-1&&(s=s.slice(1,-1));const o=n[1].trim();r[o]=s}return r}}class GC{constructor(e,n){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,n){const r=n.attr;for(const i in r)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==r[i]){P.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=Ze(new $s({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=new Date(this.attr["END-DATE"]);ne(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(ne(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&ne(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class HC{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Qe={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};function Vf(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function VC(t){const e=vc(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function WC(t){const e=function(r,i,s){const o=r[i];r[i]=r[s],r[s]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function KC(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const s=i[0]==="base64",o=i[1];s?(r.splice(-1,1),n=Vf(o)):n=VC(o)}}return n}function vc(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}const xi=typeof self<"u"?self:void 0;var we={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ct={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function qh(t){switch(t){case ct.FAIRPLAY:return we.FAIRPLAY;case ct.PLAYREADY:return we.PLAYREADY;case ct.WIDEVINE:return we.WIDEVINE;case ct.CLEARKEY:return we.CLEARKEY}}var xy={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function YC(t){if(t===xy.WIDEVINE)return we.WIDEVINE}function Xh(t){switch(t){case we.FAIRPLAY:return ct.FAIRPLAY;case we.PLAYREADY:return ct.PLAYREADY;case we.WIDEVINE:return ct.WIDEVINE;case we.CLEARKEY:return ct.CLEARKEY}}function ql(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[we.FAIRPLAY,we.WIDEVINE,we.PLAYREADY,we.CLEARKEY].filter(i=>!!e[i]):[];return!r[we.WIDEVINE]&&n&&r.push(we.WIDEVINE),r}const Sy=function(t){return xi!=null&&(t=xi.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function qC(t,e,n,r){let i;switch(t){case we.FAIRPLAY:i=["cenc","sinf"];break;case we.WIDEVINE:case we.PLAYREADY:i=["cenc"];break;case we.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return XC(i,e,n,r)}function XC(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function Tr(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}const Wf=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,Ey=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,bs=(t,e)=>{const n=e;let r=0;for(;Wf(t,e);){r+=10;const i=il(t,e+6);r+=i,Ey(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)},il=(t,e)=>{let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n},QC=(t,e)=>Wf(t,e)&&il(t,e+6)+10<=t.length-e,Kf=t=>{const e=eR(t);for(let n=0;n<e.length;n++){const r=e[n];if(JC(r))return sR(r)}},JC=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",ZC=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=il(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}},eR=t=>{let e=0;const n=[];for(;Wf(t,e);){const r=il(t,e+6);e+=10;const i=e+r;for(;e+8<i;){const s=ZC(t.subarray(e)),o=tR(s);o&&n.push(o),e+=s.size+10}Ey(t,e)&&(e+=10)}return n},tR=t=>t.type==="PRIV"?nR(t):t.type[0]==="W"?iR(t):rR(t),nR=t=>{if(t.size<2)return;const e=fn(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}},rR=t=>{if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=fn(t.data.subarray(n),!0);n+=r.length+1;const i=fn(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fn(t.data.subarray(1));return{key:t.type,data:e}},iR=t=>{if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=fn(t.data.subarray(n),!0);n+=r.length+1;const i=fn(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=fn(t.data);return{key:t.type,data:e}},sR=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}},fn=(t,e=!1)=>{const n=oR();if(n){const u=n.decode(t);if(e){const c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}const r=t.length;let i,s,o,a="",l=0;for(;l<r;){if(i=t[l++],i===0&&e)return a;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:s=t[l++],a+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=t[l++],o=t[l++],a+=String.fromCharCode((i&15)<<12|(s&63)<<6|(o&63)<<0);break}}return a};let Xl;function oR(){if(!navigator.userAgent.includes("PlayStation 4"))return!Xl&&typeof self.TextDecoder<"u"&&(Xl=new self.TextDecoder("utf-8")),Xl}const nn={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}},Sa=Math.pow(2,32)-1,aR=[].push,Ty={video:1,audio:2,id3:3,text:4};function Oe(t){return String.fromCharCode.apply(null,t)}function wy(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function ee(t,e){const n=Cy(t,e);return n<0?4294967296+n:n}function Qh(t,e){let n=ee(t,e);return n*=Math.pow(2,32),n+=ee(t,e+4),n}function Cy(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Ql(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function lR(t){const e=t.byteLength;for(let n=0;n<e;){const r=ee(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function oe(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let i=0;i<r;){const s=ee(t,i),o=Oe(t.subarray(i+4,i+8)),a=s>1?i+s:r;if(o===e[0])if(e.length===1)n.push(t.subarray(i+8,a));else{const l=oe(t.subarray(i+8,a),e.slice(1));l.length&&aR.apply(n,l)}i=a}return n}function uR(t){const e=[],n=t[0];let r=8;const i=ee(t,r);r+=4;let s=0,o=0;n===0?(s=ee(t,r),o=ee(t,r+4),r+=8):(s=Qh(t,r),o=Qh(t,r+8),r+=16),r+=2;let a=t.length+o;const l=wy(t,r);r+=2;for(let u=0;u<l;u++){let c=r;const f=ee(t,c);c+=4;const d=f&2147483647;if((f&2147483648)>>>31===1)return P.warn("SIDX has hierarchical references (not supported)"),null;const p=ee(t,c);c+=4,e.push({referenceSize:d,subsegmentDuration:p,info:{duration:p/i,start:a,end:a+d-1}}),a+=d,c+=4,r=c}return{earliestPresentationTime:s,timescale:i,version:n,referencesCount:l,references:e}}function Ry(t){const e=[],n=oe(t,["moov","trak"]);for(let i=0;i<n.length;i++){const s=n[i],o=oe(s,["tkhd"])[0];if(o){let a=o[0];const l=ee(o,a===0?12:20),u=oe(s,["mdia","mdhd"])[0];if(u){a=u[0];const c=ee(u,a===0?12:20),f=oe(s,["mdia","hdlr"])[0];if(f){const d=Oe(f.subarray(8,12)),h={soun:Qe.AUDIO,vide:Qe.VIDEO}[d];if(h){const p=oe(s,["mdia","minf","stbl","stsd"])[0],m=cR(p);e[l]={timescale:c,type:h},e[h]=Et({timescale:c,id:l},m)}}}}}return oe(t,["moov","mvex","trex"]).forEach(i=>{const s=ee(i,4),o=e[s];o&&(o.default={duration:ee(i,12),flags:ee(i,20)})}),e}function cR(t){const e=t.subarray(8),n=e.subarray(86),r=Oe(e.subarray(4,8));let i=r;const s=r==="enca"||r==="encv";if(s){const a=oe(e,[r])[0].subarray(r==="enca"?28:78);oe(a,["sinf"]).forEach(u=>{const c=oe(u,["schm"])[0];if(c){const f=Oe(c.subarray(4,8));if(f==="cbcs"||f==="cenc"){const d=oe(u,["frma"])[0];d&&(i=Oe(d))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const o=oe(n,["avcC"])[0];i+="."+co(o[1])+co(o[2])+co(o[3]);break}case"mp4a":{const o=oe(e,[r])[0],a=oe(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=Jl(a,l),l+=2;const u=a[l++];if(u&128&&(l+=2),u&64&&(l+=a[l++]),a[l++]!==4)break;l=Jl(a,l);const c=a[l++];if(c===64)i+="."+co(c);else break;if(l+=12,a[l++]!==5)break;l=Jl(a,l);const f=a[l++];let d=(f&248)>>3;d===31&&(d+=1+((f&7)<<3)+((a[l]&224)>>5)),i+="."+d}break}case"hvc1":case"hev1":{const o=oe(n,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],u=a&31,c=ee(o,2),f=(a&32)>>5?"H":"L",d=o[12],h=o.subarray(6,12);i+="."+l+u,i+="."+c.toString(16).toUpperCase(),i+="."+f+d;let p="";for(let m=h.length;m--;){const y=h[m];(y||p)&&(p="."+y.toString(16).toUpperCase()+p)}i+=p;break}case"dvh1":case"dvhe":{const o=oe(n,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;i+="."+en(a)+"."+en(l);break}case"vp09":{const o=oe(n,["vpcC"])[0],a=o[4],l=o[5],u=o[6]>>4&15;i+="."+en(a)+"."+en(l)+"."+en(u);break}case"av01":{const o=oe(n,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,u=o[2]>>>7?"H":"M",c=(o[2]&64)>>6,f=(o[2]&32)>>5,d=a===2&&c?f?12:10:c?10:8,h=(o[2]&16)>>4,p=(o[2]&8)>>3,m=(o[2]&4)>>2,y=o[2]&3;i+="."+a+"."+en(l)+u+"."+en(d)+"."+h+"."+p+m+y+"."+en(1)+"."+en(1)+"."+en(1)+"."+0;break}}return{codec:i,encrypted:s}}function Jl(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function co(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function en(t){return(t<10?"0":"")+t}function fR(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&oe(t,["moov","trak"]).forEach(i=>{const o=oe(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=oe(o,["enca"]);const l=a.length>0;l||(a=oe(o,["encv"])),a.forEach(u=>{const c=l?u.subarray(28):u.subarray(78);oe(c,["sinf"]).forEach(d=>{const h=Ay(d);if(h){const p=h.subarray(8,24);p.some(m=>m!==0)||(P.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${nn.hexDump(p)} -> ${nn.hexDump(n)}`),h.set(n,8))}})})}),t}function Ay(t){const e=oe(t,["schm"])[0];if(e){const n=Oe(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return oe(t,["schi","tenc"])[0]}return P.error("[eme] missing 'schm' box"),null}function dR(t,e){return oe(e,["moof","traf"]).reduce((n,r)=>{const i=oe(r,["tfdt"])[0],s=i[0],o=oe(r,["tfhd"]).reduce((a,l)=>{const u=ee(l,4),c=t[u];if(c){let f=ee(i,4);if(s===1){if(f===Sa)return P.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;f*=Sa+1,f+=ee(i,8)}const d=c.timescale||9e4,h=f/d;if(ne(h)&&(a===null||h<a))return h}return a},null);return o!==null&&ne(o)&&(n===null||o<n)?o:n},null)}function hR(t,e){let n=0,r=0,i=0;const s=oe(t,["moof","traf"]);for(let o=0;o<s.length;o++){const a=s[o],l=oe(a,["tfhd"])[0],u=ee(l,4),c=e[u];if(!c)continue;const f=c.default,d=ee(l,0)|(f==null?void 0:f.flags);let h=f==null?void 0:f.duration;d&8&&(d&2?h=ee(l,12):h=ee(l,8));const p=c.timescale||9e4,m=oe(a,["trun"]);for(let y=0;y<m.length;y++){if(n=pR(m[y]),!n&&h){const g=ee(m[y],4);n=h*g}c.type===Qe.VIDEO?r+=n/p:c.type===Qe.AUDIO&&(i+=n/p)}}if(r===0&&i===0){let o=1/0,a=0,l=0;const u=oe(t,["sidx"]);for(let c=0;c<u.length;c++){const f=uR(u[c]);if(f!=null&&f.references){o=Math.min(o,f.earliestPresentationTime/f.timescale);const d=f.references.reduce((h,p)=>h+p.info.duration||0,0);a=Math.max(a,d+f.earliestPresentationTime/f.timescale),l=a-o}}if(l&&ne(l))return l}return r||i}function pR(t){const e=ee(t,0);let n=8;e&1&&(n+=4),e&4&&(n+=4);let r=0;const i=ee(t,4);for(let s=0;s<i;s++){if(e&256){const o=ee(t,n);r+=o,n+=4}e&512&&(n+=4),e&1024&&(n+=4),e&2048&&(n+=4)}return r}function mR(t,e,n){oe(e,["moof","traf"]).forEach(r=>{oe(r,["tfhd"]).forEach(i=>{const s=ee(i,4),o=t[s];if(!o)return;const a=o.timescale||9e4;oe(r,["tfdt"]).forEach(l=>{const u=l[0],c=n*a;if(c){let f=ee(l,4);if(u===0)f-=c,f=Math.max(f,0),Ql(l,4,f);else{f*=Math.pow(2,32),f+=ee(l,8),f-=c,f=Math.max(f,0);const d=Math.floor(f/(Sa+1)),h=Math.floor(f%(Sa+1));Ql(l,4,d),Ql(l,8,h)}}})})})}function gR(t){const e={valid:null,remainder:null},n=oe(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=Tr(t,0,r.byteOffset-8),e.remainder=Tr(t,r.byteOffset-8),e}function Ot(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Jh(t,e){const n=[],r=e.samples,i=e.timescale,s=e.id;let o=!1;return oe(r,["moof"]).map(l=>{const u=l.byteOffset-8;oe(l,["traf"]).map(f=>{const d=oe(f,["tfdt"]).map(h=>{const p=h[0];let m=ee(h,4);return p===1&&(m*=Math.pow(2,32),m+=ee(h,8)),m/i})[0];return d!==void 0&&(t=d),oe(f,["tfhd"]).map(h=>{const p=ee(h,4),m=ee(h,0)&16777215,y=(m&1)!==0,g=(m&2)!==0,v=(m&8)!==0;let x=0;const T=(m&16)!==0;let E=0;const k=(m&32)!==0;let w=8;p===s&&(y&&(w+=8),g&&(w+=4),v&&(x=ee(h,w),w+=4),T&&(E=ee(h,w),w+=4),k&&(w+=4),e.type==="video"&&(o=yR(e.codec)),oe(f,["trun"]).map(A=>{const F=A[0],I=ee(A,0)&16777215,H=(I&1)!==0;let U=0;const z=(I&4)!==0,O=(I&256)!==0;let D=0;const W=(I&512)!==0;let L=0;const b=(I&1024)!==0,R=(I&2048)!==0;let C=0;const j=ee(A,4);let N=8;H&&(U=ee(A,N),N+=4),z&&(N+=4);let K=U+u;for(let X=0;X<j;X++){if(O?(D=ee(A,N),N+=4):D=x,W?(L=ee(A,N),N+=4):L=E,b&&(N+=4),R&&(F===0?C=ee(A,N):C=Cy(A,N),N+=4),e.type===Qe.VIDEO){let te=0;for(;te<L;){const re=ee(r,K);if(K+=4,vR(o,r[K])){const me=r.subarray(K,K+re);ky(me,o?2:1,t+C/i,n)}K+=re,te+=re+4}}t+=D/i}}))})})}),n}function yR(t){if(!t)return!1;const e=t.indexOf("."),n=e<0?t:t.substring(0,e);return n==="hvc1"||n==="hev1"||n==="dvh1"||n==="dvhe"}function vR(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function ky(t,e,n,r){const i=Ly(t);let s=0;s+=e;let o=0,a=0,l=0;for(;s<i.length;){o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);const u=i.length-s;let c=s;if(a<u)s+=a;else if(a>u){P.error(`Malformed SEI payload. ${a} is too small, only ${u} bytes left to parse.`);break}if(o===4){if(i[c++]===181){const d=wy(i,c);if(c+=2,d===49){const h=ee(i,c);if(c+=4,h===1195456820){const p=i[c++];if(p===3){const m=i[c++],y=31&m,g=64&m,v=g?2+y*3:0,x=new Uint8Array(v);if(g){x[0]=m;for(let T=1;T<v;T++)x[T]=i[c++]}r.push({type:p,payloadType:o,pts:n,bytes:x})}}}}}else if(o===5&&a>16){const f=[];for(let p=0;p<16;p++){const m=i[c++].toString(16);f.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&f.push("-")}const d=a-16,h=new Uint8Array(d);for(let p=0;p<d;p++)h[p]=i[c++];r.push({payloadType:o,pts:n,uuid:f.join(""),userData:fn(h),userDataBytes:h})}}}function Ly(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const i=e-n.length,s=new Uint8Array(i);let o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=t[o];return s}function xR(t){const e=t[0];let n="",r="",i=0,s=0,o=0,a=0,l=0,u=0;if(e===0){for(;Oe(t.subarray(u,u+1))!=="\0";)n+=Oe(t.subarray(u,u+1)),u+=1;for(n+=Oe(t.subarray(u,u+1)),u+=1;Oe(t.subarray(u,u+1))!=="\0";)r+=Oe(t.subarray(u,u+1)),u+=1;r+=Oe(t.subarray(u,u+1)),u+=1,i=ee(t,12),s=ee(t,16),a=ee(t,20),l=ee(t,24),u=28}else if(e===1){u+=4,i=ee(t,u),u+=4;const f=ee(t,u);u+=4;const d=ee(t,u);for(u+=4,o=2**32*f+d,UC(o)||(o=Number.MAX_SAFE_INTEGER,P.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=ee(t,u),u+=4,l=ee(t,u),u+=4;Oe(t.subarray(u,u+1))!=="\0";)n+=Oe(t.subarray(u,u+1)),u+=1;for(n+=Oe(t.subarray(u,u+1)),u+=1;Oe(t.subarray(u,u+1))!=="\0";)r+=Oe(t.subarray(u,u+1)),u+=1;r+=Oe(t.subarray(u,u+1)),u+=1}const c=t.subarray(u,t.byteLength);return{schemeIdUri:n,value:r,timeScale:i,presentationTime:o,presentationTimeDelta:s,eventDuration:a,id:l,payload:c}}function SR(t,...e){const n=e.length;let r=8,i=n;for(;i--;)r+=e[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(t,4),i=0,r=8;i<n;i++)s.set(e[i],r),r+=e[i].byteLength;return s}function ER(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,i;if(e){r=1,i=new Uint8Array(e.length*16);for(let a=0;a<e.length;a++){const l=e[a];if(l.byteLength!==16)throw new RangeError("Invalid key");i.set(l,a*16)}}else r=0,i=new Uint8Array;let s;r>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),SR([112,115,115,104],new Uint8Array([r,0,0,0]),t,s,i,o,n||new Uint8Array)}function TR(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},n=new DataView(t),r=n.getUint32(0);if(t.byteLength!==r&&r>44||n.getUint32(4)!==1886614376||(e.version=n.getUint32(8)>>>24,e.version>1))return null;e.systemId=nn.hexDump(new Uint8Array(t,12,16));const s=n.getUint32(28);if(e.version===0){if(r-32<s)return null;e.data=new Uint8Array(t,32,s)}else if(e.version===1){e.kids=[];for(let o=0;o<s;o++)e.kids.push(new Uint8Array(t,32+o*16,16))}return e}let fo={};class Ea{static clearKeyUriToKeyIdMap(){fo={}}constructor(e,n,r,i=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case ct.FAIRPLAY:case ct.WIDEVINE:case ct.PLAYREADY:case ct.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&P.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=wR(e);return new Ea(this.method,this.uri,"identity",this.keyFormatVersions,r)}const n=KC(this.uri);if(n)switch(this.keyFormat){case ct.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case ct.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=ER(r,null,n);const i=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),s=String.fromCharCode.apply(null,Array.from(i)),o=s.substring(s.indexOf("<"),s.length),u=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(u){const c=u.childNodes[0]?u.childNodes[0].nodeValue:u.getAttribute("VALUE");if(c){const f=Vf(c).subarray(0,16);WC(f),this.keyId=f}}break}default:{let r=n.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=fo[this.uri];if(!r){const i=Object.keys(fo).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),fo[this.uri]=r}this.keyId=r}return this}}function wR(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}function Yf(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const Zh={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function CR(t,e,n=!0){var r;const i=Yf(n);return(r=i==null?void 0:i.isTypeSupported(xc(t,e)))!=null?r:!1}function xc(t,e){return`${e}/mp4;codecs="${t}"`}function ep(t){return t.split(",").reduce((e,n)=>{const r=Zh.video[n];return r?(r*2+e)/(e?3:2):(Zh.audio[n]+e)/(e?2:1)},0)}const Zl={};function RR(t,e=!0){if(Zl[t])return Zl[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let r=0;r<n.length;r++)if(CR(n[r],"audio",e))return Zl[t]=n[r],n[r];return t}const AR=/flac|opus/i;function Sc(t,e=!0){return t.replace(AR,n=>RR(n.toLowerCase(),e))}function tp(t,e){return t&&t!=="mp4a"?t:e}var Tn={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},fe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function kR(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function by(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){P.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){P.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}n==="disabled"&&(t.mode=n)}function Wi(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)t.removeCue(t.cues[n]);e==="disabled"&&(t.mode=e)}function np(t,e,n,r){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=bR(t.cues,e,n);for(let o=0;o<s.length;o++)(!r||r(s[o]))&&t.removeCue(s[o])}i==="disabled"&&(t.mode=i)}function LR(t,e){if(e<t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,i=n;for(;r<=i;){const s=Math.floor((i+r)/2);if(e<t[s].startTime)i=s-1;else if(e>t[s].startTime&&r<n)r=s+1;else return s}return t[r].startTime-e<e-t[i].startTime?r:i}function bR(t,e,n){const r=[],i=LR(t,e);if(i>-1)for(let s=i,o=t.length;s<o;s++){const a=t[s];if(a.startTime>=e&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}function Bo(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}var _s={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};function _R(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}(()=>{const t=_R();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();const rp=["NONE","TYPE-0","TYPE-1",null],IR=["SDR","PQ","HLG"];var is={No:"",Yes:"YES",v2:"v2"};function PR(t,e){const{canSkipUntil:n,canSkipDateRanges:r,endSN:i}=t,s=e!==void 0?e-i:0;return n&&s<n?r?is.v2:is.Yes:is.No}class ip{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class Ta{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return sp(this._audioGroups,e)}hasSubtitleGroup(e){return sp(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function sp(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function eu(t,e){const n=e.startPTS;if(ne(n)){let r=0,i;e.sn>t.sn?(r=n-t.start,i=t):(r=t.start-n,i=e),i.duration!==r&&(i.duration=r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function _y(t,e,n,r,i,s){r-n<=0&&(P.warn("Fragment should have a positive duration",e),r=n+e.duration,s=i+e.duration);let a=n,l=r;const u=e.startPTS,c=e.endPTS;if(ne(u)){const y=Math.abs(u-n);ne(e.deltaPTS)?e.deltaPTS=Math.max(y,e.deltaPTS):e.deltaPTS=y,a=Math.max(n,u),n=Math.min(n,u),i=Math.min(i,e.startDTS),l=Math.min(r,c),r=Math.max(r,c),s=Math.max(s,e.endDTS)}const f=n-e.start;e.start!==0&&(e.start=n),e.duration=r-e.start,e.startPTS=n,e.maxStartPTS=a,e.startDTS=i,e.endPTS=r,e.minEndPTS=l,e.endDTS=s;const d=e.sn;if(!t||d<t.startSN||d>t.endSN)return 0;let h;const p=d-t.startSN,m=t.fragments;for(m[p]=e,h=p;h>0;h--)eu(m[h],m[h-1]);for(h=p;h<m.length-1;h++)eu(m[h],m[h+1]);return t.fragmentHint&&eu(m[m.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,f}function DR(t,e){let n=null;const r=t.fragments;for(let l=r.length-1;l>=0;l--){const u=r[l].initSegment;if(u){n=u;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let i=0,s;if(FR(t,e,(l,u)=>{l.relurl&&(i=l.cc-u.cc),ne(l.startPTS)&&ne(l.endPTS)&&(u.start=u.startPTS=l.startPTS,u.startDTS=l.startDTS,u.maxStartPTS=l.maxStartPTS,u.endPTS=l.endPTS,u.endDTS=l.endDTS,u.minEndPTS=l.minEndPTS,u.duration=l.endPTS-l.startPTS,u.duration&&(s=u),e.PTSKnown=e.alignedSliding=!0),u.elementaryStreams=l.elementaryStreams,u.loader=l.loader,u.stats=l.stats,l.initSegment&&(u.initSegment=l.initSegment,n=l.initSegment)}),n&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(u=>{var c;u&&(!u.initSegment||u.initSegment.relurl===((c=n)==null?void 0:c.relurl))&&(u.initSegment=n)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){P.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=OR(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const o=e.fragments;if(i){P.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<o.length;l++)o[l].cc+=i}e.skippedSegments&&(e.startCC=e.fragments[0].cc),NR(t.partList,e.partList,(l,u)=>{u.elementaryStreams=l.elementaryStreams,u.stats=l.stats}),s?_y(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):Iy(t,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const a=e.advancedDateTime;if(e.advanced&&a){const l=e.edge;e.driftStart||(e.driftStartTime=a,e.driftStart=l),e.driftEndTime=a,e.driftEnd=l}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function OR(t,e,n){const r=Ze({},t);return n&&n.forEach(i=>{delete r[i]}),Object.keys(e).forEach(i=>{const s=new GC(e[i].attr,r[i]);s.isValid?r[i]=s:P.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),r}function NR(t,e,n){if(t&&e){let r=0;for(let i=0,s=t.length;i<=s;i++){const o=t[i],a=e[i+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}function FR(t,e,n){const r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=i;u<=s;u++){const c=l[o+u];let f=a[u];r&&!f&&u<r&&(f=e.fragments[u]=c),c&&f&&n(c,f)}}function Iy(t,e){const n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||Ec(e,r[n].start)}function Ec(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function MR(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const s=r[r.length-1].duration*1e3;s<n&&(n=s)}}else n/=2;return Math.round(n)}function UR(t,e,n){if(!(t!=null&&t.details))return null;const r=t.details;let i=r.fragments[e-r.startSN];return i||(i=r.fragmentHint,i&&i.sn===e)?i:e<r.startSN&&n&&n.sn===e?n:null}function op(t,e,n){var r;return t!=null&&t.details?Py((r=t.details)==null?void 0:r.partList,e,n):null}function Py(t,e,n){if(t)for(let r=t.length;r--;){const i=t[r];if(i.index===n&&i.fragment.sn===e)return i}return null}function BR(t){t.forEach((e,n)=>{const{details:r}=e;r!=null&&r.fragments&&r.fragments.forEach(i=>{i.level=n})})}function wa(t){switch(t.details){case G.FRAG_LOAD_TIMEOUT:case G.KEY_LOAD_TIMEOUT:case G.LEVEL_LOAD_TIMEOUT:case G.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ap(t,e){const n=wa(e);return t.default[`${n?"timeout":"error"}Retry`]}function qf(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function lp(t){return Et(Et({},t),{errorRetry:null,timeoutRetry:null})}function Ca(t,e,n,r){if(!t)return!1;const i=r==null?void 0:r.code,s=e<t.maxNumRetry&&($R(i)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,s):s}function $R(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const Dy={search:function(t,e){let n=0,r=t.length-1,i=null,s=null;for(;n<=r;){i=(n+r)/2|0,s=t[i];const o=e(s);if(o>0)n=i+1;else if(o<0)r=i-1;else return s}return null}};function jR(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!ne(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;n=n||0;for(let s=0;s<t.length;++s){const o=t[s];if(zR(e,n,o))return o}return null}function Ra(t,e,n=0,r=0){let i=null;if(t){i=e[t.sn-e[0].sn+1]||null;const o=t.endDTS-n;o>0&&o<15e-7&&(n+=15e-7)}else n===0&&e[0].start===0&&(i=e[0]);if(i&&(!t||t.level===i.level)&&Tc(n,r,i)===0)return i;const s=Dy.search(e,Tc.bind(null,n,r));return s&&(s!==t||!i)?s:i}function Tc(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function zR(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function GR(t,e){return Dy.search(t,n=>n.cc<e?1:n.cc>e?-1:0)}var Ge={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Bt={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class HR{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=P.log.bind(P,"[info]:"),this.warn=P.warn.bind(P,"[warning]:"),this.error=P.error.bind(P,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.ERROR,this.onError,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.ERROR,this.onError,this),e.off(S.ERROR,this.onErrorOut,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===fe.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r,i;if(n.fatal)return;const s=this.hls,o=n.context;switch(n.details){case G.FRAG_LOAD_ERROR:case G.FRAG_LOAD_TIMEOUT:case G.KEY_LOAD_ERROR:case G.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case G.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction={action:Ge.DoNothing,flags:Bt.None};return}case G.FRAG_GAP:case G.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=Ge.SendAlternateToPenaltyBox;return}case G.LEVEL_EMPTY_ERROR:case G.LEVEL_PARSING_ERROR:{var a,l;const u=n.parent===fe.MAIN?n.level:s.loadLevel;n.details===G.LEVEL_EMPTY_ERROR&&((a=n.context)!=null&&(l=a.levelDetails)!=null&&l.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,u):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,u))}return;case G.LEVEL_LOAD_ERROR:case G.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,o.level));return;case G.AUDIO_TRACK_LOAD_ERROR:case G.AUDIO_TRACK_LOAD_TIMEOUT:case G.SUBTITLE_LOAD_ERROR:case G.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const u=s.levels[s.loadLevel];if(u&&(o.type===Tn.AUDIO_TRACK&&u.hasAudioGroup(o.groupId)||o.type===Tn.SUBTITLE_TRACK&&u.hasSubtitleGroup(o.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,s.loadLevel),n.errorAction.action=Ge.SendAlternateToPenaltyBox,n.errorAction.flags=Bt.MoveAllAlternatesMatchingHost;return}}return;case G.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=s.levels[s.loadLevel],c=u==null?void 0:u.attrs["HDCP-LEVEL"];c?n.errorAction={action:Ge.SendAlternateToPenaltyBox,flags:Bt.MoveAllAlternatesMatchingHDCP,hdcpLevel:c}:this.keySystemError(n)}return;case G.BUFFER_ADD_CODEC_ERROR:case G.REMUX_ALLOC_ERROR:case G.BUFFER_APPEND_ERROR:n.errorAction=this.getLevelSwitchAction(n,(i=n.level)!=null?i:s.loadLevel);return;case G.INTERNAL_EXCEPTION:case G.BUFFER_APPENDING_ERROR:case G.BUFFER_FULL_ERROR:case G.LEVEL_SWITCH_ERROR:case G.BUFFER_STALLED_ERROR:case G.BUFFER_SEEK_OVER_HOLE:case G.BUFFER_NUDGE_ON_STALL:n.errorAction={action:Ge.DoNothing,flags:Bt.None};return}n.type===ue.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,i=ap(r.config.playlistLoadPolicy,e),s=this.playlistError++;if(Ca(i,s,wa(e),e.response))return{action:Ge.RetryRequest,flags:Bt.None,retryConfig:i,retryCount:s};const a=this.getLevelSwitchAction(e,n);return i&&(a.retryConfig=i,a.retryCount=s),a}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),i=n.levels[r],{fragLoadPolicy:s,keyLoadPolicy:o}=n.config,a=ap(e.details.startsWith("key")?o:s,e),l=n.levels.reduce((c,f)=>c+f.fragmentError,0);if(i&&(e.details!==G.FRAG_GAP&&i.fragmentError++,Ca(a,l,wa(e),e.response)))return{action:Ge.RetryRequest,flags:Bt.None,retryConfig:a,retryCount:l};const u=this.getLevelSwitchAction(e,r);return a&&(u.retryConfig=a,u.retryCount=l),u}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const i=this.hls.levels[n];if(i){var s,o;const u=e.details;i.loadError++,u===G.BUFFER_APPEND_ERROR&&i.fragmentError++;let c=-1;const{levels:f,loadLevel:d,minAutoLevel:h,maxAutoLevel:p}=r;r.autoLevelEnabled||(r.loadLevel=-1);const m=(s=e.frag)==null?void 0:s.type,g=(m===fe.AUDIO&&u===G.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===G.BUFFER_ADD_CODEC_ERROR||u===G.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:k})=>i.audioCodec!==k),x=e.sourceBufferName==="video"&&(u===G.BUFFER_ADD_CODEC_ERROR||u===G.BUFFER_APPEND_ERROR)&&f.some(({codecSet:k,audioCodec:w})=>i.codecSet!==k&&i.audioCodec===w),{type:T,groupId:E}=(o=e.context)!=null?o:{};for(let k=f.length;k--;){const w=(k+d)%f.length;if(w!==d&&w>=h&&w<=p&&f[w].loadError===0){var a,l;const A=f[w];if(u===G.FRAG_GAP&&e.frag){const F=f[w].details;if(F){const I=Ra(e.frag,F.fragments,e.frag.start);if(I!=null&&I.gap)continue}}else{if(T===Tn.AUDIO_TRACK&&A.hasAudioGroup(E)||T===Tn.SUBTITLE_TRACK&&A.hasSubtitleGroup(E))continue;if(m===fe.AUDIO&&(a=i.audioGroups)!=null&&a.some(F=>A.hasAudioGroup(F))||m===fe.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(F=>A.hasSubtitleGroup(F))||g&&i.audioCodec===A.audioCodec||!g&&i.audioCodec!==A.audioCodec||x&&i.codecSet===A.codecSet)continue}c=w;break}}if(c>-1&&r.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:Ge.SendAlternateToPenaltyBox,flags:Bt.None,nextAutoLevel:c}}return{action:Ge.SendAlternateToPenaltyBox,flags:Bt.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case Ge.DoNothing:break;case Ge.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==G.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:s,nextAutoLevel:o}=r;switch(i){case Bt.None:this.switchLevel(e,o);break;case Bt.MoveAllAlternatesMatchingHDCP:s&&(n.maxHdcpLevel=rp[rp.indexOf(s)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,o)}switchLevel(e,n){n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class Oy{constructor(e,n){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=P.log.bind(P,`${n}:`),this.warn=P.warn.bind(P,`${n}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n){const r=n==null?void 0:n.renditionReports;if(r){let i=-1;for(let s=0;s<r.length;s++){const o=r[s];let a;try{a=new self.URL(o.URI,n.url).href}catch(l){P.warn(`Could not construct new URL for Rendition Report: ${l}`),a=o.URI||""}if(a===e){i=s;break}else a===e.substring(0,a.length)&&(i=s)}if(i!==-1){const s=r[i],o=parseInt(s["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let a=parseInt(s["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const l=Math.min(n.age-n.partTarget,n.targetduration);a>=0&&l>n.partTarget&&(a+=1)}return new ip(o,a>=0?a:void 0,is.No)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,n,r){const{details:i,stats:s}=n,o=self.performance.now(),a=s.loading.first?Math.max(0,o-s.loading.first):0;if(i.advancedDateTime=Date.now()-a,i.live||r!=null&&r.live){if(i.reloaded(r),r&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),r&&i.fragments.length>0&&DR(r,i),!this.canLoad||!i.live)return;let l,u,c;if(i.canBlockReload&&i.endSN&&i.advanced){const y=this.hls.config.lowLatencyMode,g=i.lastPartSn,v=i.endSN,x=i.lastPartIndex,T=x!==-1,E=g===v,k=y?0:x;T?(u=E?v+1:g,c=E?k:x+1):u=v+1;const w=i.age,A=w+i.ageHeader;let F=Math.min(A-i.partTarget,i.targetduration*1.5);if(F>0){if(r&&F>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${F} with playlist age: ${i.age}`),F=0;else{const I=Math.floor(F/i.targetduration);if(u+=I,c!==void 0){const H=Math.round(F%i.targetduration/i.partTarget);c+=H}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${w.toFixed(2)}s goal: ${F} skip sn ${I} to part ${c}`)}i.tuneInGoal=F}if(l=this.getDeliveryDirectives(i,n.deliveryDirectives,u,c),y||!E){this.loadPlaylist(l);return}}else(i.canBlockReload||i.canSkipUntil)&&(l=this.getDeliveryDirectives(i,n.deliveryDirectives,u,c));const f=this.hls.mainForwardBufferInfo,d=f?f.end-f.len:0,h=(i.edge-d)*1e3,p=MR(i,h);i.updated&&o>this.requestScheduled+p&&(this.requestScheduled=s.loading.start),u!==void 0&&i.canBlockReload?this.requestScheduled=s.loading.first+p-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=p);let m=this.requestScheduled-o;m=Math.max(0,m),this.log(`reload live playlist ${e} in ${Math.round(m)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),m)}else this.clearTimer()}getDeliveryDirectives(e,n,r,i){let s=PR(e,r);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,i=n.part,s=is.No),new ip(r,i,s)}checkRetry(e){const n=e.details,r=wa(e),i=e.errorAction,{action:s,retryCount:o=0,retryConfig:a}=i||{},l=!!i&&!!a&&(s===Ge.RetryRequest||!i.resolved&&s===Ge.SendAlternateToPenaltyBox);if(l){var u;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(r&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const c=qf(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${c}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}class Nr{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class VR{constructor(e,n,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Nr(e),this.fast_=new Nr(n),this.defaultTTFB_=i,this.ttfb_=new Nr(e)}update(e,n){const{slow_:r,fast_:i,ttfb_:s}=this;r.halfLife!==e&&(this.slow_=new Nr(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==n&&(this.fast_=new Nr(n,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Nr(e,s.getEstimate(),s.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,i=e/1e3,s=r/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Ny={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},up={};function WR(t,e,n,r,i,s){const o=t.audioCodec?t.audioGroups:null,a=s==null?void 0:s.audioCodec,l=s==null?void 0:s.channels,u=l?parseInt(l):a?1/0:2;let c=null;if(o!=null&&o.length)try{o.length===1&&o[0]?c=e.groups[o[0]].channels:c=o.reduce((f,d)=>{if(d){const h=e.groups[d];if(!h)throw new Error(`Audio track group ${d} not found`);Object.keys(h.channels).forEach(p=>{f[p]=(f[p]||0)+h.channels[p]})}return f},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(i,8e6))||!!c&&ne(u)&&Object.keys(c).some(f=>parseInt(f)>u)}function KR(t,e,n){const r=t.videoCodec,i=t.audioCodec;if(!r||!i||!n)return Promise.resolve(Ny);const s={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},o=t.videoRange;o!=="SDR"&&(s.transferFunction=o.toLowerCase());const a=r.split(",").map(l=>({type:"media-source",video:Et(Et({},s),{},{contentType:xc(l,"video")})}));return i&&t.audioGroups&&t.audioGroups.forEach(l=>{var u;l&&((u=e.groups[l])==null||u.tracks.forEach(c=>{if(c.groupId===l){const f=c.channels||"",d=parseFloat(f);ne(d)&&d>2&&a.push.apply(a,i.split(",").map(h=>({type:"media-source",audio:{contentType:xc(h,"audio"),channels:""+d}})))}}))}),Promise.all(a.map(l=>{const u=YR(l);return up[u]||(up[u]=n.decodingInfo(l))})).then(l=>({supported:!l.some(u=>!u.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function YR(t){const{audio:e,video:n}=t,r=n||e;if(r){const i=r.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${i}_${Math.ceil(n.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function qR(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function XR(t,e){let n=!1,r=[];return t&&(n=t!=="SDR",r=[t]),e&&(r=e.allowedVideoRanges||IR.slice(0),n=e.preferHDR!==void 0?e.preferHDR:qR(),n?r=r.filter(i=>i!=="SDR"):r=["SDR"]),{preferHDR:n,allowedVideoRanges:r}}function QR(t,e,n,r,i){const s=Object.keys(t),o=r==null?void 0:r.channels,a=r==null?void 0:r.audioCodec,l=o&&parseInt(o)===2;let u=!0,c=!1,f=1/0,d=1/0,h=1/0,p=0,m=[];const{preferHDR:y,allowedVideoRanges:g}=XR(e,i);for(let E=s.length;E--;){const k=t[s[E]];u=k.channels[2]>0,f=Math.min(f,k.minHeight),d=Math.min(d,k.minFramerate),h=Math.min(h,k.minBitrate);const w=g.filter(A=>k.videoRanges[A]>0);w.length>0&&(c=!0,m=w)}f=ne(f)?f:0,d=ne(d)?d:0;const v=Math.max(1080,f),x=Math.max(30,d);return h=ne(h)?h:n,n=Math.max(h,n),c||(e=void 0,m=[]),{codecSet:s.reduce((E,k)=>{const w=t[k];if(k===E)return E;if(w.minBitrate>n)return mn(k,`min bitrate of ${w.minBitrate} > current estimate of ${n}`),E;if(!w.hasDefaultAudio)return mn(k,"no renditions with default or auto-select sound found"),E;if(a&&k.indexOf(a.substring(0,4))%5!==0)return mn(k,`audio codec preference "${a}" not found`),E;if(o&&!l){if(!w.channels[o])return mn(k,`no renditions with ${o} channel sound found (channels options: ${Object.keys(w.channels)})`),E}else if((!a||l)&&u&&w.channels[2]===0)return mn(k,"no renditions with stereo sound found"),E;return w.minHeight>v?(mn(k,`min resolution of ${w.minHeight} > maximum of ${v}`),E):w.minFramerate>x?(mn(k,`min framerate of ${w.minFramerate} > maximum of ${x}`),E):m.some(A=>w.videoRanges[A]>0)?w.maxScore<p?(mn(k,`max score of ${w.maxScore} < selected max of ${p}`),E):E&&(ep(k)>=ep(E)||w.fragmentError>t[E].fragmentError)?E:(p=w.maxScore,k):(mn(k,`no variants with VIDEO-RANGE of ${JSON.stringify(m)} found`),E)},void 0),videoRanges:m,preferHDR:y,minFramerate:d,minBitrate:h}}function mn(t,e){P.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function JR(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const i=n.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function ZR(t,e,n,r){return t.slice(n,r+1).reduce((i,s)=>{if(!s.codecSet)return i;const o=s.audioGroups;let a=i[s.codecSet];a||(i[s.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,s.frameRate),a.maxScore=Math.max(a.maxScore,s.score),a.fragmentError+=s.fragmentError,a.videoRanges[s.videoRange]=(a.videoRanges[s.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const c=e.groups[u];a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?c.hasDefault:c.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(c.channels).forEach(f=>{a.channels[f]=(a.channels[f]||0)+c.channels[f]})}),i},{})}function ln(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(li(t,i,n))return r}return-1}function li(t,e,n){const{groupId:r,name:i,lang:s,assocLang:o,characteristics:a,default:l}=t,u=t.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===o)&&(l===void 0||e.default===l)&&(u===void 0||e.forced===u)&&(a===void 0||eA(a,e.characteristics))&&(n===void 0||n(t,e))}function eA(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(i=>r.indexOf(i)===-1)}function Fr(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function tA(t,e,n,r,i){const s=e[r],a=e.reduce((d,h,p)=>{const m=h.uri;return(d[m]||(d[m]=[])).push(p),d},{})[s.uri];a.length>1&&(r=Math.max.apply(Math,a));const l=s.videoRange,u=s.frameRate,c=s.codecSet.substring(0,4),f=cp(e,r,d=>{if(d.videoRange!==l||d.frameRate!==u||d.codecSet.substring(0,4)!==c)return!1;const h=d.audioGroups,p=n.filter(m=>!h||h.indexOf(m.groupId)!==-1);return ln(t,p,i)>-1});return f>-1?f:cp(e,r,d=>{const h=d.audioGroups,p=n.filter(m=>!h||h.indexOf(m.groupId)!==-1);return ln(t,p,i)>-1})}function cp(t,e,n){for(let r=e;r;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}class nA{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:n,partCurrent:r,hls:i}=this,{autoLevelEnabled:s,media:o}=i;if(!n||!o)return;const a=performance.now(),l=r?r.stats:n.stats,u=r?r.duration:n.duration,c=a-l.loading.start,f=i.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||n.level<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||o.paused||!o.playbackRate||!o.readyState)return;const d=i.mainForwardBufferInfo;if(d===null)return;const h=this.bwEstimator.getEstimateTTFB(),p=Math.abs(o.playbackRate);if(c<=Math.max(h,1e3*(u/(p*2))))return;const m=d.len/p,y=l.loading.first?l.loading.first-l.loading.start:-1,g=l.loaded&&y>-1,v=this.getBwEstimate(),x=i.levels,T=x[n.level],E=l.total||Math.max(l.loaded,Math.round(u*T.averageBitrate/8));let k=g?c-y:c;k<1&&g&&(k=Math.min(c,l.loaded*8/v));const w=g?l.loaded*1e3/k:0,A=w?(E-l.loaded)/w:E*8/v+h/1e3;if(A<=m)return;const F=w?w*8:v;let I=Number.POSITIVE_INFINITY,H;for(H=n.level-1;H>f;H--){const z=x[H].maxBitrate;if(I=this.getTimeToLoadFrag(h/1e3,F,u*z,!x[H].details),I<m)break}if(I>=A||I>u*10)return;i.nextLoadLevel=i.nextAutoLevel=H,g?this.bwEstimator.sample(c-Math.min(h,y),l.loaded):this.bwEstimator.sampleTTFB(c);const U=x[H].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>U&&this.resetEstimator(U),this.clearTimer(),P.warn(`[abr] Fragment ${n.sn}${r?" part "+r.index:""} of level ${n.level} is loading too slowly;
      Time to underbuffer: ${m.toFixed(3)} s
      Estimated load time for current fragment: ${A.toFixed(3)} s
      Estimated load time for down switch fragment: ${I.toFixed(3)} s
      TTFB estimate: ${y|0} ms
      Current BW estimate: ${ne(v)?v|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${H} @ ${U|0} bps`),i.trigger(S.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(P.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new VR(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(S.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=n.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case G.BUFFER_ADD_CODEC_ERROR:case G.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case G.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:i,partCurrent:s}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const o=performance.now(),a=s?s.stats:r.stats,l=o-a.loading.start,u=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&u>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(f,u),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,n,r,i){const s=e+r/n,o=i?this.lastLevelLoadSec:0;return s+o}onLevelLoaded(e,n){const r=this.hls.config,{loading:i}=n.stats,s=i.end-i.start;ne(s)&&(this.lastLevelLoadSec=s/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(e,{frag:n,part:r}){const i=r?r.stats:n.stats;if(n.type===fe.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=r?r.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+i.loaded,l=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(n.bitrateTest){const s={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(S.FRAG_BUFFERED,s),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:i}=n,s=i!=null&&i.stats.loaded?i.stats:r.stats;if(s.aborted||this.ignoreFragment(r))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==fe.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(r,n,e,0,i,1,1);if(s>-1)return s;const o=this.hls.firstLevel,a=Math.min(Math.max(o,n),e);return P.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,s)&&o[e].loadError<=o[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this,{maxAutoLevel:i,config:s,minAutoLevel:o}=r,a=n?n.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let c=s.abrBandWidthFactor,f=s.abrBandWidthUpFactor;if(u){const y=this.findBestLevel(l,o,i,u,0,c,f);if(y>=0)return y}let d=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay;if(!u){const y=this.bitrateTestDelay;y&&(d=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-y,P.info(`[abr] bitrate test took ${Math.round(1e3*y)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),c=f=1)}const h=this.findBestLevel(l,o,i,u,d,c,f);if(P.info(`[abr] ${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;const p=r.levels[o],m=r.levels[r.loadLevel];return(p==null?void 0:p.bitrate)<(m==null?void 0:m.bitrate)?o:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,i,s,o,a){var l;const u=i+s,c=this.lastLoadedFragLevel,f=c===-1?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:p,allAudioTracks:m,loadLevel:y,config:g}=this.hls;if(p.length===1)return 0;const v=p[f],x=!!(v!=null&&(l=v.details)!=null&&l.live),T=y===-1||c===-1;let E,k="SDR",w=(v==null?void 0:v.frameRate)||0;const{audioPreference:A,videoPreference:F}=g,I=this.audioTracksByGroup||(this.audioTracksByGroup=JR(m));if(T){if(this.firstSelection!==-1)return this.firstSelection;const D=this.codecTiers||(this.codecTiers=ZR(p,I,n,r)),W=QR(D,k,e,A,F),{codecSet:L,videoRanges:b,minFramerate:R,minBitrate:C,preferHDR:j}=W;E=L,k=j?b[b.length-1]:b[0],w=R,e=Math.max(e,C),P.log(`[abr] picked start tier ${JSON.stringify(W)}`)}else E=v==null?void 0:v.codecSet,k=v==null?void 0:v.videoRange;const H=h?h.duration:d?d.duration:0,U=this.bwEstimator.getEstimateTTFB()/1e3,z=[];for(let D=r;D>=n;D--){var O;const W=p[D],L=D>f;if(!W)continue;if(g.useMediaCapabilities&&!W.supportedResult&&!W.supportedPromise){const X=navigator.mediaCapabilities;typeof(X==null?void 0:X.decodingInfo)=="function"&&WR(W,I,k,w,e,A)?(W.supportedPromise=KR(W,I,X),W.supportedPromise.then(te=>{if(!this.hls)return;W.supportedResult=te;const re=this.hls.levels,me=re.indexOf(W);te.error?P.warn(`[abr] MediaCapabilities decodingInfo error: "${te.error}" for level ${me} ${JSON.stringify(te)}`):te.supported||(P.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${me} ${JSON.stringify(te)}`),me>-1&&re.length>1&&(P.log(`[abr] Removing unsupported level ${me}`),this.hls.removeLevel(me)))})):W.supportedResult=Ny}if(E&&W.codecSet!==E||k&&W.videoRange!==k||L&&w>W.frameRate||!L&&w>0&&w<W.frameRate||W.supportedResult&&!((O=W.supportedResult.decodingInfoResults)!=null&&O[0].smooth)){z.push(D);continue}const b=W.details,R=(h?b==null?void 0:b.partTarget:b==null?void 0:b.averagetargetduration)||H;let C;L?C=a*e:C=o*e;const j=H&&i>=H*2&&s===0?p[D].averageBitrate:p[D].maxBitrate,N=this.getTimeToLoadFrag(U,C,j*R,b===void 0);if(C>=j&&(D===c||W.loadError===0&&W.fragmentError===0)&&(N<=U||!ne(N)||x&&!this.bitrateTestDelay||N<u)){const X=this.forcedAutoLevel;return D!==y&&(X===-1||X!==y)&&(z.length&&P.trace(`[abr] Skipped level(s) ${z.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${p[z[0]].codecs}" ${p[z[0]].videoRange}; not compatible with "${v.codecs}" ${k}`),P.info(`[abr] switch candidate:${f}->${D} adjustedbw(${Math.round(C)})-bitrate=${Math.round(C-j)} ttfb:${U.toFixed(1)} avgDuration:${R.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${N.toFixed(1)} firstSelection:${T} codecSet:${E} videoRange:${k} hls.loadLevel:${y}`)),T&&(this.firstSelection=D),D}}return-1}set nextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls,i=Math.min(Math.max(e,r),n);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class rA{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var Ht={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};const iA={length:0,start:()=>0,end:()=>0};class $e{static isBuffered(e,n){try{if(e){const r=$e.getBuffered(e);for(let i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}}catch{}return!1}static bufferInfo(e,n,r){try{if(e){const i=$e.getBuffered(e),s=[];let o;for(o=0;o<i.length;o++)s.push({start:i.start(o),end:i.end(o)});return this.bufferedInfo(s,n,r)}}catch{}return{len:0,start:n,end:n,nextStart:void 0}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.sort(function(u,c){const f=u.start-c.start;return f||c.end-u.end});let i=[];if(r)for(let u=0;u<e.length;u++){const c=i.length;if(c){const f=i[c-1].end;e[u].start-f<r?e[u].end>f&&(i[c-1].end=e[u].end):i.push(e[u])}else i.push(e[u])}else i=e;let s=0,o,a=n,l=n;for(let u=0;u<i.length;u++){const c=i[u].start,f=i[u].end;if(n+r>=c&&n<f)a=c,l=f,s=l-n;else if(n+r<c){o=c;break}}return{len:s,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(n){return P.log("failed to get media.buffered",n),iA}}}class Fy{constructor(e,n,r,i=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=ho(),this.buffering={audio:ho(),video:ho(),audiovideo:ho()},this.level=e,this.sn=n,this.id=r,this.size=i,this.part=s,this.partial=o}}function ho(){return{start:0,executeStart:0,executeEnd:0,end:0}}function $o(t,e){for(let r=0,i=t.length;r<i;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function sA(t,e,n){return!!(e&&(n.endCC>n.startCC||t&&t.cc<n.startCC))}function oA(t,e){const n=t.fragments,r=e.fragments;if(!r.length||!n.length){P.log("No fragments to align");return}const i=$o(n,r[0].cc);if(!i||i&&!i.startPTS){P.log("No frag in previous level to align on");return}return i}function fp(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function My(t,e){const n=e.fragments;for(let r=0,i=n.length;r<i;r++)fp(n[r],t);e.fragmentHint&&fp(e.fragmentHint,t),e.alignedSliding=!0}function aA(t,e,n){e&&(lA(t,n,e),!n.alignedSliding&&e&&Aa(n,e),!n.alignedSliding&&e&&!n.skippedSegments&&Iy(e,n))}function lA(t,e,n){if(sA(t,n,e)){const r=oA(n,e);r&&ne(r.start)&&(P.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),My(r.start,e))}}function Aa(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let i,s;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(i=$o(r,o),s=$o(n,o)),(!i||!s)&&(i=r[Math.floor(r.length/2)],s=$o(n,i.cc)||n[Math.floor(n.length/2)]);const a=i.programDateTime,l=s.programDateTime;if(!a||!l)return;const u=(l-a)/1e3-(s.start-i.start);My(u,t)}const dp=Math.pow(2,17);class uA{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new On({type:ue.NETWORK_ERROR,details:G.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(h=>h[0]==="GAP")){l(pp(e));return}else e.gap=!1;const u=this.loader=e.loader=s?new s(i):new o(i),c=hp(e),f=lp(i.fragLoadPolicy.default),d={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:dp};e.stats=u.stats,u.load(c,d,{onSuccess:(h,p,m,y)=>{this.resetLoader(e,u);let g=h.data;m.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(g.slice(0,16)),g=g.slice(16)),a({frag:e,part:null,payload:g,networkDetails:y})},onError:(h,p,m,y)=>{this.resetLoader(e,u),l(new On({type:ue.NETWORK_ERROR,details:G.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Et({url:r,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:m,stats:y}))},onAbort:(h,p,m)=>{this.resetLoader(e,u),l(new On({type:ue.NETWORK_ERROR,details:G.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:m,stats:h}))},onTimeout:(h,p,m)=>{this.resetLoader(e,u),l(new On({type:ue.NETWORK_ERROR,details:G.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:m,stats:h}))},onProgress:(h,p,m,y)=>{n&&n({frag:e,part:null,payload:m,networkDetails:y})}})})}loadPart(e,n,r){this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(pp(e,n));return}const u=this.loader=e.loader=s?new s(i):new o(i),c=hp(e,n),f=lp(i.fragLoadPolicy.default),d={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:dp};n.stats=u.stats,u.load(c,d,{onSuccess:(h,p,m,y)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,n);const g={frag:e,part:n,payload:h.data,networkDetails:y};r(g),a(g)},onError:(h,p,m,y)=>{this.resetLoader(e,u),l(new On({type:ue.NETWORK_ERROR,details:G.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:Et({url:c.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:m,stats:y}))},onAbort:(h,p,m)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,u),l(new On({type:ue.NETWORK_ERROR,details:G.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:m,stats:h}))},onTimeout:(h,p,m)=>{this.resetLoader(e,u),l(new On({type:ue.NETWORK_ERROR,details:G.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:m,stats:h}))}})})}updateStatsFromPart(e,n){const r=e.stats,i=n.stats,s=i.total;if(r.loaded+=i.loaded,s){const l=Math.round(e.duration/n.duration),u=Math.min(Math.round(r.loaded/s),l),f=(l-u)*Math.round(r.loaded/u);r.total=r.loaded+f}else r.total=Math.max(r.loaded,r.total);const o=r.loading,a=i.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function hp(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(ne(i)&&ne(s)){var o;let a=i,l=s;if(t.sn==="initSegment"&&((o=t.decryptdata)==null?void 0:o.method)==="AES-128"){const u=s-i;u%16&&(l=s+(16-u%16)),i!==0&&(r.resetIV=!0,a=i-16)}r.rangeStart=a,r.rangeEnd=l}return r}function pp(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:ue.MEDIA_ERROR,details:G.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new On(r)}class On extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class cA{constructor(e,n){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=n}decrypt(e,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e)}}class fA{constructor(e,n){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=n}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function dA(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?Tr(t,0,e-n):t}class hA{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=n.getUint32(i*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,i=r[0],s=r[1],o=r[2],a=r[3],l=this.invSubMix,u=l[0],c=l[1],f=l[2],d=l[3],h=new Uint32Array(256);let p=0,m=0,y=0;for(y=0;y<256;y++)y<128?h[y]=y<<1:h[y]=y<<1^283;for(y=0;y<256;y++){let g=m^m<<1^m<<2^m<<3^m<<4;g=g>>>8^g&255^99,e[p]=g,n[g]=p;const v=h[p],x=h[v],T=h[x];let E=h[g]*257^g*16843008;i[p]=E<<24|E>>>8,s[p]=E<<16|E>>>16,o[p]=E<<8|E>>>24,a[p]=E,E=T*16843009^x*65537^v*257^p*16843008,u[g]=E<<24|E>>>8,c[g]=E<<16|E>>>16,f[g]=E<<8|E>>>24,d[g]=E,p?(p=v^h[h[h[T^v]]],m^=h[h[m]]):p=m=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<n.length&&r;)r=n[i]===this.key[i],i++;if(r)return;this.key=n;const s=this.keySize=n.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const o=this.ksRows=(s+6+1)*4;let a,l;const u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),f=this.sBox,d=this.rcon,h=this.invSubMix,p=h[0],m=h[1],y=h[2],g=h[3];let v,x;for(a=0;a<o;a++){if(a<s){v=u[a]=n[a];continue}x=v,a%s===0?(x=x<<8|x>>>24,x=f[x>>>24]<<24|f[x>>>16&255]<<16|f[x>>>8&255]<<8|f[x&255],x^=d[a/s|0]<<24):s>6&&a%s===4&&(x=f[x>>>24]<<24|f[x>>>16&255]<<16|f[x>>>8&255]<<8|f[x&255]),u[a]=v=(u[a-s]^x)>>>0}for(l=0;l<o;l++)a=o-l,l&3?x=u[a]:x=u[a-4],l<4||a<=4?c[l]=x:c[l]=p[f[x>>>24]]^m[f[x>>>16&255]]^y[f[x>>>8&255]]^g[f[x&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const i=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],u=a[1],c=a[2],f=a[3],d=this.uint8ArrayToUint32Array_(r);let h=d[0],p=d[1],m=d[2],y=d[3];const g=new Int32Array(e),v=new Int32Array(g.length);let x,T,E,k,w,A,F,I,H,U,z,O,D,W;const L=this.networkToHostOrderSwap;for(;n<g.length;){for(H=L(g[n]),U=L(g[n+1]),z=L(g[n+2]),O=L(g[n+3]),w=H^s[0],A=O^s[1],F=z^s[2],I=U^s[3],D=4,W=1;W<i;W++)x=l[w>>>24]^u[A>>16&255]^c[F>>8&255]^f[I&255]^s[D],T=l[A>>>24]^u[F>>16&255]^c[I>>8&255]^f[w&255]^s[D+1],E=l[F>>>24]^u[I>>16&255]^c[w>>8&255]^f[A&255]^s[D+2],k=l[I>>>24]^u[w>>16&255]^c[A>>8&255]^f[F&255]^s[D+3],w=x,A=T,F=E,I=k,D=D+4;x=o[w>>>24]<<24^o[A>>16&255]<<16^o[F>>8&255]<<8^o[I&255]^s[D],T=o[A>>>24]<<24^o[F>>16&255]<<16^o[I>>8&255]<<8^o[w&255]^s[D+1],E=o[F>>>24]<<24^o[I>>16&255]<<16^o[w>>8&255]<<8^o[A&255]^s[D+2],k=o[I>>>24]<<24^o[w>>16&255]<<16^o[A>>8&255]<<8^o[F&255]^s[D+3],v[n]=L(x^h),v[n+1]=L(k^p),v[n+2]=L(E^m),v[n+3]=L(T^y),h=H,p=U,m=z,y=O,n=n+4}return v.buffer}}const pA=16;class Xf{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?dA(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r){return this.useSoftware?new Promise((i,s)=>{this.softwareDecrypt(new Uint8Array(e),n,r);const o=this.flush();o?i(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r)}softwareDecrypt(e,n,r){const{currentIV:i,currentResult:s,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=Ot(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;i&&(r=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new hA),l.expandKey(n);const u=s;return this.currentResult=l.decrypt(a.buffer,0,r),this.currentIV=Tr(a,-16).buffer,u||null}webCryptoDecrypt(e,n,r){const i=this.subtle;return(this.key!==n||!this.fastAesKey)&&(this.key=n,this.fastAesKey=new fA(i,n)),this.fastAesKey.expandKey().then(s=>i?(this.logOnce("WebCrypto AES decrypt"),new cA(i,new Uint8Array(r)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(P.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,n,r)))}onWebCryptoError(e,n,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%pA;return r!==e.length&&(n=Tr(e,0,r),this.remainderData=Tr(e,r)),n}logOnce(e){this.logEnabled&&(P.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const mA={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},q={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Uy extends rA{constructor(e,n,r,i,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=q.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=i,this.log=P.log.bind(P,`${i}:`),this.warn=P.warn.bind(P,`${i}:`),this.hls=e,this.fragmentLoader=new uA(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new Xf(e.config),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=q.STOPPED}_streamEnded(e,n){if(n.live||e.nextStart||!e.end||!this.media)return!1;const r=n.partList;if(r!=null&&r.length){const s=r[r.length-1];return $e.isBuffered(this.media,s.start+s.duration/2)}const i=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===q.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:n,media:r,mediaBuffer:i,state:s}=this,o=r?r.currentTime:0,a=$e.bufferInfo(i||r,o,e.maxBufferHole);if(this.log(`media seeking to ${ne(o)?o.toFixed(3):o}, state: ${s}`),this.state===q.ENDED)this.resetLoadingState();else if(n){const l=e.maxFragLookUpTolerance,u=n.start-l,c=n.start+n.duration+l;if(!a.len||c<a.start||u>a.end){const f=o>c;(o<u||f)&&(f&&n.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=q.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const i=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,n,r,i).then(s=>{if(!s)return;const o=this.state;if(this.fragContextChanged(e)){(o===q.FRAG_LOADING||!this.fragCurrent&&o===q.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=q.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(S.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===q.STOPPED||this.state===q.ERROR||(this.warn(s),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===Ht.APPENDING){const s=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,s),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength);this.reduceMaxBufferLength(a)&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===Ht.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const i={startOffset:e,endOffset:n,type:r};this.hls.trigger(S.BUFFER_FLUSHING,i)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{if(!r||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{payload:s}=r,o=e.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer).catch(l=>{throw i.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const u=self.performance.now();return i.trigger(S.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:u}}),r.payload=l,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===q.STOPPED||this.state===q.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state=q.IDLE,e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){var r,i,s,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.playlistType===fe.MAIN?"level":"track"} ${e.level} (frag:[${((r=e.startPTS)!=null?r:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${a?mA.toString($e.getBuffered(a)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==fe.SUBTITLE){const c=e.elementaryStreams;if(!Object.keys(c).some(f=>!!c[f])){this.state=q.IDLE;return}}const u=(l=this.levels)==null?void 0:l[e.level];u!=null&&u.fragmentError&&(this.log(`Resetting level fragment error count of ${u.fragmentError} on frag buffered`),u.fragmentError=0)}this.state=q.IDLE,a&&(!this.loadedmetadata&&e.type==fe.MAIN&&a.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:i,partsLoaded:s}=e,o=!s||s.length===0||s.some(l=>!l),a=new Fy(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,i){var s;const o=n==null?void 0:n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=q.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(c=>{if(!this.fragContextChanged(c.frag))return this.hls.trigger(S.KEY_LOADED,c),this.state===q.KEY_LOADING&&(this.state=q.IDLE),c}),this.hls.trigger(S.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const c=o.partList;if(c&&i){r>e.end&&o.fragmentHint&&(e=o.fragmentHint);const f=this.getNextPart(c,e,r);if(f>-1){const d=c[f];this.log(`Loading part sn: ${e.sn} p: ${d.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${f}-${c.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=d.start+d.duration,this.state=q.FRAG_LOADING;let h;return a?h=a.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,d,n,i)).catch(p=>this.handleFragLoadError(p)):h=this.doFragPartsLoad(e,d,n,i).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(S.FRAG_LOADING,{frag:e,part:d,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):h}else if(!e.url||this.loadedEndOfParts(c,r))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),ne(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=q.FRAG_LOADING;const l=this.config.progressive;let u;return l&&a?u=a.then(c=>!c||this.fragContextChanged(c==null?void 0:c.frag)?null:this.fragmentLoader.load(e,i)).catch(c=>this.handleFragLoadError(c)):u=Promise.all([this.fragmentLoader.load(e,l?i:void 0),a]).then(([c])=>(!l&&c&&i&&i(c),c)).catch(c=>this.handleFragLoadError(c)),this.hls.trigger(S.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,n,r,i){return new Promise((s,o)=>{var a;const l=[],u=(a=r.details)==null?void 0:a.partList,c=f=>{this.fragmentLoader.loadPart(e,f,i).then(d=>{l[f.index]=d;const h=d.part;this.hls.trigger(S.FRAG_LOADED,d);const p=op(r,e.sn,f.index+1)||Py(u,e.sn,f.index+1);if(p)c(p);else return s({frag:e,part:h,partsLoaded:l})}).catch(o)};c(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===G.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(S.ERROR,n)}else this.hls.trigger(S.ERROR,{type:ue.OTHER_ERROR,details:G.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==q.PARSING){!this.fragCurrent&&this.state!==q.STOPPED&&this.state!==q.ERROR&&(this.state=q.IDLE);return}const{frag:r,part:i,level:s}=n,o=self.performance.now();r.stats.parsing.end=o,i&&(i.stats.parsing.end=o),this.updateLevelTiming(r,i,s,e.partial)}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:i,sn:s,part:o}=e;if(!(n!=null&&n[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${i}. The current chunk will not be buffered.`),null;const a=n[i],l=o>-1?op(a,s,o):null,u=l?l.fragment:UR(a,s,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:l,level:a}):null}bufferFragmentData(e,n,r,i,s){var o;if(!e||this.state!==q.PARSING)return;const{data1:a,data2:l}=e;let u=a;if(a&&l&&(u=Ot(a,l)),!((o=u)!=null&&o.length))return;const c={type:e.type,frag:n,part:r,chunkMeta:i,parent:n.type,data:u};if(this.hls.trigger(S.BUFFER_APPENDING,c),e.dropped&&e.independent&&!r){if(s)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!$e.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,i=$e.bufferInfo(n,r,0),s=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),a=Math.max(Math.min(e.start-o,i.end-o),r+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){const r=this.getLoadPosition();return ne(r)?this.getFwdBufferInfoAtPos(e,r,n):null}getFwdBufferInfoAtPos(e,n,r){const{config:{maxBufferHole:i}}=this,s=$e.bufferInfo(e,n,i);if(s.len===0&&s.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,r);if(o&&s.nextStart<o.end)return $e.bufferInfo(e,n,Math.max(s.nextStart,i))}return s}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e){const n=this.config,r=e||n.maxBufferLength;return n.maxMaxBufferLength>=r?(n.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${n.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(e,n=fe.MAIN){const r=this.fragmentTracker.getAppendedFrag(e,fe.MAIN);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,n){const r=n.fragments,i=r.length;if(!i)return null;const{config:s}=this,o=r[0].start;let a;if(n.live){const l=s.initialLiveManifestSize;if(i<l)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${l})`),null;(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(n,r),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=r[0]);if(!a){const l=s.lowLatencyMode?n.partEnd:n.fragmentEnd;a=this.getFragmentAtPosition(e,l,n)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===Ht.OK||r===Ht.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,i,s){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,n);if(a===null)return a;if(e=a,o&&e&&!e.gap&&r.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i);if(l!==null&&r.len+l.len>=s)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let i=-1,s=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const u=e[a];if(o=o&&!u.independent,i>-1&&r<u.start)break;const c=u.loaded;c?i=-1:(s||u.independent||o)&&u.fragment===n&&(i=a),s=c}return i}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e,n){const r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=jR(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=r.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=n[s-e.startSN];r.cc===o.cc&&(i=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=GR(n,r.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,n,r){const{config:i}=this;let{fragPrevious:s}=this,{fragments:o,endSN:a}=r;const{fragmentHint:l}=r,u=i.maxFragLookUpTolerance,c=r.partList,f=!!(i.lowLatencyMode&&c!=null&&c.length&&l);f&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let d;if(e<n){const h=e>n-u?0:u;d=Ra(s,o,e,h)}else d=o[o.length-1];if(d){const h=d.sn-r.startSN,p=this.fragmentTracker.getState(d);if((p===Ht.OK||p===Ht.PARTIAL&&d.gap)&&(s=d),s&&d.sn===s.sn&&(!f||c[0].fragment.sn>d.sn)&&s&&d.level===s.level){const y=o[h+1];d.sn<a&&this.fragmentTracker.getState(y)!==Ht.OK?d=y:d=null}}return d}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,s=r.currentTime,o=e.fragments[0].start,a=e.edge,l=s>=o-n.maxFragLookUpTolerance&&s<=a;if(i!==null&&r.duration>i&&(s<i||!l)){const u=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;(!l&&r.readyState<4||s<a-u)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),r.currentTime=i))}}alignPlaylists(e,n,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,o=!n,a=e.alignedSliding&&ne(s);if(o||!a&&!s){const{fragPrevious:l}=this;aA(l,r,e);const u=e.fragments[0].start;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${i}`),u}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;if(r<n&&(r=-1),r===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,s=i?this.startTimeOffset:e.startTimeOffset;s!==null&&ne(s)?(r=n+s,s<0&&(r+=e.totalduration),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Start time offset ${s} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||n:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:e}=this;let n=0;return this.loadedmetadata&&e?n=e.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,n){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==q.FRAG_LOADING_WAITING_RETRY)&&(this.state=q.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const c=this.getCurrentContext(n.chunkMeta);c&&(n.frag=c.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const s=n.details===G.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(r,!0);const o=n.errorAction,{action:a,retryCount:l=0,retryConfig:u}=o||{};if(o&&a===Ge.RetryRequest&&u){this.resetStartWhenNotLoaded(this.levelLastLoaded);const c=qf(u,l);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${l+1}/${u.maxNumRetry} in ${c}ms`),o.resolved=!0,this.retryDate=self.performance.now()+c,this.state=q.FRAG_LOADING_WAITING_RETRY}else if(u&&o)if(this.resetFragmentErrors(e),l<u.maxNumRetry)!s&&a!==Ge.RemoveAlternatePermanently&&(o.resolved=!0);else{P.warn(`${n.details} reached or exceeded max retry (${l})`);return}else(o==null?void 0:o.action)===Ge.SendAlternateToPenaltyBox?this.state=q.WAITING_LEVEL:this.state=q.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===q.PARSING||this.state===q.PARSED){const n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len);const s=!i;return s&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===fe.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==q.STOPPED&&(this.state=q.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const i=$e.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,i,r),this.state===q.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=q.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.startPosition=-1,this.setStartPosition(n,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,i){var s;const o=r.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const c=e.elementaryStreams[u];if(c){const f=c.endPTS-c.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${f})`),l||!1;const d=i?0:_y(o,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(S.LEVEL_PTS_UPDATED,{details:o,level:r,drift:d,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(r.fragmentError===0&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=q.PARSED,this.hls.trigger(S.FRAG_PARSED,{frag:e,part:n})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}class gA{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=yA(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function yA(t,e){const n=new Uint8Array(e);let r=0;for(let i=0;i<t.length;i++){const s=t[i];n.set(s,r),r+=s.length}return n}function vA(){return typeof __HLS_WORKER_BUNDLE__=="function"}function xA(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function SA(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function rn(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Qf{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=Ot(this.cachedData,e),this.cachedData=null);let r=bs(e,0),i=r?r.length:0,s;const o=this._audioTrack,a=this._id3Track,l=r?Kf(r):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&ne(l))&&(this.basePTS=EA(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:_s.audioId3,duration:Number.POSITIVE_INFINITY});i<u;){if(this.canParse(e,i)){const c=this.appendFrame(o,e,i);c?(this.frameIndex++,this.lastPTS=c.sample.pts,i+=c.length,s=i):i=u}else QC(e,i)?(r=bs(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:_s.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,s=i):i++;if(i===u&&s!==u){const c=Tr(e,s);this.cachedData?this.cachedData=Ot(this.cachedData,c):this.cachedData=c}}return{audioTrack:o,videoTrack:rn(),id3Track:a,textTrack:rn()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:rn(),id3Track:this._id3Track,textTrack:rn()}}destroy(){}}const EA=(t,e,n)=>{if(ne(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};function TA(t,e,n,r){let i,s,o,a;const l=navigator.userAgent.toLowerCase(),u=r,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[n+2]&192)>>>6)+1;const f=(e[n+2]&60)>>>2;if(f>c.length-1){const d=new Error(`invalid ADTS sampling index:${f}`);t.emit(S.ERROR,S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_PARSING_ERROR,fatal:!0,error:d,reason:d.message});return}return o=(e[n+2]&1)<<2,o|=(e[n+3]&192)>>>6,P.log(`manifest codec:${r}, ADTS type:${i}, samplingIndex:${f}`),/firefox/i.test(l)?f>=6?(i=5,a=new Array(4),s=f-3):(i=2,a=new Array(2),s=f):l.indexOf("android")!==-1?(i=2,a=new Array(2),s=f):(i=5,a=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&f>=6?s=f-3:((r&&r.indexOf("mp4a.40.2")!==-1&&(f>=6&&o===1||/vivaldi/i.test(l))||!r&&o===1)&&(i=2,a=new Array(2)),s=f)),a[0]=i<<3,a[0]|=(f&14)>>1,a[1]|=(f&1)<<7,a[1]|=o<<3,i===5&&(a[1]|=(s&14)>>1,a[2]=(s&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:c[f],channelCount:o,codec:"mp4a.40."+i,manifestCodec:u}}function By(t,e){return t[e]===255&&(t[e+1]&246)===240}function $y(t,e){return t[e+1]&1?7:9}function Jf(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function wA(t,e){return e+5<t.length}function ka(t,e){return e+1<t.length&&By(t,e)}function CA(t,e){return wA(t,e)&&By(t,e)&&Jf(t,e)<=t.length-e}function RA(t,e){if(ka(t,e)){const n=$y(t,e);if(e+n>=t.length)return!1;const r=Jf(t,e);if(r<=n)return!1;const i=e+r;return i===t.length||ka(t,i)}return!1}function jy(t,e,n,r,i){if(!t.samplerate){const s=TA(e,n,r,i);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,P.log(`parsed codec:${t.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function zy(t){return 1024*9e4/t}function AA(t,e){const n=$y(t,e);if(e+n<=t.length){const r=Jf(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function Gy(t,e,n,r,i){const s=zy(t.samplerate),o=r+i*s,a=AA(e,n);let l;if(a){const{frameLength:f,headerLength:d}=a,h=d+f,p=Math.max(0,n+h-e.length);p?(l=new Uint8Array(h-d),l.set(e.subarray(n+d,e.length),0)):l=e.subarray(n+d,n+h);const m={unit:l,pts:o};return p||t.samples.push(m),{sample:m,length:h,missing:p}}const u=e.length-n;return l=new Uint8Array(u),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:o},length:u,missing:-1}}let po=null;const kA=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],LA=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],bA=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],_A=[0,1,1,4];function Hy(t,e,n,r,i){if(n+24>e.length)return;const s=Vy(e,n);if(s&&n+s.frameLength<=e.length){const o=s.samplesPerFrame*9e4/s.sampleRate,a=r+i*o,l={unit:e.subarray(n,n+s.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function Vy(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,s=t[e+2]>>2&3;if(n!==1&&i!==0&&i!==15&&s!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=n===3?3-r:r===3?3:4,u=kA[l*14+i-1]*1e3,f=LA[(n===3?0:n===2?1:2)*3+s],d=a===3?1:2,h=bA[n][r],p=_A[r],m=h*8*p,y=Math.floor(h*u/f+o)*p;if(po===null){const x=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);po=x?parseInt(x[1]):0}return!!po&&po<=87&&r===2&&u>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:f,channelCount:d,frameLength:y,samplesPerFrame:m}}}function Zf(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function Wy(t,e){return e+1<t.length&&Zf(t,e)}function IA(t,e){return Zf(t,e)&&4<=t.length-e}function Ky(t,e){if(e+1<t.length&&Zf(t,e)){const r=Vy(t,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const s=e+i;return s===t.length||Wy(t,s)}return!1}class PA extends Qf{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=bs(e,0);let r=(n==null?void 0:n.length)||0;if(Ky(e,r))return!1;for(let i=e.length;r<i;r++)if(RA(e,r))return P.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return CA(e,n)}appendFrame(e,n,r){jy(e,this.observer,n,r,e.manifestCodec);const i=Gy(e,n,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const DA=/\/emsg[-/]ID3/i;class OA{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,i){const s=this.videoTrack=rn("video",1),o=this.audioTrack=rn("audio",1),a=this.txtTrack=rn("text",1);if(this.id3Track=rn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=Ry(e);if(l.video){const{id:u,timescale:c,codec:f}=l.video;s.id=u,s.timescale=a.timescale=c,s.codec=f}if(l.audio){const{id:u,timescale:c,codec:f}=l.audio;o.id=u,o.timescale=c,o.codec=f}a.id=Ty.text,s.sampleDuration=0,s.duration=o.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return lR(e)}demux(e,n){this.timeOffset=n;let r=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Ot(this.remainderData,e));const a=gR(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=r;const o=this.extractID3Track(i,n);return s.samples=Jh(n,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(n,this.timeOffset);return r.samples=Jh(e,n),{videoTrack:n,audioTrack:rn(),id3Track:i,textTrack:rn()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const i=oe(e.samples,["emsg"]);i&&i.forEach(s=>{const o=xR(s);if(DA.test(o.schemeIdUri)){const a=ne(o.presentationTime)?o.presentationTime/o.timeScale:n+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=o.payload;r.samples.push({data:u,len:u.byteLength,dts:a,pts:a,type:_s.emsg,duration:l})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const Yy=(t,e)=>{let n=0,r=5;e+=r;const i=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;r>0;){o[0]=t[e];const a=Math.min(r,8),l=8-a;s[0]=4278190080>>>24+l<<l,i[0]=(o[0]&s[0])>>l,n=n?n<<a|i[0]:i[0],e+=1,r-=a}return n};class NA extends Qf{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const i=qy(e,n,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const n=bs(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&Kf(n)!==void 0&&Yy(e,r)<16}}function qy(t,e,n,r,i){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const s=e[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],l=e[n+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(n+c>e.length)return-1;const f=e[n+6]>>5;let d=0;f===2?d+=2:(f&1&&f!==1&&(d+=2),f&4&&(d+=2));const h=(e[n+6]<<8|e[n+7])>>12-d&1,m=[2,1,2,3,3,4,4,5][f]+h,y=e[n+5]>>3,g=e[n+5]&7,v=new Uint8Array([s<<6|y<<1|g>>2,(g&3)<<6|f<<3|h<<2|l>>4,l<<4&224]),x=1536/a*9e4,T=r+i*x,E=e.subarray(n,n+c);return t.config=v,t.channelCount=m,t.samplerate=a,t.samples.push({unit:E,pts:T}),c}class FA{constructor(){this.VideoSample=null}createVideoSample(e,n,r,i){return{key:e,frame:!1,pts:n,dts:r,units:[],debug:i,length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const s=r.units;i=s[s.length-1]}return i}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,i=r.length;if(i){const s=r[i-1];e.pts=s.pts,e.dts=s.dts}else{n.dropped++;return}}n.samples.push(e)}e.debug.length&&P.log(e.pts+"/"+e.dts+":"+e.debug)}}class mp{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,i=new Uint8Array(4),s=Math.min(4,n);if(s===0)throw new Error("no bytes available");i.set(e.subarray(r,r+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&P.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let n=8,r=8,i;for(let s=0;s<e;s++)r!==0&&(i=this.readEG(),r=(n+i+256)%256),n=r===0?n:r}readSPS(){let e=0,n=0,r=0,i=0,s,o,a;const l=this.readUByte.bind(this),u=this.readBits.bind(this),c=this.readUEG.bind(this),f=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);l();const y=l();if(u(5),d(3),l(),p(),y===100||y===110||y===122||y===244||y===44||y===83||y===86||y===118||y===128){const k=c();if(k===3&&d(1),p(),p(),d(1),f())for(o=k!==3?8:12,a=0;a<o;a++)f()&&(a<6?m(16):m(64))}p();const g=c();if(g===0)c();else if(g===1)for(d(1),h(),h(),s=c(),a=0;a<s;a++)h();p(),d(1);const v=c(),x=c(),T=u(1);T===0&&d(1),d(1),f()&&(e=c(),n=c(),r=c(),i=c());let E=[1,1];if(f()&&f())switch(l()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:{E=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((v+1)*16-e*2-n*2),height:(2-T)*(x+1)*16-(T?2:4)*(r+i),pixelRatio:E}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class MA extends FA{parseAVCPES(e,n,r,i,s){const o=this.parseAVCNALu(e,r.data);let a=this.VideoSample,l,u=!1;r.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),o.forEach(c=>{var f;switch(c.type){case 1:{let m=!1;l=!0;const y=c.data;if(u&&y.length>4){const g=new mp(y).readSliceType();(g===2||g===4||g===7||g===9)&&(m=!0)}if(m){var d;(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.frame=!0,a.key=m;break}case 5:l=!0,(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,ky(c.data,1,r.pts,n.samples);break}case 7:{var h,p;l=!0,u=!0;const m=c.data,g=new mp(m).readSPS();if(!e.sps||e.width!==g.width||e.height!==g.height||((h=e.pixelRatio)==null?void 0:h[0])!==g.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==g.pixelRatio[1]){e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.sps=[m],e.duration=s;const v=m.subarray(1,4);let x="avc1.";for(let T=0;T<3;T++){let E=v[T].toString(16);E.length<2&&(E="0"+E),x+=E}e.codec=x}break}case 8:l=!0,e.pps=[c.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+c.type+" ");break}a&&l&&a.units.push(c)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,n){const r=n.byteLength;let i=e.naluState||0;const s=i,o=[];let a=0,l,u,c,f=-1,d=0;for(i===-1&&(f=0,d=n[0]&31,i=0,a=1);a<r;){if(l=n[a++],!i){i=l?0:1;continue}if(i===1){i=l?0:2;continue}if(!l)i=3;else if(l===1){if(u=a-i-1,f>=0){const h={data:n.subarray(f,u),type:d};o.push(h)}else{const h=this.getLastNalUnit(e.samples);h&&(s&&a<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),u>0&&(h.data=Ot(h.data,n.subarray(0,u)),h.state=0))}a<r?(c=n[a]&31,f=a,d=c,i=0):i=-1}else i=0}if(f>=0&&i>=0){const h={data:n.subarray(f,r),type:d,state:i};o.push(h)}if(o.length===0){const h=this.getLastNalUnit(e.samples);h&&(h.data=Ot(h.data,n))}return e.naluState=i,o}}class UA{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Xf(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,n,r){const i=e[n].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)r.set(e.subarray(s,s+16),i);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(r.subarray(i,i+16),s);return e}decryptAvcSample(e,n,r,i,s){const o=Ly(s.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,i)})}decryptAvcSamples(e,n,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){i();return}const s=e[n].units;for(;!(r>=s.length);r++){const o=s[r];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,r,i,o),!this.decrypter.isSync()))return}}}}const Ue=188;class Un{constructor(e,n,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.videoParser=new MA}static probe(e){const n=Un.syncOffset(e);return n>0&&P.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const n=e.length;let r=Math.min(Ue*5,n-Ue)+1,i=0;for(;i<r;){let s=!1,o=-1,a=0;for(let l=i;l<n;l+=Ue)if(e[l]===71&&(n-l===Ue||e[l+Ue]===71)){if(a++,o===-1&&(o=l,o!==0&&(r=Math.min(o+Ue*99,e.length-Ue)+1)),s||(s=wc(e,l)===0),s&&a>1&&(o===0&&a>2||l+Ue>r))return o}else{if(a)return-1;break}i++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Ty[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Un.createTrack("video"),this._audioTrack=Un.createTrack("audio",i),this._id3Track=Un.createTrack("id3"),this._txtTrack=Un.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,i=!1){r||(this.sampleAes=null);let s;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,u=this._txtTrack;let c=o.pid,f=o.pesData,d=a.pid,h=l.pid,p=a.pesData,m=l.pesData,y=null,g=this.pmtParsed,v=this._pmtId,x=e.length;if(this.remainderData&&(e=Ot(this.remainderData,e),x=e.length,this.remainderData=null),x<Ue&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};const T=Math.max(0,Un.syncOffset(e));x-=(x-T)%Ue,x<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,x,e.buffer.byteLength-x));let E=0;for(let w=T;w<x;w+=Ue)if(e[w]===71){const A=!!(e[w+1]&64),F=wc(e,w),I=(e[w+3]&48)>>4;let H;if(I>1){if(H=w+5+e[w+4],H===w+Ue)continue}else H=w+4;switch(F){case c:A&&(f&&(s=Mr(f))&&this.videoParser.parseAVCPES(o,u,s,!1,this._duration),f={data:[],size:0}),f&&(f.data.push(e.subarray(H,w+Ue)),f.size+=w+Ue-H);break;case d:if(A){if(p&&(s=Mr(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,s);break;case"mp3":this.parseMPEGPES(a,s);break;case"ac3":this.parseAC3PES(a,s);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(H,w+Ue)),p.size+=w+Ue-H);break;case h:A&&(m&&(s=Mr(m))&&this.parseID3PES(l,s),m={data:[],size:0}),m&&(m.data.push(e.subarray(H,w+Ue)),m.size+=w+Ue-H);break;case 0:A&&(H+=e[H]+1),v=this._pmtId=BA(e,H);break;case v:{A&&(H+=e[H]+1);const U=$A(e,H,this.typeSupported,r);c=U.videoPid,c>0&&(o.pid=c,o.segmentCodec=U.segmentVideoCodec),d=U.audioPid,d>0&&(a.pid=d,a.segmentCodec=U.segmentAudioCodec),h=U.id3Pid,h>0&&(l.pid=h),y!==null&&!g&&(P.warn(`MPEG-TS PMT found at ${w} after unknown PID '${y}'. Backtracking to sync byte @${T} to parse all TS packets.`),y=null,w=T-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:y=F;break}}else E++;if(E>0){const w=new Error(`Found ${E} TS packet/s that do not start with 0x47`);this.observer.emit(S.ERROR,S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_PARSING_ERROR,fatal:!1,error:w,reason:w.message})}o.pesData=f,a.pesData=p,l.pesData=m;const k={audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};return i&&this.extractRemainingSamples(k),k}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:i,textTrack:s}=e,o=r.pesData,a=n.pesData,l=i.pesData;let u;if(o&&(u=Mr(o))?(this.videoParser.parseAVCPES(r,s,u,!0,this._duration),r.pesData=null):r.pesData=o,a&&(u=Mr(a))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,u);break;case"mp3":this.parseMPEGPES(n,u);break;case"ac3":this.parseAC3PES(n,u);break}n.pesData=null}else a!=null&&a.size&&P.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;l&&(u=Mr(l))?(this.parseID3PES(i,u),i.pesData=null):i.pesData=l}demuxSampleAes(e,n,r){const i=this.demux(e,r,!0,!this.config.progressive),s=this.sampleAes=new UA(this.observer,this.config,n);return this.decrypt(i,s)}decrypt(e,n){return new Promise(r=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?n.decryptAacSamples(i.samples,0,()=>{s.samples?n.decryptAvcSamples(s.samples,0,0,()=>{r(e)}):r(e)}):s.samples&&n.decryptAvcSamples(s.samples,0,0,()=>{r(e)})})}destroy(){this._duration=0}parseAACPES(e,n){let r=0;const i=this.aacOverFlow;let s=n.data;if(i){this.aacOverFlow=null;const f=i.missing,d=i.sample.unit.byteLength;if(f===-1)s=Ot(i.sample.unit,s);else{const h=d-f;i.sample.unit.set(s.subarray(0,f),h),e.samples.push(i.sample),r=i.missing}}let o,a;for(o=r,a=s.length;o<a-1&&!ka(s,o);o++);if(o!==r){let f;const d=o<a-1;d?f=`AAC PES did not start with ADTS header,offset:${o}`:f="No ADTS header found in AAC PES";const h=new Error(f);if(P.warn(`parsing error: ${f}`),this.observer.emit(S.ERROR,S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_PARSING_ERROR,fatal:!1,levelRetry:d,error:h,reason:f}),!d)return}jy(e,this.observer,s,o,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(i){const f=zy(e.samplerate);l=i.sample.pts+f}else{P.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;o<a;)if(c=Gy(e,s,o,l,u),o+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;o<a-1&&!ka(s,o);o++);}parseMPEGPES(e,n){const r=n.data,i=r.length;let s=0,o=0;const a=n.pts;if(a===void 0){P.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<i;)if(Wy(r,o)){const l=Hy(e,r,o,a,s);if(l)o+=l.length,s++;else break}else o++}parseAC3PES(e,n){{const r=n.data,i=n.pts;if(i===void 0){P.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=r.length;let o=0,a=0,l;for(;a<s&&(l=qy(e,r,a,i,o++))>0;)a+=l}}parseID3PES(e,n){if(n.pts===void 0){P.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=Ze({},n,{type:this._videoTrack?_s.emsg:_s.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function wc(t,e){return((t[e+1]&31)<<8)+t[e+2]}function BA(t,e){return(t[e+10]&31)<<8|t[e+11]}function $A(t,e,n,r){const i={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},s=(t[e+1]&15)<<8|t[e+2],o=e+3+s-4,a=(t[e+10]&15)<<8|t[e+11];for(e+=12+a;e<o;){const l=wc(t,e),u=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){tu("ADTS AAC");break}case 15:i.audioPid===-1&&(i.audioPid=l);break;case 21:i.id3Pid===-1&&(i.id3Pid=l);break;case 219:if(!r){tu("H.264");break}case 27:i.videoPid===-1&&(i.videoPid=l,i.segmentVideoCodec="avc");break;case 3:case 4:!n.mpeg&&!n.mp3?P.log("MPEG audio found, not supported in this browser"):i.audioPid===-1&&(i.audioPid=l,i.segmentAudioCodec="mp3");break;case 193:if(!r){tu("AC-3");break}case 129:n.ac3?i.audioPid===-1&&(i.audioPid=l,i.segmentAudioCodec="ac3"):P.log("AC-3 audio found, not supported in this browser");break;case 6:if(i.audioPid===-1&&u>0){let c=e+5,f=u;for(;f>2;){switch(t[c]){case 106:n.ac3!==!0?P.log("AC-3 audio found, not supported in this browser for now"):(i.audioPid=l,i.segmentAudioCodec="ac3");break}const h=t[c+1]+2;c+=h,f-=h}}break;case 194:case 135:P.warn("Unsupported EC-3 in M2TS found");break;case 36:P.warn("Unsupported HEVC in M2TS found");break}e+=u+5}return i}function tu(t){P.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Mr(t){let e=0,n,r,i,s,o;const a=t.data;if(!t||t.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=Ot(a[0],a[1]),a.splice(1,1);if(n=a[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>t.size-6)return null;const u=n[7];u&192&&(s=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,u&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,s-o>60*9e4&&(P.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),i=n[8];let c=i+9;if(t.size<=c)return null;t.size-=c;const f=new Uint8Array(t.size);for(let d=0,h=a.length;d<h;d++){n=a[d];let p=n.byteLength;if(c)if(c>p){c-=p;continue}else n=n.subarray(c),p-=c,c=0;f.set(n,e),e+=p}return r&&(r-=i+3),{data:f,pts:s,dts:o,len:r}}return null}class jA extends Qf{resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=bs(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&Kf(n)!==void 0&&Yy(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(Ky(e,r))return P.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return IA(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return Hy(e,n,r,this.basePTS,this.frameIndex)}}class gp{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Dn=Math.pow(2,32)-1;class _{static init(){_.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in _.types)_.types.hasOwnProperty(e)&&(_.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);_.HDLR_TYPES={video:n,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);_.STTS=_.STSC=_.STCO=s,_.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),_.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),_.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),_.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);_.FTYP=_.box(_.types.ftyp,o,l,o,a),_.DINF=_.box(_.types.dinf,_.box(_.types.dref,i))}static box(e,...n){let r=8,i=n.length;const s=i;for(;i--;)r+=n[i].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(e,4),i=0,r=8;i<s;i++)o.set(n[i],r),r+=n[i].byteLength;return o}static hdlr(e){return _.box(_.types.hdlr,_.HDLR_TYPES[e])}static mdat(e){return _.box(_.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(Dn+1)),i=Math.floor(n%(Dn+1));return _.box(_.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return _.box(_.types.mdia,_.mdhd(e.timescale,e.duration),_.hdlr(e.type),_.minf(e))}static mfhd(e){return _.box(_.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?_.box(_.types.minf,_.box(_.types.smhd,_.SMHD),_.DINF,_.stbl(e)):_.box(_.types.minf,_.box(_.types.vmhd,_.VMHD),_.DINF,_.stbl(e))}static moof(e,n,r){return _.box(_.types.moof,_.mfhd(e),_.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=_.trak(e[n]);return _.box.apply(null,[_.types.moov,_.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(_.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=_.trex(e[n]);return _.box.apply(null,[_.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(Dn+1)),i=Math.floor(n%(Dn+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return _.box(_.types.mvhd,s)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let i,s;for(i=0;i<n.length;i++)s=n[i].flags,r[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return _.box(_.types.sdtp,r)}static stbl(e){return _.box(_.types.stbl,_.stsd(e),_.box(_.types.stts,_.STTS),_.box(_.types.stsc,_.STSC),_.box(_.types.stsz,_.STSZ),_.box(_.types.stco,_.STCO))}static avc1(e){let n=[],r=[],i,s,o;for(i=0;i<e.sps.length;i++)s=e.sps[i],o=s.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],o=s.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(s));const a=_.box(_.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),l=e.width,u=e.height,c=e.pixelRatio[0],f=e.pixelRatio[1];return _.box(_.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,_.box(_.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),_.box(_.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const n=e.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const n=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return _.box(_.types.mp4a,_.audioStsd(e),_.box(_.types.esds,_.esds(e)))}static mp3(e){return _.box(_.types[".mp3"],_.audioStsd(e))}static ac3(e){return _.box(_.types["ac-3"],_.audioStsd(e),_.box(_.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?_.box(_.types.stsd,_.STSD,_.mp3(e)):e.segmentCodec==="ac3"?_.box(_.types.stsd,_.STSD,_.ac3(e)):_.box(_.types.stsd,_.STSD,_.mp4a(e)):_.box(_.types.stsd,_.STSD,_.avc1(e))}static tkhd(e){const n=e.id,r=e.duration*e.timescale,i=e.width,s=e.height,o=Math.floor(r/(Dn+1)),a=Math.floor(r%(Dn+1));return _.box(_.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,n){const r=_.sdtp(e),i=e.id,s=Math.floor(n/(Dn+1)),o=Math.floor(n%(Dn+1));return _.box(_.types.traf,_.box(_.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),_.box(_.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),_.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,_.box(_.types.trak,_.tkhd(e),_.mdia(e))}static trex(e){const n=e.id;return _.box(_.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],i=r.length,s=12+16*i,o=new Uint8Array(s);let a,l,u,c,f,d;for(n+=8+s,o.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<i;a++)l=r[a],u=l.duration,c=l.size,f=l.flags,d=l.cts,o.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,d>>>24&255,d>>>16&255,d>>>8&255,d&255],12+16*a);return _.box(_.types.trun,o)}static initSegment(e){_.types||_.init();const n=_.moov(e);return Ot(_.FTYP,n)}}_.types=void 0;_.HDLR_TYPES=void 0;_.STTS=void 0;_.STSC=void 0;_.STCO=void 0;_.STSZ=void 0;_.VMHD=void 0;_.SMHD=void 0;_.STSD=void 0;_.FTYP=void 0;_.DINF=void 0;const Xy=9e4;function ed(t,e,n=1,r=!1){const i=t*e*n;return r?Math.round(i):i}function zA(t,e,n=1,r=!1){return ed(t,e,1/n,r)}function ji(t,e=!1){return ed(t,1e3,1/Xy,e)}function GA(t,e=1){return ed(t,Xy,1/e)}const HA=10*1e3,yp=1024,VA=1152,WA=1536;let Ur=null,nu=null;class jo{constructor(e,n,r,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,Ur===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ur=o?parseInt(o[1]):0}if(nu===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);nu=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){P.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){P.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){P.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e.reduce((i,s)=>{const o=s.pts-i;return o<-4294967296?(n=!0,Rt(i,s.pts)):o>0?i:s.pts},e[0].pts);return n&&P.debug("PTS rollover detected"),r}remux(e,n,r,i,s,o,a,l){let u,c,f,d,h,p,m=s,y=s;const g=e.pid>-1,v=n.pid>-1,x=n.samples.length,T=e.samples.length>0,E=a&&x>0||x>1;if((!g||T)&&(!v||E)||this.ISGenerated||a){if(this.ISGenerated){var w,A,F,I;const O=this.videoTrackConfig;O&&(n.width!==O.width||n.height!==O.height||((w=n.pixelRatio)==null?void 0:w[0])!==((A=O.pixelRatio)==null?void 0:A[0])||((F=n.pixelRatio)==null?void 0:F[1])!==((I=O.pixelRatio)==null?void 0:I[1]))&&this.resetInitSegment()}else f=this.generateIS(e,n,s,o);const H=this.isVideoContiguous;let U=-1,z;if(E&&(U=KA(n.samples),!H&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,U>0){P.warn(`[mp4-remuxer]: Dropped ${U} out of ${x} video samples due to a missing keyframe`);const O=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(U),n.dropped+=U,y+=(n.samples[0].pts-O)/n.inputTimeScale,z=y}else U===-1&&(P.warn(`[mp4-remuxer]: No keyframe found out of ${x} video samples`),p=!1);if(this.ISGenerated){if(T&&E){const O=this.getVideoStartPts(n.samples),W=(Rt(e.samples[0].pts,O)-O)/n.inputTimeScale;m+=Math.max(0,W),y+=Math.max(0,-W)}if(T){if(e.samplerate||(P.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),f=this.generateIS(e,n,s,o)),c=this.remuxAudio(e,m,this.isAudioContiguous,o,v||E||l===fe.AUDIO?y:void 0),E){const O=c?c.endPTS-c.startPTS:0;n.inputTimeScale||(P.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),f=this.generateIS(e,n,s,o)),u=this.remuxVideo(n,y,H,O)}}else E&&(u=this.remuxVideo(n,y,H,0));u&&(u.firstKeyFrame=U,u.independent=U!==-1,u.firstKeyFramePTS=z)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=Qy(r,s,this._initPTS,this._initDTS)),i.samples.length&&(d=Jy(i,s,this._initPTS))),{audio:c,video:u,initSegment:f,independent:p,text:d,id3:h}}generateIS(e,n,r,i){const s=e.samples,o=n.samples,a=this.typeSupported,l={},u=this._initPTS;let c=!u||i,f="audio/mp4",d,h,p;if(c&&(d=h=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(f="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):_.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(p=e.inputTimeScale,!u||p!==u.timescale?d=h=s[0].pts-Math.round(p*r):c=!1)}if(n.sps&&n.pps&&o.length){if(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:_.initSegment([n]),metadata:{width:n.width,height:n.height}},c)if(p=n.inputTimeScale,!u||p!==u.timescale){const m=this.getVideoStartPts(o),y=Math.round(p*r);h=Math.min(h,Rt(o[0].dts,m)-y),d=Math.min(d,m-y)}else c=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:d,timescale:p},this._initDTS={baseTime:h,timescale:p}):d=p=void 0,{tracks:l,initPTS:d,timescale:p}}remuxVideo(e,n,r,i){const s=e.inputTimeScale,o=e.samples,a=[],l=o.length,u=this._initPTS;let c=this.nextAvcDts,f=8,d=this.videoSampleDuration,h,p,m=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,g=!1;if(!r||c===null){const R=n*s,C=o[0].pts-Rt(o[0].dts,o[0].pts);Ur&&c!==null&&Math.abs(R-C-c)<15e3?r=!0:c=R-C}const v=u.baseTime*s/u.timescale;for(let R=0;R<l;R++){const C=o[R];C.pts=Rt(C.pts-v,c),C.dts=Rt(C.dts-v,c),C.dts<o[R>0?R-1:R].dts&&(g=!0)}g&&o.sort(function(R,C){const j=R.dts-C.dts,N=R.pts-C.pts;return j||N}),h=o[0].dts,p=o[o.length-1].dts;const x=p-h,T=x?Math.round(x/(l-1)):d||e.inputTimeScale/30;if(r){const R=h-c,C=R>T,j=R<-1;if((C||j)&&(C?P.warn(`AVC: ${ji(R,!0)} ms (${R}dts) hole between fragments detected at ${n.toFixed(3)}`):P.warn(`AVC: ${ji(-R,!0)} ms (${R}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!j||c>=o[0].pts||Ur)){h=c;const N=o[0].pts-R;if(C)o[0].dts=h,o[0].pts=N;else for(let K=0;K<o.length&&!(o[K].dts>N);K++)o[K].dts-=R,o[K].pts-=R;P.log(`Video: Initial PTS/DTS adjusted: ${ji(N,!0)}/${ji(h,!0)}, delta: ${ji(R,!0)} ms`)}}h=Math.max(0,h);let E=0,k=0,w=h;for(let R=0;R<l;R++){const C=o[R],j=C.units,N=j.length;let K=0;for(let X=0;X<N;X++)K+=j[X].data.length;k+=K,E+=N,C.length=K,C.dts<w?(C.dts=w,w+=T/4|0||1):w=C.dts,m=Math.min(C.pts,m),y=Math.max(C.pts,y)}p=o[l-1].dts;const A=k+4*E+8;let F;try{F=new Uint8Array(A)}catch(R){this.observer.emit(S.ERROR,S.ERROR,{type:ue.MUX_ERROR,details:G.REMUX_ALLOC_ERROR,fatal:!1,error:R,bytes:A,reason:`fail allocating video mdat ${A}`});return}const I=new DataView(F.buffer);I.setUint32(0,A),F.set(_.types.mdat,4);let H=!1,U=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY,O=Number.NEGATIVE_INFINITY,D=Number.NEGATIVE_INFINITY;for(let R=0;R<l;R++){const C=o[R],j=C.units;let N=0;for(let te=0,re=j.length;te<re;te++){const me=j[te],at=me.data,Nt=me.data.byteLength;I.setUint32(f,Nt),f+=4,F.set(at,f),f+=Nt,N+=4+Nt}let K;if(R<l-1)d=o[R+1].dts-C.dts,K=o[R+1].pts-C.pts;else{const te=this.config,re=R>0?C.dts-o[R-1].dts:T;if(K=R>0?C.pts-o[R-1].pts:T,te.stretchShortVideoTrack&&this.nextAudioPts!==null){const me=Math.floor(te.maxBufferHole*s),at=(i?m+i*s:this.nextAudioPts)-C.pts;at>me?(d=at-re,d<0?d=re:H=!0,P.log(`[mp4-remuxer]: It is approximately ${at/90} ms to the next segment; using duration ${d/90} ms for the last video frame.`)):d=re}else d=re}const X=Math.round(C.pts-C.dts);U=Math.min(U,d),O=Math.max(O,d),z=Math.min(z,K),D=Math.max(D,K),a.push(new vp(C.key,d,N,X))}if(a.length){if(Ur){if(Ur<70){const R=a[0].flags;R.dependsOn=2,R.isNonSync=0}}else if(nu&&D-z<O-U&&T/O<.025&&a[0].cts===0){P.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let R=h;for(let C=0,j=a.length;C<j;C++){const N=R+a[C].duration,K=R+a[C].cts;if(C<j-1){const X=N+a[C+1].cts;a[C].duration=X-K}else a[C].duration=C?a[C-1].duration:T;a[C].cts=0,R=N}}}d=H||!d?T:d,this.nextAvcDts=c=p+d,this.videoSampleDuration=d,this.isVideoContiguous=!0;const b={data1:_.moof(e.sequenceNumber++,h,Ze({},e,{samples:a})),data2:F,startPTS:m/s,endPTS:(y+d)/s,startDTS:h/s,endDTS:c/s,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,b}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return VA;case"ac3":return WA;default:return yp}}remuxAudio(e,n,r,i,s){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,u=this.getSamplesPerFrame(e),c=u*l,f=this._initPTS,d=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],p=s!==void 0;let m=e.samples,y=d?0:8,g=this.nextAudioPts||-1;const v=n*o,x=f.baseTime*o/f.timescale;if(this.isAudioContiguous=r=r||m.length&&g>0&&(i&&Math.abs(v-g)<9e3||Math.abs(Rt(m[0].pts-x,v)-g)<20*c),m.forEach(function(W){W.pts=Rt(W.pts-x,v)}),!r||g<0){if(m=m.filter(W=>W.pts>=0),!m.length)return;s===0?g=0:i&&!p?g=Math.max(0,v):g=m[0].pts}if(e.segmentCodec==="aac"){const W=this.config.maxAudioFramesDrift;for(let L=0,b=g;L<m.length;L++){const R=m[L],C=R.pts,j=C-b,N=Math.abs(1e3*j/o);if(j<=-W*c&&p)L===0&&(P.warn(`Audio frame @ ${(C/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*j/o)} ms.`),this.nextAudioPts=g=b=C);else if(j>=W*c&&N<HA&&p){let K=Math.round(j/c);b=C-K*c,b<0&&(K--,b+=c),L===0&&(this.nextAudioPts=g=b),P.warn(`[mp4-remuxer]: Injecting ${K} audio frame @ ${(b/o).toFixed(3)}s due to ${Math.round(1e3*j/o)} ms gap.`);for(let X=0;X<K;X++){const te=Math.max(b,0);let re=gp.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);re||(P.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),re=R.unit.subarray()),m.splice(L,0,{unit:re,pts:te}),b+=c,L++}}R.pts=b,b+=c}}let T=null,E=null,k,w=0,A=m.length;for(;A--;)w+=m[A].unit.byteLength;for(let W=0,L=m.length;W<L;W++){const b=m[W],R=b.unit;let C=b.pts;if(E!==null){const N=h[W-1];N.duration=Math.round((C-E)/l)}else if(r&&e.segmentCodec==="aac"&&(C=g),T=C,w>0){w+=y;try{k=new Uint8Array(w)}catch(N){this.observer.emit(S.ERROR,S.ERROR,{type:ue.MUX_ERROR,details:G.REMUX_ALLOC_ERROR,fatal:!1,error:N,bytes:w,reason:`fail allocating audio mdat ${w}`});return}d||(new DataView(k.buffer).setUint32(0,w),k.set(_.types.mdat,4))}else return;k.set(R,y);const j=R.byteLength;y+=j,h.push(new vp(!0,u,j,0)),E=C}const F=h.length;if(!F)return;const I=h[h.length-1];this.nextAudioPts=g=E+l*I.duration;const H=d?new Uint8Array(0):_.moof(e.sequenceNumber++,T/l,Ze({},e,{samples:h}));e.samples=[];const U=T/o,z=g/o,D={data1:H,data2:k,startPTS:U,endPTS:z,startDTS:U,endDTS:z,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.isAudioContiguous=!0,D}remuxEmptyAudio(e,n,r,i){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,a=s/o,l=this.nextAudioPts,u=this._initDTS,c=u.baseTime*9e4/u.timescale,f=(l!==null?l:i.startDTS*s)+c,d=i.endDTS*s+c,h=a*yp,p=Math.ceil((d-f)/h),m=gp.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(P.warn("[mp4-remuxer]: remux empty Audio"),!m){P.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const y=[];for(let g=0;g<p;g++){const v=f+g*h;y.push({unit:m,pts:v,dts:v})}return e.samples=y,this.remuxAudio(e,n,r,!1)}}function Rt(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function KA(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function Qy(t,e,n,r){const i=t.samples.length;if(!i)return;const s=t.inputTimeScale;for(let a=0;a<i;a++){const l=t.samples[a];l.pts=Rt(l.pts-n.baseTime*s/n.timescale,e*s)/s,l.dts=Rt(l.dts-r.baseTime*s/r.timescale,e*s)/s}const o=t.samples;return t.samples=[],{samples:o}}function Jy(t,e,n){const r=t.samples.length;if(!r)return;const i=t.inputTimeScale;for(let o=0;o<r;o++){const a=t.samples[o];a.pts=Rt(a.pts-n.baseTime*i/n.timescale,e*i)/i}t.samples.sort((o,a)=>o.pts-a.pts);const s=t.samples;return t.samples=[],{samples:s}}class vp{constructor(e,n,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=r,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class YA{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,n,r,i){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(fR(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=Ry(e);i.audio&&(n=xp(i.audio,Qe.AUDIO)),i.video&&(r=xp(i.video,Qe.VIDEO));const s={};i.audio&&i.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:e,id:"main"}:i.audio?s.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:i.video?s.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:P.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,n,r,i,s,o){var a,l;let{initPTS:u,lastEndTime:c}=this;const f={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};ne(c)||(c=this.lastEndTime=s||0);const d=n.samples;if(!(d!=null&&d.length))return f;const h={initPTS:void 0,timescale:1};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(d),p=this.initData),!((l=p)!=null&&l.length))return P.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),f;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const m=hR(d,p),y=dR(p,d),g=y===null?s:y;(qA(u,g,s,m)||h.timescale!==u.timescale&&o)&&(h.initPTS=g-s,u&&u.timescale===1&&P.warn(`Adjusting initPTS by ${h.initPTS-u.baseTime}`),this.initPTS=u={baseTime:h.initPTS,timescale:1});const v=e?g-u.baseTime/u.timescale:c,x=v+m;mR(p,d,u.baseTime/u.timescale),m>0?this.lastEndTime=x:(P.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const T=!!p.audio,E=!!p.video;let k="";T&&(k+="audio"),E&&(k+="video");const w={data1:d,startPTS:v,startDTS:v,endPTS:x,endDTS:x,type:k,hasAudio:T,hasVideo:E,nb:1,dropped:0};return f.audio=w.type==="audio"?w:void 0,f.video=w.type!=="audio"?w:void 0,f.initSegment=h,f.id3=Qy(r,s,u,u),i.samples.length&&(f.text=Jy(i,s,u)),f}}function qA(t,e,n,r){if(t===null)return!0;const i=Math.max(r,1),s=e-t.baseTime/t.timescale;return Math.abs(s-n)>i}function xp(t,e){const n=t==null?void 0:t.codec;if(n&&n.length>4)return n;if(e===Qe.AUDIO){if(n==="ec-3"||n==="ac-3"||n==="alac")return n;if(n==="fLaC"||n==="Opus")return Sc(n,!1);const r="mp4a.40.5";return P.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${r}"`),r}return P.warn(`Unhandled video codec "${n}"`),n==="hvc1"||n==="hev1"?"hvc1.1.6.L120.90":n==="av01"?"av01.0.04M.08":"avc1.42e01e"}let vn;try{vn=self.performance.now.bind(self.performance)}catch{P.debug("Unable to use Performance API on this environment"),vn=xi==null?void 0:xi.Date.now}const zo=[{demux:OA,remux:YA},{demux:Un,remux:jo},{demux:PA,remux:jo},{demux:jA,remux:jo}];zo.splice(2,0,{demux:NA,remux:jo});class Sp{constructor(e,n,r,i,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.vendor=i,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,i){const s=r.transmuxing;s.executeStart=vn();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:u,discontinuity:c,trackSwitch:f,accurateTimeOffset:d,timeOffset:h,initSegmentChange:p}=i||a,{audioCodec:m,videoCodec:y,defaultInitPts:g,duration:v,initSegmentData:x}=l,T=XA(o,n);if(T&&T.method==="AES-128"){const A=this.getDecrypter();if(A.isSync()){let F=A.softwareDecrypt(o,T.key.buffer,T.iv.buffer);if(r.part>-1&&(F=A.flush()),!F)return s.executeEnd=vn(),ru(r);o=new Uint8Array(F)}else return this.decryptionPromise=A.webCryptoDecrypt(o,T.key.buffer,T.iv.buffer).then(F=>{const I=this.push(F,null,r);return this.decryptionPromise=null,I}),this.decryptionPromise}const E=this.needsProbing(c,f);if(E){const A=this.configureTransmuxer(o);if(A)return P.warn(`[transmuxer] ${A.message}`),this.observer.emit(S.ERROR,S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_PARSING_ERROR,fatal:!1,error:A,reason:A.message}),s.executeEnd=vn(),ru(r)}(c||f||p||E)&&this.resetInitSegment(x,m,y,v,n),(c||p||E)&&this.resetInitialTimestamp(g),u||this.resetContiguity();const k=this.transmux(o,T,h,d,r),w=this.currentTransmuxState;return w.contiguous=!0,w.discontinuity=!1,w.trackSwitch=!1,s.executeEnd=vn(),k}flush(e){const n=e.transmuxing;n.executeStart=vn();const{decrypter:r,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const o=[],{timeOffset:a}=i;if(r){const f=r.flush();f&&o.push(this.push(f,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u)return n.executeEnd=vn(),[ru(e)];const c=l.flush(a);return Go(c)?c.then(f=>(this.flushRemux(o,f,e),o)):(this.flushRemux(o,c,e),o)}flushRemux(e,n,r){const{audioTrack:i,videoTrack:s,id3Track:o,textTrack:a}=n,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;P.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const c=this.remuxer.remux(i,s,o,a,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=vn()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,i,s){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,r,i),a.resetInitSegment(e,n,r,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,i,s){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,r,i,s):o=this.transmuxUnencrypted(e,r,i,s),o}transmuxUnencrypted(e,n,r,i){const{audioTrack:s,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,a,l,n,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,n,r,i,s){return this.demuxer.demuxSampleAes(e,n,r).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,r,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:i,vendor:s}=this;let o;for(let d=0,h=zo.length;d<h;d++){var a;if((a=zo[d].demux)!=null&&a.probe(e)){o=zo[d];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,u=this.remuxer,c=o.remux,f=o.demux;(!u||!(u instanceof c))&&(this.remuxer=new c(r,n,i,s)),(!l||!(l instanceof f))&&(this.demuxer=new f(r,n,i),this.probe=f.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Xf(this.config)),e}}function XA(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const ru=t=>({remuxResult:{},chunkMeta:t});function Go(t){return"then"in t&&t.then instanceof Function}class QA{constructor(e,n,r,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=i,this.defaultInitPts=s||null}}class JA{constructor(e,n,r,i,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=o}}var Zy={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new i(c,f||l,d),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,p=new Array(h);d<h;d++)p[d]=f[d].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,c,f,d,h,p){var m=n?n+u:u;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,v,x;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,f),!0;case 4:return y.fn.call(y.context,c,f,d),!0;case 5:return y.fn.call(y.context,c,f,d,h),!0;case 6:return y.fn.call(y.context,c,f,d,h,p),!0}for(x=1,v=new Array(g-1);x<g;x++)v[x-1]=arguments[x];y.fn.apply(y.context,v)}else{var T=y.length,E;for(x=0;x<T;x++)switch(y[x].once&&this.removeListener(u,y[x].fn,void 0,!0),g){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,c);break;case 3:y[x].fn.call(y[x].context,c,f);break;case 4:y[x].fn.call(y[x].context,c,f,d);break;default:if(!v)for(E=1,v=new Array(g-1);E<g;E++)v[E-1]=arguments[E];y[x].fn.apply(y[x].context,v)}}return!0},a.prototype.on=function(u,c,f){return s(this,u,c,f,!1)},a.prototype.once=function(u,c,f){return s(this,u,c,f,!0)},a.prototype.removeListener=function(u,c,f,d){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!d||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==c||d&&!p[m].once||f&&p[m].context!==f)&&y.push(p[m]);y.length?this._events[h]=y.length===1?y[0]:y:o(this,h)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Zy);var ZA=Zy.exports,ev=DC(ZA);class ek{constructor(e,n,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=n,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const o=(c,f)=>{f=f||{},f.frag=this.frag,f.id=this.id,c===S.ERROR&&(this.error=f.error),this.hls.trigger(c,f)};this.observer=new ev,this.observer.on(S.FRAG_DECRYPTED,o),this.observer.on(S.ERROR,o);const a=Yf(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')},u=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||vA())){try{s.workerPath?(P.log(`loading Web Worker ${s.workerPath} for "${n}"`),this.workerContext=SA(s.workerPath)):(P.log(`injecting Web Worker for "${n}"`),this.workerContext=xA()),this.onwmsg=d=>this.onWorkerMessage(d);const{worker:f}=this.workerContext;f.addEventListener("message",this.onwmsg),f.onerror=d=>{const h=new Error(`${d.message}  (${d.filename}:${d.lineno})`);s.enableWorker=!1,P.warn(`Error in "${n}" Web Worker, fallback to inline`),this.hls.trigger(S.ERROR,{type:ue.OTHER_ERROR,details:G.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})},f.postMessage({cmd:"init",typeSupported:l,vendor:u,id:n,config:JSON.stringify(s)})}catch(f){P.warn(`Error setting up "${n}" Web Worker, fallback to inline`,f),this.resetWorker(),this.error=null,this.transmuxer=new Sp(this.observer,l,s,u,n)}return}this.transmuxer=new Sp(this.observer,l,s,u,n)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:n}=this.workerContext;n&&self.URL.revokeObjectURL(n),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,n,r,i,s,o,a,l,u,c){var f,d;u.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=o?o.start:s.start,m=s.decryptdata,y=this.frag,g=!(y&&s.cc===y.cc),v=!(y&&u.level===y.level),x=y?u.sn-y.sn:-1,T=this.part?u.part-this.part.index:-1,E=x===0&&u.id>1&&u.id===(y==null?void 0:y.stats.chunkCount),k=!v&&(x===1||x===0&&(T===1||E&&T<=0)),w=self.performance.now();(v||x||s.stats.parsing.start===0)&&(s.stats.parsing.start=w),o&&(T||!k)&&(o.stats.parsing.start=w);const A=!(y&&((f=s.initSegment)==null?void 0:f.url)===((d=y.initSegment)==null?void 0:d.url)),F=new JA(g,k,l,v,p,A);if(!k||g||A){P.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${u.sn} p: ${u.part} level: ${u.level} id: ${u.id}
        discontinuity: ${g}
        trackSwitch: ${v}
        contiguous: ${k}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${A}`);const I=new QA(r,i,n,a,c);this.configureTransmuxer(I)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:m,chunkMeta:u,state:F},e instanceof ArrayBuffer?[e]:[]);else if(h){const I=h.push(e,m,u,F);Go(I)?(h.async=!0,I.then(H=>{this.handleTransmuxComplete(H)}).catch(H=>{this.transmuxerError(H,u,"transmuxer-interface push error")})):(h.async=!1,this.handleTransmuxComplete(I))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){let r=n.flush(e);Go(r)||n.async?(Go(r)||(r=Promise.resolve(r)),r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(r,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_PARSING_ERROR,chunkMeta:n,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}onWorkerMessage(e){const n=e.data,r=this.hls;switch(n.event){case"init":{var i;const s=(i=this.workerContext)==null?void 0:i.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(n.data);break}case"flush":{this.onFlush(n.data);break}case"workerLog":P[n.data.logType]&&P[n.data.logType](n.data.message);break;default:{n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,r.trigger(n.event,n.data);break}}}configureTransmuxer(e){const{transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function tv(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Si(t[n].attrs,e[n].attrs))return!1;return!0}function Si(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function Cc(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}const Ep=100;class tk extends Uy{constructor(e,n,r){super(e,n,r,"[audio-stream-controller]",fe.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.ERROR,this.onError,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.ERROR,this.onError,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:s}){if(r==="main"){const o=n.cc;this.initPTS[n.cc]={baseTime:i,timescale:s},this.log(`InitPTS for cc: ${o} found from main: ${i}`),this.videoTrackCC=o,this.state===q.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=q.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Ep),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=q.IDLE):(this.loadedmetadata=!1,this.state=q.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case q.IDLE:this.doTickIdle();break;case q.WAITING_TRACK:{var e;const{levels:r,trackId:i}=this,s=r==null||(e=r[i])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=q.WAITING_INIT_PTS}break}case q.FRAG_LOADING_WAITING_RETRY:{var n;const r=performance.now(),i=this.retryDate;if(!i||r>=i||(n=this.media)!=null&&n.seeking){const{levels:s,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[o])||null),this.state=q.IDLE}break}case q.WAITING_INIT_PTS:{const r=this.waitingData;if(r){const{frag:i,part:s,cache:o,complete:a}=r;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=q.FRAG_LOADING;const l=o.flush(),u={frag:i,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(u),a&&super._handleFragmentLoadComplete(u)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),u=$e.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);Tc(u.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${u.end} is needed`),this.clearWaitingFragment())}}else this.state=q.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=q.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:n,media:r,trackId:i}=this,s=e.config;if(!r&&(this.startFragRequested||!s.startFragPrefetch)||!(n!=null&&n[i]))return;const o=n[i],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=q.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Qe.AUDIO,fe.AUDIO));const u=this.getFwdBufferInfo(l,fe.AUDIO);if(u===null)return;const{bufferedTrack:c,switchingTrack:f}=this;if(!f&&this._streamEnded(u,a)){e.trigger(S.BUFFER_EOS,{type:"audio"}),this.state=q.ENDED;return}const d=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,fe.MAIN),h=u.len,p=this.getMaxBufferLength(d==null?void 0:d.len),m=a.fragments,y=m[0].start;let g=this.flushing?this.getLoadPosition():u.end;if(f&&r){const E=this.getLoadPosition();c&&!Si(f.attrs,c.attrs)&&(g=E),a.PTSKnown&&E<y&&(u.end>y||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=y+.05)}if(h>=p&&!f&&g<m[m.length-1].start)return;let v=this.getNextFragment(g,a),x=!1;if(v&&this.isLoopLoading(v,g)&&(x=!!v.gap,v=this.getNextFragmentLoopLoading(v,a,u,fe.MAIN,p)),!v){this.bufferFlushed=!0;return}const T=d&&v.start>d.end+a.targetduration;if(T||!(d!=null&&d.len)&&u.len){const E=this.getAppendedFrag(v.start,fe.MAIN);if(E===null||(x||(x=!!E.gap||!!T&&d.len===0),T&&!x||x&&u.nextStart&&u.nextStart<E.end))return}this.loadFragment(v,o,g)}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.min(Math.max(n,e),this.config.maxMaxBufferLength):n}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new Ta(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?this.setInterval(Ep):this.resetTransmuxer(),r?(this.switchingTrack=n,this.state=q.IDLE,this.flushAudioIfNeeded(n)):(this.switchingTrack=null,this.bufferedTrack=n,this.state=q.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,n){this.mainDetails=n.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(S.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,n){var r;if(this.mainDetails==null){this.cachedTrackLoadedData=n;return}const{levels:i}=this,{details:s,id:o}=n;if(!i){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Audio track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const a=i[o];let l=0;if(s.live||(r=a.details)!=null&&r.live){this.checkLiveUpdate(s);const c=this.mainDetails;if(s.deltaUpdateFailed||!c)return;if(!a.details&&s.hasProgramDateTime&&c.hasProgramDateTime)Aa(s,c),l=s.fragments[0].start;else{var u;l=this.alignPlaylists(s,a.details,(u=this.levelLastLoaded)==null?void 0:u.details)}}a.details=s,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,l),this.state===q.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=q.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:i,payload:s}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const u=l[a];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const f=o.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new ek(this.hls,fe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[r.cc],p=(n=r.initSegment)==null?void 0:n.data;if(h!==void 0){const y=i?i.index:-1,g=y!==-1,v=new Fy(r.level,r.sn,r.stats.chunkCount,s.byteLength,y,g);d.push(s,p,f,"",r,i,c.totalduration,!1,v,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:m}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new gA,complete:!1};m.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=q.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,n){const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer||null)}onFragBuffered(e,n){const{frag:r,part:i}=n;if(r.type!==fe.AUDIO){if(!this.loadedmetadata&&r.type===fe.MAIN){const s=this.videoBuffer||this.media;s&&$e.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(r.sn!=="initSegment"){this.fragPrevious=r;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(S.AUDIO_TRACK_SWITCHED,Et({},s)))}this.fragBufferedComplete(r,i)}onError(e,n){var r;if(n.fatal){this.state=q.ERROR;return}switch(n.details){case G.FRAG_GAP:case G.FRAG_PARSING_ERROR:case G.FRAG_DECRYPT_ERROR:case G.FRAG_LOAD_ERROR:case G.FRAG_LOAD_TIMEOUT:case G.KEY_LOAD_ERROR:case G.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(fe.AUDIO,n);break;case G.AUDIO_TRACK_LOAD_ERROR:case G.AUDIO_TRACK_LOAD_TIMEOUT:case G.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===q.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===Tn.AUDIO_TRACK&&(this.state=q.IDLE);break;case G.BUFFER_APPEND_ERROR:case G.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="audio")return;if(n.details===G.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case G.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==Qe.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==Qe.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===q.ENDED&&(this.state=q.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,fe.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:i}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:u,level:c}=a,{details:f}=c,{audio:d,text:h,id3:p,initSegment:m}=s;if(this.fragContextChanged(l)||!f){this.fragmentTracker.removeFragment(l);return}if(this.state=q.PARSING,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const y=l.initSegment||l;this._bufferInitSegment(c,m.tracks,y,o),i.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:r,tracks:m.tracks})}if(d){const{startPTS:y,endPTS:g,startDTS:v,endDTS:x}=d;u&&(u.elementaryStreams[Qe.AUDIO]={startPTS:y,endPTS:g,startDTS:v,endDTS:x}),l.setElementaryStreamInfo(Qe.AUDIO,y,g,v,x),this.bufferFragmentData(d,l,u,o)}if(p!=null&&(n=p.samples)!=null&&n.length){const y=Ze({id:r,frag:l,details:f},p);i.trigger(S.FRAG_PARSING_METADATA,y)}if(h){const y=Ze({id:r,frag:l,details:f},h);i.trigger(S.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,n,r,i){if(this.state!==q.PARSING)return;n.video&&delete n.video;const s=n.audio;if(!s)return;s.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(S.BUFFER_CODECS,n);const a=s.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:a};this.hls.trigger(S.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===Ht.NOT_LOADED||i===Ht.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,n);else if((s=n.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=q.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==n.details.fragments[0].start&&Aa(n.details,o)}else this.startFragRequested=!0,super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:n,bufferedTrack:r}=this,i=r==null?void 0:r.attrs,s=e.attrs;n&&i&&(i.CHANNELS!==s.CHANNELS||r.name!==e.name||r.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(S.AUDIO_TRACK_SWITCHED,Et({},e))}}class nk extends Oy{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:i,details:s}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Audio track ${r} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(d=>!r||r.indexOf(d.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(d=>d.default)&&(this.selectDefaultTrack=!1),a.forEach((d,h)=>{d.id=h});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!s&&l){const d=ln(l,a,Fr);if(d>-1)s=a[d];else{const h=ln(l,this.tracks);s=this.tracks[h]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const c={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(S.AUDIO_TRACKS_UPDATED,c);const f=this.trackId;if(u!==-1&&f===-1)this.setAudioTrack(u);else if(a.length&&f===-1){var o;const d=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(d.message),this.hls.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:d})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,n){n.fatal||!n.context||n.context.type===Tn.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(n))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&li(e,i,Fr))return i;const s=ln(e,this.tracksInGroup,Fr);if(s>-1){const o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(i){let o=n.loadLevel;o===-1&&(o=n.firstAutoLevel);const a=tA(e,n.levels,r,o,Fr);if(a===-1)return null;n.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=ln(e,r);if(o>-1)return r[o]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===r&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(S.AUDIO_TRACK_SWITCHING,Et({},i)),s))return;const o=this.switchParams(i.url,r==null?void 0:r.details);this.loadPlaylist(o)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||li(e,i,Fr)))return r}if(e){const{name:r,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l}=e;for(let u=0;u<n.length;u++){const c=n[u];if(li({name:r,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l},c,Fr))return u}for(let u=0;u<n.length;u++){const c=n[u];if(Si(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<n.length;u++){const c=n[u];if(Si(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){super.loadPlaylist();const r=n.id,i=n.groupId;let s=n.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${r} "${n.name}" lang:${n.lang} group:${i}`),this.clearTimer(),this.hls.trigger(S.AUDIO_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:e||null})}}}const Tp=500;class rk extends Uy{constructor(e,n,r){super(e,n,r,"[subtitle-stream-controller]",fe.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.ERROR,this.onError,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.ERROR,this.onError,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=q.IDLE,this.setInterval(Tp),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:i}=n;if(this.fragPrevious=r,this.state=q.IDLE,!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const a=r.start;for(let u=0;u<s.length;u++)if(a>=s[u].start&&a<=s[u].end){o=s[u];break}const l=r.start+r.duration;o?o.end=l:(o={start:a,end:l},s.push(o)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null)}onBufferFlushing(e,n){const{startOffset:r,endOffset:i}=n;if(r===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;n.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=s){o.shift();continue}else if(o[a].start<s)o[a].start=s;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,s,fe.SUBTITLE)}}onFragBuffered(e,n){if(!this.loadedmetadata&&n.frag.type===fe.MAIN){var r;(r=this.media)!=null&&r.buffered.length&&(this.loadedmetadata=!0)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===fe.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==q.STOPPED&&(this.state=q.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&tv(this.levels,n)){this.levels=n.map(r=>new Ta(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const i=new Ta(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,fe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(Tp)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:i,levels:s}=this,{details:o,id:a}=n;if(!s){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=s[i];if(a>=s.length||a!==i||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(o.live||(r=l.details)!=null&&r.live){const f=this.mainDetails;if(o.deltaUpdateFailed||!f)return;const d=f.fragments[0];if(!l.details)o.hasProgramDateTime&&f.hasProgramDateTime?(Aa(o,f),u=o.fragments[0].start):d&&(u=d.start,Ec(o,u));else{var c;u=this.alignPlaylists(o,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&d&&(u=d.start,Ec(o,u))}}l.details=o,this.levelLastLoaded=l,!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,u),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===q.IDLE&&(Ra(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,i=n.decryptdata,s=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch(a=>{throw s.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const l=performance.now();s.trigger(S.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=q.IDLE})}}doTick(){if(!this.media){this.state=q.IDLE;return}if(this.state===q.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details)return;const{config:i}=this,s=this.getLoadPosition(),o=$e.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:a,len:l}=o,u=this.getFwdBufferInfo(this.media,fe.MAIN),c=r.details,f=this.getMaxBufferLength(u==null?void 0:u.len)+c.levelTargetDuration;if(l>f)return;const d=c.fragments,h=d.length,p=c.edge;let m=null;const y=this.fragPrevious;if(a<p){const g=i.maxFragLookUpTolerance,v=a>p-g?0:g;m=Ra(y,d,Math.max(d[0].start,a),v),!m&&y&&y.start<d[0].start&&(m=d[0])}else m=d[h-1];if(!m)return;if(m=this.mapToInitFragWhenRequired(m),m.sn!=="initSegment"){const g=m.sn-c.startSN,v=d[g-1];v&&v.cc===m.cc&&this.fragmentTracker.getState(v)===Ht.NOT_LOADED&&(m=v)}this.fragmentTracker.getState(m)===Ht.NOT_LOADED&&this.loadFragment(m,r,a)}}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.max(n,e):n}loadFragment(e,n,r){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,n):(this.startFragRequested=!0,super.loadFragment(e,n,r))}get mediaBufferTimeRanges(){return new ik(this.tracksBuffered[this.currentTrackId]||[])}}class ik{constructor(e){this.buffered=void 0;const n=(r,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}class sk extends Oy{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=Bo(this.media.textTracks);for(let s=0;s<r.length;s++)if(r[s].mode==="hidden")n=r[s];else if(r[s].mode==="showing"){n=r[s];break}const i=this.findTrackForTextTrack(n);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Bo(this.media.textTracks).forEach(n=>{Wi(n)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:i,details:s}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Subtitle track ${r} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(c=>!r||r.indexOf(c.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(c=>c.default)&&(this.selectDefaultTrack=!1),o.forEach((c,f)=>{c.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!s&&a){this.selectDefaultTrack=!1;const c=ln(a,o);if(c>-1)s=o[c];else{const f=ln(a,this.tracks);s=this.tracks[f]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const u={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(S.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<n.length;i++){const s=n[i];if(!(r&&!s.default||!r&&!e)&&(!e||li(s,e)))return i}if(e){for(let i=0;i<n.length;i++){const s=n[i];if(Si(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<n.length;i++){const s=n[i];if(Si(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(Cc(i,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===Tn.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&li(e,r))return r;const i=ln(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(r)return null;{const s=ln(e,n);if(s>-1)return n[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){const r=n.id,i=n.groupId;let s=n.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(S.SUBTITLE_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=Bo(e.textTracks),r=this.currentTrack;let i;if(r&&(i=n.filter(s=>Cc(r,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!ne(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:o,groupId:a="",name:l,type:u,url:c}=i;this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:u,url:c});const f=this.switchParams(i.url,r==null?void 0:r.details);this.loadPlaylist(f)}}class ok{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,n,r){const i=this.queues[n];i.push(e),i.length===1&&!r&&this.executeNext(n)}insertAbort(e,n){this.queues[n].unshift(e),this.executeNext(n)}appendBlocker(e){let n;const r=new Promise(s=>{n=s}),i={execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),r}executeNext(e){const n=this.queues[e];if(n.length){const r=n[0];try{r.execute()}catch(i){P.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),r.onError(i);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const wp=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class ak{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=r=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:r,mediaSource:i}=this;this.log("Media source opened"),r&&(r.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(S.MEDIA_ATTACHED,{media:r,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&P.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e;const n="[buffer-controller]";this.appendSource=e.config.preferManagedMediaSource&&typeof self<"u"&&self.ManagedMediaSource,this.log=P.log.bind(P,n),this.warn=P.warn.bind(P,n),this.error=P.error.bind(P,n),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_APPENDING,this.onBufferAppending,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.BUFFER_EOS,this.onBufferEos,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(S.FRAG_PARSED,this.onFragParsed,this),e.on(S.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_APPENDING,this.onBufferAppending,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.BUFFER_EOS,this.onBufferEos,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(S.FRAG_PARSED,this.onFragParsed,this),e.off(S.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new ok(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){let r=2;(n.audio&&!n.video||!n.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,n){const r=this.media=n.media,i=Yf(this.appendSource);if(r&&i){var s;const o=this.mediaSource=new i;this.log(`created media source: ${(s=o.constructor)==null?void 0:s.name}`),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{r.removeAttribute("src");const l=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||l&&o instanceof l,Cp(r),lk(r,a),r.load()}catch{r.src=a}else r.src=a;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:n,_objectUrl:r}=this;if(n){if(this.log("media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&Cp(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(S.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer()}resetBuffer(e){const n=this.sourceBuffer[e];try{if(n){var r;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,n){const r=this.getSourceBufferTypes().length,i=Object.keys(n);if(i.forEach(o=>{if(r){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:u,codec:c,levelCodec:f,container:d,metadata:h}=n[o],p=tp(l.codec,l.levelCodec),m=p==null?void 0:p.replace(wp,"$1");let y=tp(c,f);const g=(a=y)==null?void 0:a.replace(wp,"$1");if(y&&m!==g){o.slice(0,5)==="audio"&&(y=Sc(y,this.appendSource));const v=`${d};codecs=${y}`;this.appendChangeType(o,v),this.log(`switching codec ${p} to ${y}`),this.tracks[o]={buffer:l.buffer,codec:c,container:d,levelCodec:f,metadata:h,id:u}}}}else this.pendingTracks[o]=n[o]}),r)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,n){const{operationQueue:r}=this,i={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${n}`),s.changeType(n)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};r.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,n){const{hls:r,operationQueue:i,tracks:s}=this,{data:o,type:a,frag:l,part:u,chunkMeta:c}=n,f=c.buffering[a],d=self.performance.now();f.start=d;const h=l.stats.buffering,p=u?u.stats.buffering:null;h.start===0&&(h.start=d),p&&p.start===0&&(p.start=d);const m=s.audio;let y=!1;a==="audio"&&(m==null?void 0:m.container)==="audio/mpeg"&&(y=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=l.start,v={execute:()=>{if(f.executeStart=self.performance.now(),y){const x=this.sourceBuffer[a];if(x){const T=g-x.timestampOffset;Math.abs(T)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${g} (delta: ${T}) sn: ${l.sn})`),x.timestampOffset=g)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const x=self.performance.now();f.executeEnd=f.end=x,h.first===0&&(h.first=x),p&&p.first===0&&(p.first=x);const{sourceBuffer:T}=this,E={};for(const k in T)E[k]=$e.getBuffered(T[k]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(S.BUFFER_APPENDED,{type:a,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:E})},onError:x=>{const T={type:ue.MEDIA_ERROR,parent:l.type,details:G.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:u,chunkMeta:c,error:x,err:x,fatal:!1};if(x.code===DOMException.QUOTA_EXCEEDED_ERR)T.details=G.BUFFER_FULL_ERROR;else{const E=++this.appendErrors[a];T.details=G.BUFFER_APPEND_ERROR,this.warn(`Failed ${E}/${r.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),E>=r.config.appendErrorMaxRetry&&(T.fatal=!0)}r.trigger(S.ERROR,T)}};i.append(v,a,!!this.pendingTracks[a])}onBufferFlushing(e,n){const{operationQueue:r}=this,i=s=>({execute:this.removeExecutor.bind(this,s,n.startOffset,n.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(S.BUFFER_FLUSHED,{type:s})},onError:o=>{this.warn(`Failed to remove from ${s} SourceBuffer`,o)}});n.type?r.append(i(n.type),n.type):this.getSourceBufferTypes().forEach(s=>{r.append(i(s),s)})}onFragParsed(e,n){const{frag:r,part:i}=n,s=[],o=i?i.elementaryStreams:r.elementaryStreams;o[Qe.AUDIOVIDEO]?s.push("audiovideo"):(o[Qe.AUDIO]&&s.push("audio"),o[Qe.VIDEO]&&s.push("video"));const a=()=>{const l=self.performance.now();r.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const u=i?i.stats:r.stats;this.hls.trigger(S.FRAG_BUFFERED,{frag:r,part:i,stats:u,id:r.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,s)}onFragChanged(e,n){this.trimBuffers()}onBufferEos(e,n){this.getSourceBufferTypes().reduce((i,s)=>{const o=this.sourceBuffer[s];return o&&(!n.type||n.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} sourceBuffer now EOS`))),i&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const o=this.sourceBuffer[s];o&&(o.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.getSourceBufferTypes().length)return;const s=e.config,o=r.currentTime,a=n.levelTargetDuration,l=n.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(ne(l)&&l>0){const u=Math.max(l,a),c=Math.floor(o/a)*a-u;this.flushBackBuffer(o,a,c)}if(ne(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const u=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),c=Math.max(u,a),f=Math.floor(o/a)*a+c;this.flushFrontBuffer(o,a,f)}}flushBackBuffer(e,n,r){const{details:i,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(a=>{const l=s[a];if(l){const u=$e.getBuffered(l);if(u.length>0&&r>u.start(0)){if(this.hls.trigger(S.BACK_BUFFER_REACHED,{bufferEnd:r}),i!=null&&i.live)this.hls.trigger(S.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(l.ended&&u.end(u.length-1)-e<n*2){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:a})}}})}flushFrontBuffer(e,n,r){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(o=>{const a=i[o];if(a){const l=$e.getBuffered(a),u=l.length;if(u<2)return;const c=l.start(u-1),f=l.end(u-1);if(r>c||e>=c&&e<=f)return;if(a.ended&&e-f<2*n){this.log(`Cannot flush ${o} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:n,media:r,mediaSource:i}=this,s=e.fragments[0].start+e.totalduration,o=r.duration,a=ne(i.duration)?i.duration:0;e.live&&n.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(s>a&&s>o||!ne(o))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),i.duration=s)}updateSeekableRange(e){const n=this.mediaSource,r=e.fragments;if(r.length&&e.live&&n!=null&&n.setLiveSeekableRange){const s=Math.max(0,r[0].start),o=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${n.duration}. Setting seekable range to ${s}-${o}.`),n.setLiveSeekableRange(s,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:n,pendingTracks:r}=this,i=Object.keys(r).length;if(i&&(!e||i===2||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(S.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(o=>{n.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:n,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!n[i]){const s=e[i];if(!s)throw Error(`source buffer exists for track ${i}, however track does not`);let o=s.levelCodec||s.codec;o&&i.slice(0,5)==="audio"&&(o=Sc(o,this.appendSource));const a=`${s.container};codecs=${o}`;this.log(`creating sourceBuffer(${a})`);try{const l=n[i]=r.addSourceBuffer(a),u=i;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(u,"bufferedchange",(c,f)=>{const d=f.removedRanges;d!=null&&d.length&&this.hls.trigger(S.BUFFER_FLUSHED,{type:i})}),this.tracks[i]={buffer:l,codec:o,container:s.container,levelCodec:s.levelCodec,metadata:s.metadata,id:s.id}}catch(l){this.error(`error while trying to add sourceBuffer: ${l.message}`),this.hls.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:l,sourceBufferName:i,mimeType:a})}}}get mediaSrc(){var e;const n=((e=this.media)==null?void 0:e.firstChild)||this.media;return n==null?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:n}=this;n.current(e).onStart()}_onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,n){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,n),this.hls.trigger(S.ERROR,{type:ue.MEDIA_ERROR,details:G.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(i)}removeExecutor(e,n,r){const{media:i,mediaSource:s,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!i||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const u=ne(i.duration)?i.duration:1/0,c=ne(s.duration)?s.duration:1/0,f=Math.max(0,n),d=Math.min(r,u,c);d>f&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${f},${d}] from the ${e} SourceBuffer`),l.remove(f,d)):o.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.sourceBuffer[n];if(!r){if(!this.pendingTracks[n])throw new Error(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);return}r.ended=!1,r.appendBuffer(e)}blockBuffers(e,n=this.getSourceBufferTypes()){if(!n.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:r}=this,i=n.map(s=>r.appendBlocker(s));Promise.all(i).then(()=>{e(),n.forEach(s=>{const o=this.sourceBuffer[s];o!=null&&o.updating||r.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,n,r){const i=this.sourceBuffer[e];if(!i)return;const s=r.bind(this,e);this.listeners[e].push({event:n,listener:s}),i.addEventListener(n,s)}removeBufferListeners(e){const n=this.sourceBuffer[e];n&&this.listeners[e].forEach(r=>{n.removeEventListener(r.event,r.listener)})}}function Cp(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function lk(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}const Rp={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},nv=function(e){let n=e;return Rp.hasOwnProperty(e)&&(n=Rp[e]),String.fromCharCode(n)},$t=15,gn=100,uk={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ck={17:2,18:4,21:6,22:8,23:10,19:13,20:15},fk={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},dk={25:2,26:4,29:6,30:8,31:10,27:13,28:15},hk=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class pk{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;P.log(`${this.time} [${e}] ${r}`)}}}const ur=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class rv{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const i=n[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class mk{constructor(){this.uchar=" ",this.penState=new rv}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class gk{constructor(e){this.chars=[],this.pos=0,this.currPenState=new rv,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<gn;n++)this.chars.push(new mk);this.logger=e}equals(e){for(let n=0;n<gn;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<gn;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<gn;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>gn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=gn)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=nv(e);if(this.pos>=gn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<gn;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<gn;r++){const i=this.chars[r].uchar;i!==" "&&(n=!1),e.push(i)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class iu{constructor(e){this.rows=[],this.currRow=$t-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<$t;n++)this.rows.push(new gk(e));this.logger=e}reset(){for(let e=0;e<$t;e++)this.rows[e].clear();this.currRow=$t-1}equals(e){let n=!0;for(let r=0;r<$t;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<$t;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<$t;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<$t;a++)this.rows[a].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[s].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(o.rows[s+u])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,o=Math.max(s-1,0);r.setCursor(e.indent),e.color=r.chars[o].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",i=-1;for(let s=0;s<$t;s++){const o=this.rows[s].getTextString();o&&(i=s+1,e?n.push("Row "+i+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class Ap{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new iu(r),this.nonDisplayedMemory=new iu(r),this.lastOutputScreen=new iu(r),this.currRollUpRow=this.displayedMemory.rows[$t-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[$t-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=i[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class kp{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=bp(),this.logger=void 0;const i=this.logger=new pk;this.channels=[null,new Ap(e,n,i),new Ap(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){let r,i,s,o=!1;this.logger.time=e;for(let a=0;a<n.length;a+=2)if(i=n[a]&127,s=n[a+1]&127,!(i===0&&s===0)){if(this.logger.log(3,"["+ur([n[a],n[a+1]])+"] -> ("+ur([i,s])+")"),r=this.parseCmd(i,s),r||(r=this.parseMidrow(i,s)),r||(r=this.parsePAC(i,s)),r||(r=this.parseBackgroundAttributes(i,s)),!r&&(o=this.parseChars(i,s),o)){const l=this.currentChannel;l&&l>0?this.channels[l].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!r&&!o&&this.logger.log(2,"Couldn't parse cleaned data "+ur([i,s])+" orig: "+ur([n[a],n[a+1]]))}}parseCmd(e,n){const{cmdHistory:r}=this,i=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=33&&n<=35;if(!(i||s))return!1;if(Lp(e,n,r))return Br(null,null,r),this.logger.log(3,"Repeated command ("+ur([e,n])+") is dropped"),!0;const o=e===20||e===21||e===23?1:2,a=this.channels[o];return e===20||e===21||e===28||e===29?n===32?a.ccRCL():n===33?a.ccBS():n===34?a.ccAOF():n===35?a.ccAON():n===36?a.ccDER():n===37?a.ccRU(2):n===38?a.ccRU(3):n===39?a.ccRU(4):n===40?a.ccFON():n===41?a.ccRDC():n===42?a.ccTR():n===43?a.ccRTD():n===44?a.ccEDM():n===45?a.ccCR():n===46?a.ccENM():n===47&&a.ccEOC():a.ccTO(n-32),Br(e,n,r),this.currentChannel=o,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(n),this.logger.log(3,"MIDROW ("+ur([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const i=this.cmdHistory,s=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,o=(e===16||e===24)&&n>=64&&n<=95;if(!(s||o))return!1;if(Lp(e,n,i))return Br(null,null,i),!0;const a=e<=23?1:2;n>=64&&n<=95?r=a===1?uk[e]:fk[e]:r=a===1?ck[e]:dk[e];const l=this.channels[a];return l?(l.setPAC(this.interpretPAC(r,n)),Br(e,n,i),this.currentChannel=a,!0):!1}interpretPAC(e,n){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,n){let r,i=null,s=null;if(e>=25?(r=2,s=e-8):(r=1,s=e),s>=17&&s<=19){let o;s===17?o=n+80:s===18?o=n+112:o=n+144,this.logger.log(2,"Special char '"+nv(o)+"' in channel "+r),i=[o]}else e>=32&&e<=127&&(i=n===0?[e]:[e,n]);if(i){const o=ur(i);this.logger.log(3,"Char codes =  "+o.join(",")),Br(e,n,this.cmdHistory)}return i}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=45&&n<=47;if(!(r||i))return!1;let s;const o={};e===16||e===24?(s=Math.floor((n-32)/2),o.background=hk[s],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),Br(e,n,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}this.cmdHistory=bp()}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function Br(t,e,n){n.a=t,n.b=e}function Lp(t,e,n){return n.a===t&&n.b===e}function bp(){return{a:null,b:null}}class mo{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var td=function(){if(xi!=null&&xi.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const u=l.toLowerCase();return~a.indexOf(u)?u:!1}function r(a){return n(t,a)}function i(a){return n(e,a)}function s(a,...l){let u=1;for(;u<arguments.length;u++){const c=arguments[u];for(const f in c)a[f]=c[f]}return a}function o(a,l,u){const c=this,f={enumerable:!0};c.hasBeenReset=!1;let d="",h=!1,p=a,m=l,y=u,g=null,v="",x=!0,T="auto",E="start",k=50,w="middle",A=50,F="middle";Object.defineProperty(c,"id",s({},f,{get:function(){return d},set:function(I){d=""+I}})),Object.defineProperty(c,"pauseOnExit",s({},f,{get:function(){return h},set:function(I){h=!!I}})),Object.defineProperty(c,"startTime",s({},f,{get:function(){return p},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");p=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",s({},f,{get:function(){return m},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");m=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",s({},f,{get:function(){return y},set:function(I){y=""+I,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",s({},f,{get:function(){return g},set:function(I){g=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",s({},f,{get:function(){return v},set:function(I){const H=r(I);if(H===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=H,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",s({},f,{get:function(){return x},set:function(I){x=!!I,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",s({},f,{get:function(){return T},set:function(I){if(typeof I!="number"&&I!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",s({},f,{get:function(){return E},set:function(I){const H=i(I);if(!H)throw new SyntaxError("An invalid or illegal string was specified.");E=H,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",s({},f,{get:function(){return k},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");k=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",s({},f,{get:function(){return w},set:function(I){const H=i(I);if(!H)throw new SyntaxError("An invalid or illegal string was specified.");w=H,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",s({},f,{get:function(){return A},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");A=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",s({},f,{get:function(){return F},set:function(I){const H=i(I);if(!H)throw new SyntaxError("An invalid or illegal string was specified.");F=H,this.hasBeenReset=!0}})),c.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class yk{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function iv(t){function e(r,i,s,o){return(r|0)*3600+(i|0)*60+(s|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class vk{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let i=0;i<r.length;++i)if(n===r[i]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function sv(t,e,n,r){const i=r?t.split(r):[t];for(const s in i){if(typeof i[s]!="string")continue;const o=i[s].split(n);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const Rc=new td(0,0,""),go=Rc.align==="middle"?"middle":"center";function xk(t,e,n){const r=t;function i(){const a=iv(t);if(a===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){const u=new vk;sv(a,function(d,h){let p;switch(d){case"region":for(let m=n.length-1;m>=0;m--)if(n[m].id===h){u.set(d,n[m].region);break}break;case"vertical":u.alt(d,h,["rl","lr"]);break;case"line":p=h.split(","),u.integer(d,p[0]),u.percent(d,p[0])&&u.set("snapToLines",!1),u.alt(d,p[0],["auto"]),p.length===2&&u.alt("lineAlign",p[1],["start",go,"end"]);break;case"position":p=h.split(","),u.percent(d,p[0]),p.length===2&&u.alt("positionAlign",p[1],["start",go,"end","line-left","line-right","auto"]);break;case"size":u.percent(d,h);break;case"align":u.alt(d,h,["start",go,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&Rc.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",go);let f=u.get("position","auto");f==="auto"&&Rc.position===50&&(f=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=f}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=i(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),o(),e.endTime=i(),o(),s(t,e)}function ov(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class Sk{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new yk,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let s=n.buffer,o=0;for(s=ov(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;const a=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,n.buffer=s.slice(o),a}function i(s){sv(s,function(o,a){},/:/)}try{let s="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;s=r();const a=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:s=r(),n.state){case"HEADER":/:/.test(s)?i(s):s||(n.state="ID");continue;case"NOTE":s||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){n.state="NOTE";break}if(!s)continue;if(n.cue=new td(0,0,""),n.state="CUE",s.indexOf("-->")===-1){n.cue.id=s;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{xk(s,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=s.indexOf("-->")!==-1;if(!s||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=s}continue;case"BADCUE":s||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const Ek=/\r\n|\n\r|\n|\r/g,su=function(e,n,r=0){return e.slice(r,r+n.length)===n},Tk=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!ne(n)||!ne(r)||!ne(i)||!ne(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*i,n+=60*60*1e3*s,n},ou=function(e){let n=5381,r=e.length;for(;r;)n=n*33^e.charCodeAt(--r);return(n>>>0).toString()};function nd(t,e,n){return ou(t.toString())+ou(e.toString())+ou(n)}const wk=function(e,n,r){let i=e[n],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(o=s)!=null&&o.new;){var o;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=r};function Ck(t,e,n,r,i,s,o){const a=new Sk,l=fn(new Uint8Array(t)).trim().replace(Ek,`
`).split(`
`),u=[],c=e?GA(e.baseTime,e.timescale):0;let f="00:00.000",d=0,h=0,p,m=!0;a.oncue=function(y){const g=n[r];let v=n.ccOffset;const x=(d-c)/9e4;if(g!=null&&g.new&&(h!==void 0?v=n.ccOffset=g.start:wk(n,r,x)),x){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}v=x-n.presentationOffset}const T=y.endTime-y.startTime,E=Rt((y.startTime+v-h)*9e4,i*9e4)/9e4;y.startTime=Math.max(E,0),y.endTime=Math.max(E+T,0);const k=y.text.trim();y.text=decodeURIComponent(encodeURIComponent(k)),y.id||(y.id=nd(y.startTime,y.endTime,k)),y.endTime>0&&u.push(y)},a.onparsingerror=function(y){p=y},a.onflush=function(){if(p){o(p);return}s(u)},l.forEach(y=>{if(m)if(su(y,"X-TIMESTAMP-MAP=")){m=!1,y.slice(16).split(",").forEach(g=>{su(g,"LOCAL:")?f=g.slice(6):su(g,"MPEGTS:")&&(d=parseInt(g.slice(7)))});try{h=Tk(f)/1e3}catch(g){p=g}return}else y===""&&(m=!1);a.parse(y+`
`)}),a.flush()}const au="stpp.ttml.im1t",av=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,lv=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Rk={left:"start",center:"center",right:"end",start:"start",end:"end"};function _p(t,e,n,r){const i=oe(new Uint8Array(t),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(a=>fn(a)),o=zA(e.baseTime,1,e.timescale);try{s.forEach(a=>n(Ak(a,o)))}catch(a){r(a)}}function Ak(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((f,d)=>(f[d]=i.getAttribute(`ttp:${d}`)||s[d],f),{}),a=i.getAttribute("xml:space")!=="preserve",l=Ip(lu(i,"styling","style")),u=Ip(lu(i,"layout","region")),c=lu(i,"body","[begin]");return[].map.call(c,f=>{const d=uv(f,a);if(!d||!f.hasAttribute("begin"))return null;const h=cu(f.getAttribute("begin"),o),p=cu(f.getAttribute("dur"),o);let m=cu(f.getAttribute("end"),o);if(h===null)throw Pp(f);if(m===null){if(p===null)throw Pp(f);m=h+p}const y=new td(h-e,m-e,d);y.id=nd(y.startTime,y.endTime,y.text);const g=u[f.getAttribute("region")],v=l[f.getAttribute("style")],x=kk(g,v,l),{textAlign:T}=x;if(T){const E=Rk[T];E&&(y.lineAlign=E),y.align=T}return Ze(y,x),y}).filter(f=>f!==null)}function lu(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function Ip(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function uv(t,e){return[].slice.call(t.childNodes).reduce((n,r,i)=>{var s;return r.nodeName==="br"&&i?n+`
`:(s=r.childNodes)!=null&&s.length?uv(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function kk(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(i=n[o]),s.reduce((a,l)=>{const u=uu(e,r,l)||uu(t,r,l)||uu(i,r,l);return u&&(a[l]=u),a},{})}function uu(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function Pp(t){return new Error(`Could not parse ttml timestamp ${t}`)}function cu(t,e){if(!t)return null;let n=iv(t);return n===null&&(av.test(t)?n=Lk(t,e):lv.test(t)&&(n=bk(t,e))),n}function Lk(t,e){const n=av.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function bk(t,e){const n=lv.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class _k{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Op(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new mo(this,"textTrack1"),n=new mo(this,"textTrack2"),r=new mo(this,"textTrack3"),i=new mo(this,"textTrack4");this.cea608Parser1=new kp(1,e,n),this.cea608Parser2=new kp(3,r,i)}}addCues(e,n,r,i,s){let o=!1;for(let a=s.length;a--;){const l=s[a],u=Ik(l[0],l[1],n,r);if(u>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],r),o=!0,u/(r-n)>.5))return}if(o||s.push([n,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,r,i)}else{const a=this.Cues.newCue(null,n,r,i);this.hls.trigger(S.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:s}){const{unparsedVttFrags:o}=this;r==="main"&&(this.initPTS[n.cc]={baseTime:i,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(S.FRAG_LOADED,a)}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const s=r.textTracks[i];if(Dp(s,{name:e,lang:n,attrs:{}}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:i}=this,{label:s,languageCode:o}=n[e],a=this.getExistingTrack(s,o);if(a)r[e]=a,Wi(r[e]),kR(r[e],i);else{const l=this.createTextTrack("captions",s,o);l&&(l[e]=!0,r[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,i={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,n,r){const i=this.media;if(i)return i.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>{Wi(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Op(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)Wi(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],i=r.some(s=>s.textCodec===au);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(tv(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const o=this.media,a=o?Bo(o.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(a){let f=null;for(let d=0;d<a.length;d++)if(a[d]&&Dp(a[d],l)){f=a[d],a[d]=null;break}f&&(c=f)}if(c)Wi(c);else{const f=cv(l);c=this.createTextTrack(f,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),a!=null&&a.length){const l=a.filter(u=>u!==null).map(u=>u.label);l.length&&P.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const s=`textTrack${i[1]}`,o=this.captionsProperties[s];o&&(o.label=r.name,r.lang&&(o.languageCode=r.lang),o.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:i,lastCc:s,lastSn:o,lastPartIndex:a}=this;if(!(!this.enabled||!r||!i)&&n.frag.type===fe.MAIN){var l,u;const{cc:c,sn:f}=n.frag,d=(l=n==null||(u=n.part)==null?void 0:u.index)!=null?l:-1;f===o+1||f===o&&d===a+1||c===s||(r.reset(),i.reset()),this.lastCc=c,this.lastSn=f,this.lastPartIndex=d}}onFragLoaded(e,n){const{frag:r,payload:i}=n;if(r.type===fe.SUBTITLE)if(i.byteLength){const s=r.decryptdata,o="stats"in n;if(s==null||!s.encrypted||o){const a=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===au?this._parseIMSC1(r,i):this._parseVTTs(n)}}else this.hls.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;_p(n,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{P.log(`Failed to parse IMSC1: ${i}`),r.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var n;const{frag:r,payload:i}=e,{initPTS:s,unparsedVttFrags:o}=this,a=s.length-1;if(!s[r.cc]&&a===-1){o.push(e);return}const l=this.hls,u=(n=r.initSegment)!=null&&n.data?Ot(r.initSegment.data,new Uint8Array(i)):i;Ck(u,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,c=>{this._appendCues(c,r.level),l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},c=>{const f=c.message==="Missing initPTS for VTT MPEGTS";f?o.push(e):this._fallbackToIMSC1(r,i),P.log(`Failed to parse VTT cue: ${c}`),!(f&&a>r.cc)&&l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:c})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||_p(n,this.initPTS[e.cc],()=>{r.textCodec=au,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[n];if(!i||i.mode==="disabled")return;e.forEach(s=>by(i,s))}else{const i=this.tracks[n];if(!i)return;const s=i.default?"default":"subtitles"+n;r.trigger(S.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===fe.SUBTITLE&&this.onFragLoaded(S.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:i}=this;if(!this.enabled||!r||!i)return;const{frag:s,samples:o}=n;if(!(s.type===fe.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const u=this.extractCea608Data(l);r.addData(o[a].pts,u[0]),i.addData(o[a].pts,u[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:s}){const{media:o}=this;if(!(!o||o.currentTime<r)){if(!s||s==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>np(a[l],n,r))}if(this.config.renderTextTracksNatively&&n===0&&i!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>np(a[l],n,i))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let i=2;for(let s=0;s<r;s++){const o=e[i++],a=127&e[i++],l=127&e[i++];if(a===0&&l===0)continue;if((4&o)!==0){const c=3&o;(c===0||c===1)&&(n[c].push(a),n[c].push(l))}}return n}}function cv(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function Dp(t,e){return!!t&&t.kind===cv(e)&&Cc(e,t)}function Ik(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function Op(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class rd{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&ne(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&P.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,rd.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const i=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let s=e.length-1;const o=Math.max(n,r);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&i(l,e[a+1])){s=a;break}}return s}}class Pk{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,n,r){const i=performance.now();if(n){if(this.lastTime){const s=i-this.lastTime,o=r-this.lastDroppedFrames,a=n-this.lastDecodedFrames,l=1e3*o/s,u=this.hls;if(u.trigger(S.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),l>0&&o>u.config.fpsDroppedMonitoringThreshold*a){let c=u.currentLevel;P.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(S.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const yo="[eme]";class ui{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=ui.CDMCleanupPromise?[ui.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=P.debug.bind(P,yo),this.log=P.log.bind(P,yo),this.warn=P.warn.bind(P,yo),this.error=P.error.bind(P,yo),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,i=n[e];if(i)return i.licenseUrl;if(e===we.WIDEVINE&&r)return r;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(o,a,l)=>!!o&&l.indexOf(o)===a,i=n.map(o=>o.audioCodec).filter(r),s=n.map(o=>o.videoCodec).filter(r);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,a)=>{const l=u=>{const c=u.shift();this.getMediaKeysPromise(c,i,s).then(f=>o({keySystem:c,mediaKeys:f})).catch(f=>{u.length?l(u):f instanceof Ct?a(f):a(new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return Sy===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,n)}getMediaKeysPromise(e,n,r){const i=qC(e,n,r,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let o=s==null?void 0:s.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),o=this.requestMediaKeySystemAccess(e,i);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const u=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),u.then(f=>f?this.setMediaKeysServerCertificate(c,e,f):c))),a.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),a.mediaKeys})}return o.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${nn.hexDump(e.keyId||[])}`);const i=r.createSession(),s={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(n),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,s,n.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return nn.hexDump(e.keyId)}updateKeySession(e,n){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${nn.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),i.update(n)}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((n,r)=>{const i=ql(this.config),s=e.map(qh).filter(o=>!!o&&i.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:o})=>{const a=Xh(o);a?n(a):r(new Error(`Unable to find format for key-system "${o}"`))}).catch(r)})}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),i=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${i}`);let s=this.keyIdToKeySessionPromise[r];return s||(s=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:n});return this.generateRequestWithPreferredKeySession(l,"cenc",n.pssh,"playlist-key")}))),s.catch(o=>this.handleError(o))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Ct?this.hls.trigger(S.ERROR,e.data):this.hls.trigger(S.ERROR,{type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const i=qh(e.keyFormat),s=i?[i]:ql(this.config);return this.attemptKeySystemAccess(s)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=ql(this.config)),e.length===0)throw new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:n,initData:r}=e;if(this.debug(`"${e.type}" event: init data type: "${n}"`),r===null)return;let i,s;if(n==="sinf"&&this.config.drmSystems[we.FAIRPLAY]){const c=Oe(new Uint8Array(r));try{const f=Vf(JSON.parse(c).sinf),d=Ay(new Uint8Array(f));if(!d)return;i=d.subarray(8,24),s=we.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const c=TR(r);if(c===null)return;c.version===0&&c.systemId===xy.WIDEVINE&&c.data&&(i=c.data.subarray(8,24)),s=YC(c.systemId)}if(!s||!i)return;const o=nn.hexDump(i),{keyIdToKeySessionPromise:a,mediaKeySessions:l}=this;let u=a[o];for(let c=0;c<l.length;c++){const f=l[c],d=f.decryptdata;if(d.pssh||!d.keyId)continue;const h=nn.hexDump(d.keyId);if(o===h||d.uri.replace(/-/g,"").indexOf(o)!==-1){u=a[h],delete a[h],d.pssh=new Uint8Array(r),d.keyId=i,u=a[o]=u.then(()=>this.generateRequestWithPreferredKeySession(f,n,r,"encrypted-event-key-match"));break}}u||(u=a[o]=this.getKeySystemSelectionPromise([s]).then(({keySystem:c,mediaKeys:f})=>{var d;this.throwIfDestroyed();const h=new Ea("ISO-23001-7",o,(d=Xh(c))!=null?d:"");return h.pssh=new Uint8Array(r),h.keyId=i,this.attemptSetMediaKeys(c,f).then(()=>{this.throwIfDestroyed();const p=this.createMediaKeySessionContext({decryptdata:h,keySystem:c,mediaKeys:f});return this.generateRequestWithPreferredKeySession(p,n,r,"encrypted-event-no-match")})})),u.catch(c=>this.handleError(c))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,n){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>r.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,n,r,i){var s,o;const a=(s=this.config.drmSystems)==null||(o=s[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const p=a.call(this.hls,n,r,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");n=p.initDataType,r=e.decryptdata.pssh=p.initData?new Uint8Array(p.initData):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const u=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${u} (init data type: ${n} length: ${r?r.byteLength:null})`);const c=new ev,f=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){c.emit("error",new Error("invalid state"));return}const{messageType:y,message:g}=p;this.log(`"${y}" message event for session "${m.sessionId}" message size: ${g.byteLength}`),y==="license-request"||y==="license-renewal"?this.renewLicense(e,g).catch(v=>{this.handleError(v),c.emit("error",v)}):y==="license-release"?e.keySystem===we.FAIRPLAY&&(this.updateKeySession(e,vc("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${y}"`)},d=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const y=e.keyStatus;c.emit("keyStatus",y),y==="expired"&&(this.warn(`${e.keySystem} expired for key ${u}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",f),e.mediaKeysSession.addEventListener("keystatuseschange",d);const h=new Promise((p,m)=>{c.on("error",m),c.on("keyStatus",y=>{y.startsWith("usable")?p():y==="output-restricted"?m(new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):y==="internal-error"?m(new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${y}"`)):y==="expired"?m(new Error("key expired while generating request")):this.warn(`unhandled key status change "${y}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${u}`)}).catch(p=>{throw new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>h).catch(p=>{throw c.removeAllListeners(),this.removeSession(e),p}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{this.log(`key status change "${n}" for keyStatuses keyId: ${nn.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${nn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,i=new r(n),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:s},u=n.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(d,h,p,m)=>{o(d.data)},onError:(d,h,p,m)=>{a(new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:Et({url:l.url,data:void 0},d)},`"${e}" certificate request failed (${s}). Status: ${d.code} (${d.text})`))},onTimeout:(d,h,p)=>{a(new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(d,h,p)=>{a(new Error("aborted"))}};i.load(l,c,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((i,s)=>{e.setServerCertificate(r).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),i(e)}).catch(o=>{s(new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const i=new DOMParser().parseFromString(r,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let c;for(let f=0,d=s.length;f<d;f++){var o,a;c=s[f];const h=(o=c.querySelector("name"))==null?void 0:o.textContent,p=(a=c.querySelector("value"))==null?void 0:a.textContent;h&&p&&e.setRequestHeader(h,p)}}const l=i.querySelector("Challenge"),u=l==null?void 0:l.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return vc(atob(u))}setupLicenseXHR(e,n,r,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,n,r,i)}).catch(o=>{if(!r.decryptdata)throw o;return e.open("POST",n,!0),s.call(this.hls,e,n,r,i)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||i})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const o=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,a,o,e)}catch(c){this.error(c)}i(l)}else{const l=r.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||a.status>=400&&a.status<500)s(new Ct({type:ue.KEY_SYSTEM_ERROR,details:G.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,n).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==we.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)})})}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,n=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ea.clearKeyUriToKeyIdMap();const r=n.length;ui.CDMCleanupPromise=Promise.all(n.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),n.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>n.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}ui.CDMCleanupPromise=void 0;class Ct extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}var Ye;(function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"})(Ye||(Ye={}));var Ac;(function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"})(Ac||(Ac={}));var yr;(function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"})(yr||(yr={}));const Dk={[yr.OBJECT]:["br","d","ot","tb"],[yr.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[yr.SESSION]:["cid","pr","sf","sid","st","v"],[yr.STATUS]:["bs","rtp"]};class Ei{constructor(e,n){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(r=>r instanceof Ei?r:new Ei(r))),this.value=e,this.params=n}}class fv{constructor(e){this.description=void 0,this.description=e}}const Ok="Dict";function Nk(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function Fk(t,e,n,r){return new Error(`failed to ${t} "${Nk(e)}" as ${n}`,{cause:r})}const Np="Bare Item",Mk="Boolean",Uk="Byte Sequence",Bk="Decimal",$k="Integer";function jk(t){return t<-999999999999999||999999999999999<t}const zk=/[\x00-\x1f\x7f]+/,Gk="Token",Hk="Key";function dn(t,e,n){return Fk("serialize",t,e,n)}function Vk(t){if(typeof t!="boolean")throw dn(t,Mk);return t?"?1":"?0"}function Wk(t){return btoa(String.fromCharCode(...t))}function Kk(t){if(ArrayBuffer.isView(t)===!1)throw dn(t,Uk);return`:${Wk(t)}:`}function dv(t){if(jk(t))throw dn(t,$k);return t.toString()}function Yk(t){return`@${dv(t.getTime()/1e3)}`}function hv(t,e){if(t<0)return-hv(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const i=Math.floor(t*n);return(i%2===0?i:i+1)/n}else return Math.round(t*n)/n}function qk(t){const e=hv(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw dn(t,Bk);const n=e.toString();return n.includes(".")?n:`${n}.0`}const Xk="String";function Qk(t){if(zk.test(t))throw dn(t,Xk);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Jk(t){return t.description||t.toString().slice(7,-1)}function Fp(t){const e=Jk(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw dn(e,Gk);return e}function kc(t){switch(typeof t){case"number":if(!ne(t))throw dn(t,Np);return Number.isInteger(t)?dv(t):qk(t);case"string":return Qk(t);case"symbol":return Fp(t);case"boolean":return Vk(t);case"object":if(t instanceof Date)return Yk(t);if(t instanceof Uint8Array)return Kk(t);if(t instanceof fv)return Fp(t);default:throw dn(t,Np)}}function Lc(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw dn(t,Hk);return t}function id(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${Lc(e)}`:`;${Lc(e)}=${kc(n)}`).join("")}function pv(t){return t instanceof Ei?`${kc(t.value)}${id(t.params)}`:kc(t)}function Zk(t){return`(${t.value.map(pv).join(" ")})${id(t.params)}`}function eL(t,e={whitespace:!0}){if(typeof t!="object")throw dn(t,Ok);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([i,s])=>{s instanceof Ei||(s=new Ei(s));let o=Lc(i);return s.value===!0?o+=id(s.params):(o+="=",Array.isArray(s.value)?o+=Zk(s):o+=pv(s)),o}).join(`,${r}`)}function tL(t,e){return eL(t,e)}const nL=t=>t==="ot"||t==="sf"||t==="st",rL=t=>typeof t=="number"?ne(t):t!=null&&t!==""&&t!==!1;function iL(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const i=n.pathname.split("/").slice(1),s=r.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")}function sL(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(i=="x"?s:s&3|8).toString(16)})}}}const Ho=t=>Math.round(t),oL=(t,e)=>(e!=null&&e.baseUrl&&(t=iL(t,e.baseUrl)),encodeURIComponent(t)),vo=t=>Ho(t/100)*100,aL={br:Ho,d:Ho,bl:vo,dl:vo,mtp:vo,nor:oL,rtp:vo,tb:Ho};function lL(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),i=Ze({},aL,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return r.forEach(o=>{if(s!=null&&s(o))return;let a=t[o];const l=i[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||rL(a)&&(nL(o)&&typeof a=="string"&&(a=new fv(a)),n[o]=a))}),n}function mv(t,e={}){return t?tL(lL(t,e),Ze({whitespace:!1},e)):""}function uL(t,e={}){if(!t)return{};const n=Object.entries(t),r=Object.entries(Dk).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),i=n.reduce((s,o)=>{var a,l;const[u,c]=o,f=((a=r.find(d=>d[1].includes(u)))==null?void 0:a[0])||yr.REQUEST;return(l=s[f])!=null||(s[f]={}),s[f][u]=c,s},{});return Object.entries(i).reduce((s,[o,a])=>(s[o]=mv(a,e),s),{})}function cL(t,e,n){return Ze(t,uL(e,n))}const fL="CMCD";function dL(t,e={}){if(!t)return"";const n=mv(t,e);return`${fL}=${encodeURIComponent(n)}`}const Mp=/CMCD=[^&#]+/;function hL(t,e,n){const r=dL(e,n);if(!r)return t;if(Mp.test(t))return t.replace(Mp,r);const i=t.includes("?")?"&":"?";return`${t}${i}${r}`}class pL{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Ye.MANIFEST,su:!this.initialized})}catch(s){P.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const s=i.frag,o=this.hls.levels[s.level],a=this.getObjectType(s),l={d:s.duration*1e3,ot:a};(a===Ye.VIDEO||a===Ye.AUDIO||a==Ye.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(i,l)}catch(s){P.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||sL(),this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHED,this.onMediaDetached,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHED,this.onMediaDetached,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,i;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=n.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Ac.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){Ze(n,this.createData());const r=n.ot===Ye.INIT||n.ot===Ye.VIDEO||n.ot===Ye.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:i}=this;i&&(n=Object.keys(n).reduce((s,o)=>(i.includes(o)&&(s[o]=n[o]),s),{})),this.useHeaders?(e.headers||(e.headers={}),cL(e.headers,n)):e.url=hL(e.url,n)}getObjectType(e){const{type:n}=e;if(n==="subtitle")return Ye.TIMED_TEXT;if(e.sn==="initSegment")return Ye.INIT;if(n==="audio")return Ye.AUDIO;if(n==="main")return this.hls.audioTracks.length?Ye.VIDEO:Ye.MUXED}getTopBandwidth(e){let n=0,r;const i=this.hls;if(e===Ye.AUDIO)r=i.audioTracks;else{const s=i.maxAutoLevel,o=s>-1?s+1:i.levels.length;r=i.levels.slice(0,o)}for(const s of r)s.bitrate>n&&(n=s.bitrate);return n>0?n:NaN}getBufferLength(e){const n=this.hls.media,r=e===Ye.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:$e.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}}const mL=3e5;class gL{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=P.log.bind(P,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===Ge.SendAlternateToPenaltyBox&&r.flags===Bt.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this.pathwayPriority,o=this.pathwayId;if(n.context){const{groupId:a,pathwayId:l,type:u}=n.context;a&&i?o=this.getPathwayForGroupId(a,u,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&i&&(s=i.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),s&&s.length>1&&(this.updatePathwayPriority(s),r.resolved=this.pathwayId!==o),r.resolved||P.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${o} levels: ${i&&i.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length?(this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let n;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(s=>{i-r[s]>mL&&delete r[s]});for(let s=0;s<e.length;s++){const o=e[s];if(o in r)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,BR(n),this.hls.trigger(S.LEVELS_UPDATED,{levels:n});const u=this.hls.levels[a];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,n,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(n===Tn.AUDIO_TRACK&&i[s].hasAudioGroup(e)||n===Tn.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},i={};e.forEach(s=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=s;if(n.some(c=>c.pathwayId===o))return;const u=this.getLevelsForPathway(a).map(c=>{const f=new $s(c.attrs);f["PATHWAY-ID"]=o;const d=f.AUDIO&&`${f.AUDIO}_clone_${o}`,h=f.SUBTITLES&&`${f.SUBTITLES}_clone_${o}`;d&&(r[f.AUDIO]=d,f.AUDIO=d),h&&(i[f.SUBTITLES]=h,f.SUBTITLES=h);const p=gv(c.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),m=new Ta({attrs:f,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:p,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let y=1;y<c.audioGroups.length;y++)m.addGroupId("audio",`${c.audioGroups[y]}_clone_${o}`);if(c.subtitleGroups)for(let y=1;y<c.subtitleGroups.length;y++)m.addGroupId("text",`${c.subtitleGroups[y]}_clone_${o}`);return m});n.push(...u),Up(this.audioTracks,r,l,o),Up(this.subtitleTracks,i,l,o)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+c)}const s={responseType:"json",url:i.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(c,f,d,h)=>{this.log(`Loaded steering manifest: "${i}"`);const p=c.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":y,"PATHWAY-PRIORITY":g}=p;if(m)try{this.uri=new self.URL(m,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||d.url),y&&this.clonePathways(y);const v={steeringManifest:p,url:i.toString()};this.hls.trigger(S.STEERING_MANIFEST_LOADED,v),g&&this.updatePathwayPriority(g)},onError:(c,f,d,h)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${f.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let p=this.timeToLoad*1e3;if(c.code===429){const m=this.loader;if(typeof(m==null?void 0:m.getResponseHeader)=="function"){const y=m.getResponseHeader("Retry-After");y&&(p=parseFloat(y)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,p)},onTimeout:(c,f,d)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,l,u)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function Up(t,e,n,r){t&&Object.keys(e).forEach(i=>{const s=t.filter(o=>o.groupId===i).map(o=>{const a=Ze({},o);return a.details=void 0,a.attrs=new $s(a.attrs),a.url=a.attrs.URI=gv(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[i],a.attrs["PATHWAY-ID"]=r,a});t.push(...s)})}function gv(t,e,n,r){const{HOST:i,PARAMS:s,[n]:o}=r;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const l=new self.URL(t);return i&&!a&&(l.host=i),s&&Object.keys(s).sort().forEach(u=>{u&&l.searchParams.set(u,s[u])}),l.href}const yL=/^age:\s*[\d.]+\s*$/im;class vL{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new HC,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!this.stats.aborted)return s(r,n.url)}).catch(o=>(r.open("GET",n.url,!0),s(r,n.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(o=>{this.callbacks.onError({code:r.status,text:o.message},n,r,i)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const i=n.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=r.loadPolicy;if(i)for(const a in i)e.setRequestHeader(a,i[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=s&&ne(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const i=n.readyState,s=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const o=n.status,a=n.responseType!=="text";if(o>=200&&o<300&&(a&&n.response||n.responseText!==null)){r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=a?n.response:n.responseText,u=n.responseType==="arraybuffer"?l.byteLength:l.length;if(r.loaded=r.total=u,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first),!this.callbacks)return;const c=this.callbacks.onProgress;if(c&&c(r,e,l,n),!this.callbacks)return;const f={url:n.responseURL,data:l,code:o};this.callbacks.onSuccess(f,r,e,n)}else{const l=s.loadPolicy.errorRetry,u=r.retry,c={url:e.url,data:void 0,code:o};Ca(l,u,!1,c)?this.retry(l):(P.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:n.statusText},e,n,r))}}}loadtimeout(){var e;const n=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry,r=this.stats.retry;if(Ca(n,r,!0))this.retry(n);else{var i;P.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=qf(e,r.retry),r.retry++,P.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&yL.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const xL=/\s/,SL={newCue(t,e,n,r){const i=[];let s,o,a,l,u;const c=self.VTTCue||self.TextTrackCue;for(let d=0;d<r.rows.length;d++)if(s=r.rows[d],a=!0,l=0,u="",!s.isEmpty()){var f;for(let m=0;m<s.chars.length;m++)xL.test(s.chars[m].uchar)&&a?l++:(u+=s.chars[m].uchar,a=!1);s.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const h=ov(u.trim()),p=nd(e,n,h);t!=null&&(f=t.cues)!=null&&f.getCueById(p)||(o=new c(e,n,h),o.id=p,o.line=d+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(o))}return t&&i.length&&(i.sort((d,h)=>d.line==="auto"||h.line==="auto"?0:d.line>8&&h.line>8?h.line-d.line:d.line-h.line),i.forEach(d=>by(t,d))),i}},EL={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null};Et(Et({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:vL,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:nA,bufferController:ak,capLevelController:rd,errorController:HR,fpsController:Pk,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Sy,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:EL},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},TL()),{},{subtitleStreamController:rk,subtitleTrackController:sk,timelineController:_k,audioStreamController:tk,audioTrackController:nk,emeController:ui,cmcdController:pL,contentSteeringController:gL});function TL(){return{cueHandler:SL,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}var bc={exports:{}},br={},yv={exports:{}},wL="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CL=wL,RL=CL;function vv(){}function xv(){}xv.resetWarningCache=vv;var AL=function(){function t(r,i,s,o,a,l){if(l!==RL){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xv,resetWarningCache:vv};return n.PropTypes=n,n};yv.exports=AL();var Sv=yv.exports,_c={exports:{}},Qt={},Ic={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var n="none",r="contents",i=/input|select|textarea|button|object|iframe/;function s(f,d){return d.getPropertyValue("overflow")!=="visible"||f.scrollWidth<=0&&f.scrollHeight<=0}function o(f){var d=f.offsetWidth<=0&&f.offsetHeight<=0;if(d&&!f.innerHTML)return!0;try{var h=window.getComputedStyle(f),p=h.getPropertyValue("display");return d?p!==r&&s(f,h):p===n}catch{return console.warn("Failed to inspect element style"),!1}}function a(f){for(var d=f,h=f.getRootNode&&f.getRootNode();d&&d!==document.body;){if(h&&d===h&&(d=h.host.parentNode),o(d))return!1;d=d.parentNode}return!0}function l(f,d){var h=f.nodeName.toLowerCase(),p=i.test(h)&&!f.disabled||h==="a"&&f.href||d;return p&&a(f)}function u(f){var d=f.getAttribute("tabindex");d===null&&(d=void 0);var h=isNaN(d);return(h||d>=0)&&l(f,!h)}function c(f){var d=[].slice.call(f.querySelectorAll("*"),0).reduce(function(h,p){return h.concat(p.shadowRoot?c(p.shadowRoot):[p])},[]);return d.filter(u)}t.exports=e.default})(Ic,Ic.exports);var Ev=Ic.exports;Object.defineProperty(Qt,"__esModule",{value:!0});Qt.resetState=_L;Qt.log=IL;Qt.handleBlur=Is;Qt.handleFocus=Ps;Qt.markForFocusLater=PL;Qt.returnFocus=DL;Qt.popWithoutFocus=OL;Qt.setupScopedFocus=NL;Qt.teardownScopedFocus=FL;var kL=Ev,LL=bL(kL);function bL(t){return t&&t.__esModule?t:{default:t}}var Ti=[],ti=null,Pc=!1;function _L(){Ti=[]}function IL(){}function Is(){Pc=!0}function Ps(){if(Pc){if(Pc=!1,!ti)return;setTimeout(function(){if(!ti.contains(document.activeElement)){var t=(0,LL.default)(ti)[0]||ti;t.focus()}},0)}}function PL(){Ti.push(document.activeElement)}function DL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{Ti.length!==0&&(e=Ti.pop(),e.focus({preventScroll:t}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function OL(){Ti.length>0&&Ti.pop()}function NL(t){ti=t,window.addEventListener?(window.addEventListener("blur",Is,!1),document.addEventListener("focus",Ps,!0)):(window.attachEvent("onBlur",Is),document.attachEvent("onFocus",Ps))}function FL(){ti=null,window.addEventListener?(window.removeEventListener("blur",Is),document.removeEventListener("focus",Ps)):(window.detachEvent("onBlur",Is),document.detachEvent("onFocus",Ps))}var Dc={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=Ev,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return a.activeElement.shadowRoot?s(a.activeElement.shadowRoot):a.activeElement}function o(a,l){var u=(0,r.default)(a);if(!u.length){l.preventDefault();return}var c=void 0,f=l.shiftKey,d=u[0],h=u[u.length-1],p=s();if(a===p){if(!f)return;c=h}if(h===p&&!f&&(c=d),d===p&&f&&(c=h),c){l.preventDefault(),c.focus();return}var m=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),y=m!=null&&m[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(y){var g=u.indexOf(p);if(g>-1&&(g+=f?-1:1),c=u[g],typeof c>"u"){l.preventDefault(),c=f?h:d,c.focus();return}l.preventDefault(),c.focus()}}t.exports=e.default})(Dc,Dc.exports);var ML=Dc.exports,Jt={},UL=function(){},BL=UL,qt={},Tv={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),n={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=n:window.ExecutionEnvironment=n})()})(Tv);var $L=Tv.exports;Object.defineProperty(qt,"__esModule",{value:!0});qt.canUseDOM=qt.SafeNodeList=qt.SafeHTMLCollection=void 0;var jL=$L,zL=GL(jL);function GL(t){return t&&t.__esModule?t:{default:t}}var sl=zL.default,HL=sl.canUseDOM?window.HTMLElement:{};qt.SafeHTMLCollection=sl.canUseDOM?window.HTMLCollection:{};qt.SafeNodeList=sl.canUseDOM?window.NodeList:{};qt.canUseDOM=sl.canUseDOM;qt.default=HL;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.resetState=qL;Jt.log=XL;Jt.assertNodeList=wv;Jt.setElement=QL;Jt.validateElement=sd;Jt.hide=JL;Jt.show=ZL;Jt.documentNotReadyOrSSRTesting=eb;var VL=BL,WL=YL(VL),KL=qt;function YL(t){return t&&t.__esModule?t:{default:t}}var At=null;function qL(){At&&(At.removeAttribute?At.removeAttribute("aria-hidden"):At.length!=null?At.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(At).forEach(function(t){return t.removeAttribute("aria-hidden")})),At=null}function XL(){}function wv(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function QL(t){var e=t;if(typeof e=="string"&&KL.canUseDOM){var n=document.querySelectorAll(e);wv(n,e),e=n}return At=e||At,At}function sd(t){var e=t||At;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,WL.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function JL(t){var e=!0,n=!1,r=void 0;try{for(var i=sd(t)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.setAttribute("aria-hidden","true")}}catch(a){n=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function ZL(t){var e=!0,n=!1,r=void 0;try{for(var i=sd(t)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.removeAttribute("aria-hidden")}}catch(a){n=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function eb(){At=null}var bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.resetState=tb;bi.log=nb;var ss={},os={};function Bp(t,e){t.classList.remove(e)}function tb(){var t=document.getElementsByTagName("html")[0];for(var e in ss)Bp(t,ss[e]);var n=document.body;for(var r in os)Bp(n,os[r]);ss={},os={}}function nb(){}var rb=function(e,n){return e[n]||(e[n]=0),e[n]+=1,n},ib=function(e,n){return e[n]&&(e[n]-=1),n},sb=function(e,n,r){r.forEach(function(i){rb(n,i),e.add(i)})},ob=function(e,n,r){r.forEach(function(i){ib(n,i),n[i]===0&&e.remove(i)})};bi.add=function(e,n){return sb(e.classList,e.nodeName.toLowerCase()=="html"?ss:os,n.split(" "))};bi.remove=function(e,n){return ob(e.classList,e.nodeName.toLowerCase()=="html"?ss:os,n.split(" "))};var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.log=lb;_i.resetState=ub;function ab(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Cv=function t(){var e=this;ab(this,t),this.register=function(n){e.openInstances.indexOf(n)===-1&&(e.openInstances.push(n),e.emit("register"))},this.deregister=function(n){var r=e.openInstances.indexOf(n);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(n){e.subscribers.push(n)},this.emit=function(n){e.subscribers.forEach(function(r){return r(n,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},La=new Cv;function lb(){console.log("portalOpenInstances ----------"),console.log(La.openInstances.length),La.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function ub(){La=new Cv}_i.default=La;var od={};Object.defineProperty(od,"__esModule",{value:!0});od.resetState=hb;od.log=pb;var cb=_i,fb=db(cb);function db(t){return t&&t.__esModule?t:{default:t}}var qe=void 0,zt=void 0,wr=[];function hb(){for(var t=[qe,zt],e=0;e<t.length;e++){var n=t[e];n&&n.parentNode&&n.parentNode.removeChild(n)}qe=zt=null,wr=[]}function pb(){console.log("bodyTrap ----------"),console.log(wr.length);for(var t=[qe,zt],e=0;e<t.length;e++){var n=t[e],r=n||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function $p(){wr.length!==0&&wr[wr.length-1].focusContent()}function mb(t,e){!qe&&!zt&&(qe=document.createElement("div"),qe.setAttribute("data-react-modal-body-trap",""),qe.style.position="absolute",qe.style.opacity="0",qe.setAttribute("tabindex","0"),qe.addEventListener("focus",$p),zt=qe.cloneNode(),zt.addEventListener("focus",$p)),wr=e,wr.length>0?(document.body.firstChild!==qe&&document.body.insertBefore(qe,document.body.firstChild),document.body.lastChild!==zt&&document.body.appendChild(zt)):(qe.parentElement&&qe.parentElement.removeChild(qe),zt.parentElement&&zt.parentElement.removeChild(zt))}fb.default.subscribe(mb);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(O){for(var D=1;D<arguments.length;D++){var W=arguments[D];for(var L in W)Object.prototype.hasOwnProperty.call(W,L)&&(O[L]=W[L])}return O},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},i=function(){function O(D,W){for(var L=0;L<W.length;L++){var b=W[L];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(D,b.key,b)}}return function(D,W,L){return W&&O(D.prototype,W),L&&O(D,L),D}}(),s=$,o=Sv,a=E(o),l=Qt,u=T(l),c=ML,f=E(c),d=Jt,h=T(d),p=bi,m=T(p),y=qt,g=E(y),v=_i,x=E(v);function T(O){if(O&&O.__esModule)return O;var D={};if(O!=null)for(var W in O)Object.prototype.hasOwnProperty.call(O,W)&&(D[W]=O[W]);return D.default=O,D}function E(O){return O&&O.__esModule?O:{default:O}}function k(O,D){if(!(O instanceof D))throw new TypeError("Cannot call a class as a function")}function w(O,D){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:O}function A(O,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);O.prototype=Object.create(D&&D.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(O,D):O.__proto__=D)}var F={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},I=function(D){return D.code==="Tab"||D.keyCode===9},H=function(D){return D.code==="Escape"||D.keyCode===27},U=0,z=function(O){A(D,O);function D(W){k(this,D);var L=w(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,W));return L.setOverlayRef=function(b){L.overlay=b,L.props.overlayRef&&L.props.overlayRef(b)},L.setContentRef=function(b){L.content=b,L.props.contentRef&&L.props.contentRef(b)},L.afterClose=function(){var b=L.props,R=b.appElement,C=b.ariaHideApp,j=b.htmlOpenClassName,N=b.bodyOpenClassName,K=b.parentSelector,X=K&&K().ownerDocument||document;N&&m.remove(X.body,N),j&&m.remove(X.getElementsByTagName("html")[0],j),C&&U>0&&(U-=1,U===0&&h.show(R)),L.props.shouldFocusAfterRender&&(L.props.shouldReturnFocusAfterClose?(u.returnFocus(L.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),L.props.onAfterClose&&L.props.onAfterClose(),x.default.deregister(L)},L.open=function(){L.beforeOpen(),L.state.afterOpen&&L.state.beforeClose?(clearTimeout(L.closeTimer),L.setState({beforeClose:!1})):(L.props.shouldFocusAfterRender&&(u.setupScopedFocus(L.node),u.markForFocusLater()),L.setState({isOpen:!0},function(){L.openAnimationFrame=requestAnimationFrame(function(){L.setState({afterOpen:!0}),L.props.isOpen&&L.props.onAfterOpen&&L.props.onAfterOpen({overlayEl:L.overlay,contentEl:L.content})})}))},L.close=function(){L.props.closeTimeoutMS>0?L.closeWithTimeout():L.closeWithoutTimeout()},L.focusContent=function(){return L.content&&!L.contentHasFocus()&&L.content.focus({preventScroll:!0})},L.closeWithTimeout=function(){var b=Date.now()+L.props.closeTimeoutMS;L.setState({beforeClose:!0,closesAt:b},function(){L.closeTimer=setTimeout(L.closeWithoutTimeout,L.state.closesAt-Date.now())})},L.closeWithoutTimeout=function(){L.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},L.afterClose)},L.handleKeyDown=function(b){I(b)&&(0,f.default)(L.content,b),L.props.shouldCloseOnEsc&&H(b)&&(b.stopPropagation(),L.requestClose(b))},L.handleOverlayOnClick=function(b){L.shouldClose===null&&(L.shouldClose=!0),L.shouldClose&&L.props.shouldCloseOnOverlayClick&&(L.ownerHandlesClose()?L.requestClose(b):L.focusContent()),L.shouldClose=null},L.handleContentOnMouseUp=function(){L.shouldClose=!1},L.handleOverlayOnMouseDown=function(b){!L.props.shouldCloseOnOverlayClick&&b.target==L.overlay&&b.preventDefault()},L.handleContentOnClick=function(){L.shouldClose=!1},L.handleContentOnMouseDown=function(){L.shouldClose=!1},L.requestClose=function(b){return L.ownerHandlesClose()&&L.props.onRequestClose(b)},L.ownerHandlesClose=function(){return L.props.onRequestClose},L.shouldBeClosed=function(){return!L.state.isOpen&&!L.state.beforeClose},L.contentHasFocus=function(){return document.activeElement===L.content||L.content.contains(document.activeElement)},L.buildClassName=function(b,R){var C=(typeof R>"u"?"undefined":r(R))==="object"?R:{base:F[b],afterOpen:F[b]+"--after-open",beforeClose:F[b]+"--before-close"},j=C.base;return L.state.afterOpen&&(j=j+" "+C.afterOpen),L.state.beforeClose&&(j=j+" "+C.beforeClose),typeof R=="string"&&R?j+" "+R:j},L.attributesFromObject=function(b,R){return Object.keys(R).reduce(function(C,j){return C[b+"-"+j]=R[j],C},{})},L.state={afterOpen:!1,beforeClose:!1},L.shouldClose=null,L.moveFromContentToOverlay=null,L}return i(D,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(L,b){this.props.isOpen&&!L.isOpen?this.open():!this.props.isOpen&&L.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!b.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var L=this.props,b=L.appElement,R=L.ariaHideApp,C=L.htmlOpenClassName,j=L.bodyOpenClassName,N=L.parentSelector,K=N&&N().ownerDocument||document;j&&m.add(K.body,j),C&&m.add(K.getElementsByTagName("html")[0],C),R&&(U+=1,h.hide(b)),x.default.register(this)}},{key:"render",value:function(){var L=this.props,b=L.id,R=L.className,C=L.overlayClassName,j=L.defaultStyles,N=L.children,K=R?{}:j.content,X=C?{}:j.overlay;if(this.shouldBeClosed())return null;var te={ref:this.setOverlayRef,className:this.buildClassName("overlay",C),style:n({},X,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},re=n({id:b,ref:this.setContentRef,style:n({},K,this.props.style.content),className:this.buildClassName("content",R),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),me=this.props.contentElement(re,N);return this.props.overlayElement(te,me)}}]),D}(s.Component);z.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},z.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(g.default),a.default.instanceOf(y.SafeHTMLCollection),a.default.instanceOf(y.SafeNodeList),a.default.arrayOf(a.default.instanceOf(g.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},e.default=z,t.exports=e.default})(_c,_c.exports);var gb=_c.exports;function Rv(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function Av(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r??null}this.setState(e.bind(this))}function kv(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Rv.__suppressDeprecationWarning=!0;Av.__suppressDeprecationWarning=!0;kv.__suppressDeprecationWarning=!0;function yb(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var s=t.displayName||t.name,o=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=Rv,e.componentWillReceiveProps=Av),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=kv;var a=e.componentDidUpdate;e.componentDidUpdate=function(u,c,f){var d=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;a.call(this,u,c,d)}}return t}const vb=Object.freeze(Object.defineProperty({__proto__:null,polyfill:yb},Symbol.toStringTag,{value:"Module"})),xb=Iv(vb);Object.defineProperty(br,"__esModule",{value:!0});br.bodyOpenClassName=br.portalClassName=void 0;var jp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sb=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Lv=$,ba=js(Lv),Eb=_f,_a=js(Eb),Tb=Sv,ie=js(Tb),wb=gb,zp=js(wb),Cb=Jt,Rb=kb(Cb),Vn=qt,Gp=js(Vn),Ab=xb;function kb(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function js(t){return t&&t.__esModule?t:{default:t}}function Lb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hp(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _b=br.portalClassName="ReactModalPortal",Ib=br.bodyOpenClassName="ReactModal__Body--open",dr=Vn.canUseDOM&&_a.default.createPortal!==void 0,Vp=function(e){return document.createElement(e)},Wp=function(){return dr?_a.default.createPortal:_a.default.unstable_renderSubtreeIntoContainer};function xo(t){return t()}var zs=function(t){bb(e,t);function e(){var n,r,i,s;Lb(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=Hp(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.removePortal=function(){!dr&&_a.default.unmountComponentAtNode(i.node);var u=xo(i.props.parentSelector);u&&u.contains(i.node)?u.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(u){i.portal=u},i.renderPortal=function(u){var c=Wp(),f=c(i,ba.default.createElement(zp.default,jp({defaultStyles:e.defaultStyles},u)),i.node);i.portalRef(f)},r),Hp(i,s)}return Sb(e,[{key:"componentDidMount",value:function(){if(Vn.canUseDOM){dr||(this.node=Vp("div")),this.node.className=this.props.portalClassName;var r=xo(this.props.parentSelector);r.appendChild(this.node),!dr&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var i=xo(r.parentSelector),s=xo(this.props.parentSelector);return{prevParent:i,nextParent:s}}},{key:"componentDidUpdate",value:function(r,i,s){if(Vn.canUseDOM){var o=this.props,a=o.isOpen,l=o.portalClassName;r.portalClassName!==l&&(this.node.className=l);var u=s.prevParent,c=s.nextParent;c!==u&&(u.removeChild(this.node),c.appendChild(this.node)),!(!r.isOpen&&!a)&&!dr&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Vn.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,i=Date.now(),s=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||i+this.props.closeTimeoutMS);s?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-i)):this.removePortal()}}},{key:"render",value:function(){if(!Vn.canUseDOM||!dr)return null;!this.node&&dr&&(this.node=Vp("div"));var r=Wp();return r(ba.default.createElement(zp.default,jp({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){Rb.setElement(r)}}]),e}(Lv.Component);zs.propTypes={isOpen:ie.default.bool.isRequired,style:ie.default.shape({content:ie.default.object,overlay:ie.default.object}),portalClassName:ie.default.string,bodyOpenClassName:ie.default.string,htmlOpenClassName:ie.default.string,className:ie.default.oneOfType([ie.default.string,ie.default.shape({base:ie.default.string.isRequired,afterOpen:ie.default.string.isRequired,beforeClose:ie.default.string.isRequired})]),overlayClassName:ie.default.oneOfType([ie.default.string,ie.default.shape({base:ie.default.string.isRequired,afterOpen:ie.default.string.isRequired,beforeClose:ie.default.string.isRequired})]),appElement:ie.default.oneOfType([ie.default.instanceOf(Gp.default),ie.default.instanceOf(Vn.SafeHTMLCollection),ie.default.instanceOf(Vn.SafeNodeList),ie.default.arrayOf(ie.default.instanceOf(Gp.default))]),onAfterOpen:ie.default.func,onRequestClose:ie.default.func,closeTimeoutMS:ie.default.number,ariaHideApp:ie.default.bool,shouldFocusAfterRender:ie.default.bool,shouldCloseOnOverlayClick:ie.default.bool,shouldReturnFocusAfterClose:ie.default.bool,preventScroll:ie.default.bool,parentSelector:ie.default.func,aria:ie.default.object,data:ie.default.object,role:ie.default.string,contentLabel:ie.default.string,shouldCloseOnEsc:ie.default.bool,overlayRef:ie.default.func,contentRef:ie.default.func,id:ie.default.string,overlayElement:ie.default.func,contentElement:ie.default.func};zs.defaultProps={isOpen:!1,portalClassName:_b,bodyOpenClassName:Ib,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,n){return ba.default.createElement("div",e,n)},contentElement:function(e,n){return ba.default.createElement("div",e,n)}};zs.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,Ab.polyfill)(zs);br.default=zs;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=br,r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default,t.exports=e.default})(bc,bc.exports);var Pb=bc.exports;const Kp=Oc(Pb),Db=({bookName:t,chapterNumber:e,url:n,setUrl:r})=>{const[i,s]=$.useState(!1);Kp.setAppElement("#root");function o(u,c){return u.split(" ").map(m=>m.charAt(0).toUpperCase()).join("")+c}const a=()=>{Ce.put(`http://localhost:5000/update/${t}/${e}`,{url:n}).then(u=>{console.log(u),window.alert("URL Updated")}).catch(u=>{console.log(u)}).finally(()=>{console.log("URL Updated")})},l=u=>{console.log("Uploading to JH"),u.preventDefault();const c="https://audio.jukehost.co.uk/upload",f="32619",d="",h=u.target.elements.audio_file.files[0];let p=new FormData;const m=o(t,e);if(h instanceof Blob)p.append("file",h,m+".mp3"),p.append("owner",f),p.append("CSRF_TOKEN",d),s(!0);else{window.alert("No file selected");return}Ce.post(c,p,{headers:{Accept:"*/*","Content-Type":"multipart/form-data"}}).then(y=>{console.log(y.data),s(!1),console.log(y.headers)}).catch(y=>{window.alert("Error in Loading the file"),console.log(y)}).then(()=>{const y="https://jukehost.co.uk/api/internal/library/track/search/"+m+".mp3";window.open(y,"_blank","width=500,height=500")}).catch(y=>{window.alert("Error Uploading to JH"+y),console.log(y)})};return M.jsxs(M.Fragment,{children:[M.jsxs(Kp,{isOpen:i,onRequestClose:()=>s(!1),contentLabel:"Uploading Modal",children:[M.jsx("div",{className:"flex content-center justify-center",children:M.jsx("div",{className:"animate-spin h-60 w-60 border-t-2 border-blue-500 rounded-full my-2 mx-2"})}),M.jsx("div",{className:"text-3xl text-black text-center mt-4",children:" Uploading .... "})]}),M.jsxs("div",{className:" min-h-72 mt-12  text-2xl",children:[M.jsxs("div",{className:"flex items-center my-2 mb-12",children:[M.jsx("div",{className:" flex-[40%]",children:M.jsx("p",{children:"Step 1: Upload Directly* (Beta Version)"})}),M.jsx("div",{className:" flex-[10%]",children:M.jsx("p",{children:"OR"})}),M.jsx("div",{className:"flex-[40%]",children:M.jsx("a",{href:"https://jukehost.co.uk/library/upload",target:"_blank",children:M.jsx("button",{className:"bg-white text-black  font-semibold py-2 px-4 rounded w-[90%]",children:"Go to JukeHost"})})})]}),M.jsx("div",{className:"mb-12",children:M.jsxs("form",{className:"flex gap-3 pr-12 content-center ",onSubmit:l,children:[M.jsx("input",{type:"file",name:"audio_file",className:"w-full text-lg border-2 py-3 p-2 border-white border-solid"}),M.jsx("button",{className:"bg-white text-black text-lg f py-2 px-4 rounded ",type:"submit",children:"Upload"})]})}),M.jsxs("div",{className:"flex items-center mt-12",children:[M.jsx("div",{className:" flex-[50%]",children:M.jsx("p",{children:"Step 2: Update the ID from the popup"})}),M.jsx("div",{className:"flex-[50%]",children:M.jsx("input",{type:"text",className:"bg-white text-black py-2 px-4 rounded w-[40vw]",value:n,onChange:u=>r(u.target.value)})})]}),M.jsx("div",{children:M.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-12 w-full",onClick:a,children:"Update Source URL"})})]})]})},Ob=({bookName:t,chapterNumber:e,url:n,setUrl:r})=>{function i(o,a){return o.split(" ").map(d=>d.charAt(0).toUpperCase()).join("")+"_"+a}const s=async o=>{o.preventDefault(),o.target.elements.audio_file.files[0],i(t,e);const a=uploadURL.split("?")[0];console.log(a)};return M.jsx(M.Fragment,{children:M.jsxs("div",{className:"my-12",children:[M.jsx("h2",{className:"mb-8",children:"Step 1: Upload Directly to S2"}),M.jsxs("form",{className:"flex pr-12 content-center ",onSubmit:s,children:[M.jsx("input",{type:"file",name:"audio_file",className:"w-full text-lg"}),M.jsx("button",{className:"bg-white text-black text-lg f py-2 px-4 rounded",type:"submit",children:"Upload"})]})]})})},Nb=()=>{const{bookName:t,chapterNumber:e}=M1(),n=Vg(),[r,i]=$.useState(!1),[s,o]=$.useState(!0),[a,l]=$.useState(!0),[u,c]=$.useState(!0),[f,d]=$.useState({}),[h,p]=$.useState("https://storage.googleapis.com/proudcity/mebanenc/uploads/2021/03/placeholder-image.png"),[m,y]=$.useState("JukeHost"),[g,v]=$.useState(""),[x,T]=$.useState("");$.useEffect(()=>{Ce.get(`http://localhost:5000/book/${t}`).then(A=>{d(A.data[0].chapters[e-1]),p(A.data[0].bookimg),v(A.data[0].chapters[e-1].url),A.data[0].aws_hosted&&y("S3")}).finally(()=>{l(!1)}),localStorage.getItem("sessId")&&T(localStorage.getItem("sessId"))},[]);const E=()=>{n(`/book/${t}/${parseInt(e)-1}`),window.location.reload()},k=()=>{n(`/book/${t}/${parseInt(e)+1}`),window.location.reload()},w=()=>{console.log("Checking availability"),i(!0);const A=m==="S3",F=g,I="https://audio.jukehost.co.uk/";if(!A){const H=new AbortController,U=H.signal,z=`${I}${F}`;console.log("Checking:",z),fetch(z,{signal:U}).then(O=>{H.abort(),O.status===200?(o(!0),c(!1)):(o(!1),c(!1))}).catch(O=>{O.name==="AbortError"?console.log("Fetch aborted"):(console.error("Error:",O),o(!1))})}};return M.jsxs("div",{className:"p-6 flex flex-col justify-start min-h-screen w-screen",children:[M.jsxs("div",{className:"flex justify-between ",children:[M.jsxs("div",{children:[M.jsxs("p",{className:"mb-24 text-3xl",children:["Book: ",t]}),M.jsxs("p",{children:["Chapter: ",e]})]}),M.jsx("div",{children:M.jsx("img",{src:h,alt:t,className:"rounded-md h-36 w-28 object-fit "})})]}),a?M.jsx("p",{children:"Loading"}):M.jsxs("div",{children:[M.jsxs("div",{className:"mb-10",children:[M.jsx("h1",{children:f.chapter_title}),M.jsx("p",{children:f==null?void 0:f.description})]}),M.jsx("div",{className:"mb-16",children:M.jsxs("div",{className:"flex gap-2",children:[r&&(u?M.jsx("div",{className:"animate-spin h-6 w-6 border-t-2 border-blue-500 rounded-full my-2 mx-2"}):s?M.jsx("p",{className:"text-green-500 py-2 px-4",children:M.jsx(vy,{size:24})}):M.jsx("p",{className:"text-red-500 py-2",children:"Unavailable"})),M.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:w,children:"Run Health Check"})]})}),M.jsx("div",{className:"mb-4 text-3xl",children:"Update Source"}),M.jsxs("div",{className:"flex gap-4",children:[M.jsx("div",{className:`text-center flex-[50%] border ${m==="JukeHost"?"bg-purple-600 ":"bg-gray-800"} `,children:"JukeHost"}),M.jsx("div",{className:`text-center flex-[50%] border ${m==="S3"?"bg-purple-600 ":"bg-gray-800"} `,children:"AWS S3"})]}),m==="JukeHost"&&M.jsx(Db,{bookName:t,chapterNumber:e,url:g,setUrl:v}),m==="S3"&&M.jsx(Ob,{bookName:t,chapterNumber:e,url:g,setUrl:v})]}),M.jsxs("div",{className:"flex justify-between my-8",children:[M.jsx("button",{className:"",onClick:E,children:"Previous Chapter"}),M.jsx("button",{className:"",onClick:k,children:"Next Chapter"})]}),M.jsx("div",{})]})},Fb=()=>M.jsx("div",{children:"Test"});function Mb(){return M.jsxs("div",{className:"",children:[M.jsx(o1,{children:M.jsx("div",{className:"",children:M.jsx(a1,{})})}),M.jsx(s1,{children:M.jsx(tw,{children:M.jsxs(J1,{children:[M.jsx(No,{path:"/",element:M.jsx(PC,{})}),M.jsx(No,{path:"/book/:bookName/:chapterNumber",element:M.jsx(Nb,{})}),M.jsx(No,{path:"/test",element:M.jsx(Fb,{})})]})})})]})}const Ub="pk_test_bmV3LWdudS05OC5jbGVyay5hY2NvdW50cy5kZXYk";du.createRoot(document.getElementById("root")).render(M.jsx(Y.StrictMode,{children:M.jsx(Ng,{publishableKey:Ub,children:M.jsx(Mb,{})})}));
